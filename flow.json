[
    {
        "id": "f409e00b8acde5e1",
        "type": "tab",
        "label": "sorting",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "98ca48f3d4300469",
        "type": "tab",
        "label": "system",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "414b8641d06f1829",
        "type": "tab",
        "label": "button",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "e181d79831f12e5d",
        "type": "tab",
        "label": "order",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "62cb6b3a5192492c",
        "type": "tab",
        "label": "main dropship",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "bddf42db0215867b",
        "type": "tab",
        "label": "main pickup",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "e021d1d1bf02799b",
        "type": "tab",
        "label": "main bag",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "cd39ac09273f5605",
        "type": "tab",
        "label": "return",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "d7cd6c87a33b6389",
        "type": "tab",
        "label": "return dropship",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "c7627bdbbbf8f486",
        "type": "tab",
        "label": "return pickup",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "cce016f7fd2b5ab6",
        "type": "tab",
        "label": "return bag",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "805a768837c7900b",
        "type": "tab",
        "label": "test",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "b799064cb3f975fb",
        "type": "tab",
        "label": "in",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "9e9a77f.2571f88",
        "type": "subflow",
        "name": "Glob Cache",
        "info": "ACTION:[\n    Add, \n    Read,\n    Delete\n]\n\nuse {\n    \"payload\":{\n        \"Add\":{\n            \"id\":1,\"val\":10\n        }\n    }\n}",
        "category": "",
        "in": [
            {
                "x": 80,
                "y": 40,
                "wires": [
                    {
                        "id": "2825c0f3.fd688"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1560,
                "y": 340,
                "wires": [
                    {
                        "id": "a4e3568c.c27548",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1560,
                "y": 540,
                "wires": [
                    {
                        "id": "3c2989e6.e98316",
                        "port": 0
                    },
                    {
                        "id": "b2ce0a4d.d3c3f8",
                        "port": 0
                    },
                    {
                        "id": "645967d6.18ecd8",
                        "port": 0
                    },
                    {
                        "id": "4b3e9b59.2f4bc4",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "GLOB_NAME",
                "type": "str",
                "value": "glob_test"
            },
            {
                "name": "ID_KEY",
                "type": "str",
                "value": "job.id"
            }
        ],
        "color": "#AAAA66",
        "inputLabels": [
            "payload"
        ],
        "outputLabels": [
            "payload",
            "log"
        ],
        "icon": "node-red/db.svg",
        "status": {
            "x": 1560,
            "y": 200,
            "wires": [
                {
                    "id": "52e7a432.8c400c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "2e26026f.b353be",
        "type": "elastic-logger-config",
        "logstashHost": "logstash",
        "logstashPort": "5044",
        "minLevel": "debug",
        "name": "ALL"
    },
    {
        "id": "72bec069c933c2ad",
        "type": "rollun-openapi-manifest",
        "name": "CRMEventHandler v1",
        "schema": {
            "openapi": "3.0.0",
            "info": {
                "version": "1",
                "title": "CRMEventHandler",
                "description": "Manifest description"
            },
            "servers": [
                {
                    "url": "https://crm-node-red.rollun.net/openapi/CRMEventHandler/v1"
                }
            ],
            "tags": [
                {
                    "name": "Event"
                }
            ],
            "paths": {
                "/eventHandler": {
                    "post": {
                        "tags": [
                            "Event"
                        ],
                        "summary": "Handle event",
                        "description": "",
                        "requestBody": {
                            "description": "",
                            "required": true,
                            "content": {
                                "application/json": {
                                    "schema": {
                                        "$ref": "#/components/schemas/EventPostRequest"
                                    }
                                }
                            }
                        },
                        "responses": {
                            "200": {
                                "description": "Success response",
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "$ref": "#/components/schemas/ActionsResponse"
                                        }
                                    }
                                }
                            },
                            "500": {
                                "description": "Some error",
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "$ref": "#/components/schemas/ErrorResponse"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "components": {
                "schemas": {
                    "Message": {
                        "type": "object",
                        "properties": {
                            "level": {
                                "type": "string",
                                "enum": [
                                    "emergency",
                                    "alert",
                                    "critical",
                                    "error",
                                    "warning",
                                    "notice",
                                    "info"
                                ]
                            },
                            "text": {
                                "type": "string",
                                "description": "Message, that describes what went wrong"
                            }
                        }
                    },
                    "ErrorResponse": {
                        "type": "object",
                        "required": [
                            "lifecycleToken"
                        ],
                        "properties": {
                            "lifecycleToken": {
                                "type": "string"
                            },
                            "messages": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/Message"
                                }
                            }
                        },
                        "description": "Message field is not required"
                    },
                    "SuccessResponse": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/ErrorResponse"
                            }
                        ],
                        "type": "object",
                        "properties": {
                            "data": {
                                "type": "object"
                            }
                        }
                    },
                    "ActionsResponse": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/SuccessResponse"
                            }
                        ],
                        "type": "object",
                        "properties": {
                            "data": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/ActionWithEntity"
                                }
                            }
                        }
                    },
                    "ActionWithEntity": {
                        "type": "object",
                        "properties": {
                            "action": {
                                "$ref": "#/components/schemas/Action"
                            },
                            "entity": {
                                "$ref": "#/components/schemas/ActionEntity"
                            }
                        }
                    },
                    "EventPostRequest": {
                        "type": "object",
                        "required": [
                            "lifecycleToken",
                            "entity",
                            "action"
                        ],
                        "properties": {
                            "lifecycleToken": {
                                "type": "string"
                            },
                            "entity": {
                                "$ref": "#/components/schemas/EventEntity"
                            },
                            "action": {
                                "$ref": "#/components/schemas/CompletedAction"
                            }
                        }
                    },
                    "CompletedAction": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/Action"
                            }
                        ],
                        "properties": {
                            "startedAt": {
                                "type": "string",
                                "example": "2022-09-22 21:53:10",
                                "description": "mysql date-time"
                            }
                        }
                    },
                    "Action": {
                        "type": "object",
                        "required": [
                            "type",
                            "data"
                        ],
                        "properties": {
                            "type": {
                                "type": "string"
                            },
                            "data": {
                                "type": "object",
                                "additionalProperties": true
                            },
                            "delay": {
                                "type": "integer",
                                "minimum": 0
                            }
                        }
                    },
                    "EventEntity": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/Entity"
                            }
                        ],
                        "required": [
                            "row"
                        ],
                        "properties": {
                            "row": {
                                "type": "object",
                                "required": [
                                    "id"
                                ],
                                "additionalProperties": true,
                                "properties": {
                                    "id": {
                                        "type": "string"
                                    }
                                }
                            },
                            "changedFields": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    },
                    "ActionEntity": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/Entity"
                            }
                        ],
                        "required": [
                            "rowId"
                        ],
                        "properties": {
                            "rowId": {
                                "type": "string"
                            }
                        }
                    },
                    "Entity": {
                        "type": "object",
                        "required": [
                            "type",
                            "name"
                        ],
                        "properties": {
                            "type": {
                                "type": "string"
                            },
                            "name": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "baseURL": "/openapi/CRMEventHandler/v1",
        "schemaUrl": "https://raw.githubusercontent.com/rollun-com/openapi-manifests/develop/crm_event_handler__v1.yml"
    },
    {
        "id": "52e7a432.8c400c",
        "type": "function",
        "z": "9e9a77f.2571f88",
        "name": "Status",
        "func": "var counter = 0;\nvar globCache = global.get(env.get(\"GLOB_NAME\"));\n\nfor (var key in globCache) {\n  counter++;\n}\n\nvar fill;\nif ( counter>0) {\n   fill = \"yellow\";\n} else {\n   fill = \"green\";\n}\n\nmsg.payload = {fill:fill,shape:\"ring\",text:\"Count: \"+counter};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1390,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "f61ba939.2a9e18",
        "type": "switch",
        "z": "9e9a77f.2571f88",
        "name": "Action",
        "property": "$keys(payload)[0]\t",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "Query",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Read",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Add",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Delete",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 770,
        "y": 360,
        "wires": [
            [
                "809f153b.1d7cd8"
            ],
            [
                "9e14b985.6f5028"
            ],
            [
                "aef18ab3.2dd678"
            ],
            [
                "a82480a2.b7d5b"
            ],
            [
                "aa898ca9.02bd8"
            ]
        ]
    },
    {
        "id": "aa898ca9.02bd8",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "Error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"red\",\"shape\":\"ring\",\"text\":\"Wrong Action \\\"\" &  $keys(payload)[0]\t &\"\\\" in glob cache subflow:\" & log.context.globName}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.context.error",
                "pt": "msg",
                "to": "\"Wrong Action \\\"\" &  $keys(payload)[0]\t &\"\\\" in glob cache subflow:\" & log.context.globName",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1050,
        "y": 540,
        "wires": [
            [
                "93c6f28b.10219",
                "645967d6.18ecd8",
                "52e7a432.8c400c"
            ]
        ]
    },
    {
        "id": "9e14b985.6f5028",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "Read",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t    $globName:=log.context.globName;\t    $glob:=$globalContext($globName);\t    $glob:=$exists($glob)?$glob.*:[];\t    $result:=$glob~>$append([]);\t)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1050,
        "y": 280,
        "wires": [
            [
                "52e7a432.8c400c",
                "a4e3568c.c27548"
            ]
        ]
    },
    {
        "id": "671fb8a7.9e1008",
        "type": "function",
        "z": "9e9a77f.2571f88",
        "name": "set glob_",
        "func": "var merge = function() {\n    var obj = {},\n        i = 0,\n        il = arguments.length,\n        key;\n    for (; i < il; i++) {\n        for (key in arguments[i]) {\n            if (arguments[i].hasOwnProperty(key)) {\n                obj[key] = arguments[i][key];\n            }\n        }\n    }\n    return obj;\n};\n\nvar glob;\nvar globName=env.get(\"GLOB_NAME\");\n    globName=globName!==undefined?globName:\"test\";\n    glob=global.get(globName);\n    glob=glob!==undefined?glob:{};\n    glob={...glob,...msg.payload};\n    global.set(globName,glob);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1060,
        "y": 380,
        "wires": [
            [
                "3c2989e6.e98316",
                "52e7a432.8c400c",
                "6b03adbf.ad7e84"
            ]
        ]
    },
    {
        "id": "a82480a2.b7d5b",
        "type": "function",
        "z": "9e9a77f.2571f88",
        "name": "Delete glob_",
        "func": "var globName=env.get(\"GLOB_NAME\");\nglobName=globName!==undefined?globName:\"test\";\nglobal.set(globName,{});\nmsg.payload=globName + \" deleted\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1070,
        "y": 480,
        "wires": [
            [
                "b2ce0a4d.d3c3f8",
                "52e7a432.8c400c"
            ]
        ]
    },
    {
        "id": "3c2989e6.e98316",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "log",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "\"Add to  globCache - \" & log.context.globName",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.context.item",
                "pt": "msg",
                "to": "payload.*",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "b2ce0a4d.d3c3f8",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "log",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": " \"Delete  globCache - \" & log.context.globName",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "645967d6.18ecd8",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "log",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "\"Error rin  globCache - \" & log.context.globName",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "error",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "93c6f28b.10219",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "$error()",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$error(log.context.error)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1060,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "aef18ab3.2dd678",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.Add.{$eval($env(\"ID_KEY\")):$}~>$merge()\t\t/*\t{\t    \"payload\": {\t        \"Add\": [\t            {\t                \"id\": \"b\",\t                \"val\": 2\t            },\t            {\t                \"id\": \"c\",\t                \"val\": 3\t            }\t        ]\t    }\t}\t*/\t\t/*\t{\t    \"payload\": {\t        \"Add\": \t            {\t                \"id\": \"b\",\t                \"val\": 2\t            }\t    }\t}\t*/",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 340,
        "wires": [
            [
                "671fb8a7.9e1008"
            ]
        ]
    },
    {
        "id": "ff46a584.e43f68",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "log",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "\"No message\"",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "degug",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.id",
                "pt": "msg",
                "to": "ID_KEY",
                "tot": "env"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 280,
        "wires": [
            [
                "f61ba939.2a9e18"
            ]
        ]
    },
    {
        "id": "2825c0f3.fd688",
        "type": "function",
        "z": "9e9a77f.2571f88",
        "name": "log={\"context\"",
        "func": "var globName=env.get(\"GLOB_NAME\");\nglobName=globName!==undefined?globName:\"test\";\nmsg.log={\"context\":{\"globName\":globName}};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 200,
        "y": 100,
        "wires": [
            [
                "ca9f392d.6d5358"
            ]
        ]
    },
    {
        "id": "6b03adbf.ad7e84",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "payload.*",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(payload.*)~>$append([])",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1060,
        "y": 420,
        "wires": [
            [
                "a4e3568c.c27548"
            ]
        ]
    },
    {
        "id": "809f153b.1d7cd8",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "Query",
        "rules": [
            {
                "t": "set",
                "p": "log.context.query",
                "pt": "msg",
                "to": "  $query:=\"$glob[\"&payload.Query&\"]\"",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t    $globName:=log.context.globName;\t    $glob:=$globalContext($globName);\t    $glob:=$exists($glob)?$glob.*:[];\t    $eval(log.context.query) )~>$append([]\t )",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1050,
        "y": 220,
        "wires": [
            [
                "4b3e9b59.2f4bc4",
                "a4e3568c.c27548",
                "52e7a432.8c400c"
            ]
        ]
    },
    {
        "id": "ca9f392d.6d5358",
        "type": "switch",
        "z": "9e9a77f.2571f88",
        "name": "is sset $env(\"ID_KEY\"?",
        "property": "ID_KEY",
        "propertyType": "env",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 230,
        "y": 140,
        "wires": [
            [
                "ff46a584.e43f68"
            ],
            [
                "62aa1c93.229b94"
            ]
        ]
    },
    {
        "id": "62aa1c93.229b94",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "Error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"fill\":\"red\",\"shape\":\"ring\",\"text\":\"Wrong ID_KEY\"}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "log.context.error",
                "pt": "msg",
                "to": "\"Wrong ID_KEY in glob cache subflow:\" & log.context.globName",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1050,
        "y": 660,
        "wires": [
            [
                "37a55443.38825c",
                "52e7a432.8c400c"
            ]
        ]
    },
    {
        "id": "37a55443.38825c",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "$error()  ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$error(log.context.error)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1060,
        "y": 700,
        "wires": [
            [
                "645967d6.18ecd8"
            ]
        ]
    },
    {
        "id": "4b3e9b59.2f4bc4",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "log",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "\"Query from globCache - \" & log.context.globName",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "a4e3568c.c27548",
        "type": "change",
        "z": "9e9a77f.2571f88",
        "name": "del log",
        "rules": [
            {
                "t": "delete",
                "p": "log",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "d170308570565787",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "order",
        "property": "crm.output.entity.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "orders",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 280,
        "wires": [
            [
                "d4c7cf29592984ee"
            ],
            [
                "2f94643da9ce8576"
            ]
        ],
        "outputLabels": [
            "order",
            ""
        ]
    },
    {
        "id": "0382d331b95435f9",
        "type": "change",
        "z": "f409e00b8acde5e1",
        "name": "set info",
        "rules": [
            {
                "t": "set",
                "p": "crm.output",
                "pt": "msg",
                "to": "openapiRequest.payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 80,
        "wires": [
            [
                "39a2de5896a98e8d",
                "862a0c3b6cc60127"
            ]
        ]
    },
    {
        "id": "d4c7cf29592984ee",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "o",
        "mode": "link",
        "links": [
            "99f994a095ff1072"
        ],
        "x": 570,
        "y": 260,
        "wires": [],
        "l": true,
        "info": "main order"
    },
    {
        "id": "ee8a1da282ad2d1e",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "md",
        "mode": "link",
        "links": [
            "6242e4ca54d3c938"
        ],
        "x": 570,
        "y": 300,
        "wires": [],
        "l": true,
        "info": "main dropship"
    },
    {
        "id": "c53e7918836acc38",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "mp",
        "mode": "link",
        "links": [
            "75d3acf739c9e638"
        ],
        "x": 570,
        "y": 340,
        "wires": [],
        "l": true,
        "info": "main pickup"
    },
    {
        "id": "0bf3f9a951080b35",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "mb",
        "mode": "link",
        "links": [
            "8bf50d58ba491581"
        ],
        "x": 570,
        "y": 380,
        "wires": [],
        "l": true,
        "info": "main bag"
    },
    {
        "id": "2718fac2545bf071",
        "type": "catch",
        "z": "f409e00b8acde5e1",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 1000,
        "y": 40,
        "wires": [
            [
                "8fad5443fcacbea3"
            ]
        ]
    },
    {
        "id": "8fad5443fcacbea3",
        "type": "change",
        "z": "f409e00b8acde5e1",
        "name": "set error ",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "$substringAfter(\t   error.message,\t   \"Invalid JSONata expression: \"\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "alert",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.source",
                "pt": "msg",
                "to": "error.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "log.context.flow",
                "pt": "msg",
                "to": "src",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 80,
        "wires": [
            [
                "1725c6765e22f0e6",
                "1e70e252a010fa49"
            ]
        ]
    },
    {
        "id": "1725c6765e22f0e6",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "log",
        "mode": "link",
        "links": [
            "4b768188.85ab9"
        ],
        "x": 970,
        "y": 120,
        "wires": [],
        "icon": "node-red/file-in.svg",
        "l": true
    },
    {
        "id": "1e70e252a010fa49",
        "type": "debug",
        "z": "f409e00b8acde5e1",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1140,
        "y": 80,
        "wires": []
    },
    {
        "id": "2e4c0b23fb2415b5",
        "type": "inject",
        "z": "f409e00b8acde5e1",
        "name": "test",
        "props": [
            {
                "p": "openapiRequest.payload",
                "v": "{\"lifecycleToken\":\"9JZD5S86E5TL99XIPC86Z1UEIG5OFS\",\"entity\":{\"row\":{\"Id\":\"401810\",\"GUID\":null,\"Name\":null,\"Owner\":null,\"IsPaid\":\"0\",\"MpName\":\"Ebay Plaisir\",\"MpUaId\":null,\"RetBag\":null,\"Sender\":\"pu_ds_b\",\"SrName\":\"PartsUnlimited\",\"Carrier\":\"-\",\"IsDraft\":\"0\",\"Manager\":null,\"Problem\":null,\"SrOrderId\":\"PartsUnlimited | E0032643\",\"ShipStatus\":null,\"Description\":null,\"TimeCreated\":\"2023-05-04 06:35:16\",\"TimeUpdated\":\"2023-05-04 10:38:08\",\"Tracknumber\":\"-\",\"SrShipMethod\":\"Standard\",\"MpOrderNumber\":\"22-10011-41732\",\"SrOrderNumber\":\"E0032643\",\"SrOrderStatus\":\"Ordered\",\"SrPaymentCard\":\"op acct\",\"SrVirtualName\":null,\"ArchiveScenario\":null,\"EnterTracknumber\":\"products in order\",\"DateLabelCreation\":null,\"AdditionalTracknumbers\":null,\"DateEnteringTracknumberIntoMp\":null,\"Contractor\":\"1048444\",\"FinalPrice\":\"42.40\",\"ProblemDescription\":\"Deal position is not bought\",\"Total\":\"42.40\",\"Status\":\"106\",\"StatusName\":\"Track-numbers getting\",\"ProgramId\":\"21\",\"ProgramName\":\"Dropship\",\"RelatedOrder\":\"401558\"},\"changedFields\":{\"TimeUpdated\":\"2023-05-04 10:38:07\",\"ProblemDescription\":\"-\"},\"type\":\"deal\",\"name\":\"dropships\"},\"action\":{\"startedAt\":\"2023-05-04T10:38:08+00:00\",\"type\":\"update\",\"context\":{\"TimeUpdated\":\"2023-05-04 10:38:08\",\"ProblemDescription\":\"Deal position is not bought\"}}}",
                "vt": "json"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 90,
        "y": 80,
        "wires": [
            [
                "0382d331b95435f9"
            ]
        ]
    },
    {
        "id": "97951b1b983d0d69",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "test",
        "mode": "link",
        "links": [
            "bb7bbed2c1a53572",
            "376671e71982a7bb"
        ],
        "x": 570,
        "y": 220,
        "wires": [],
        "l": true,
        "info": "main bag"
    },
    {
        "id": "1dc27dbff2506710",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "client",
        "property": "crm.output.entity_type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "client",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 270,
        "y": 800,
        "wires": [
            [
                "e9576c54efe7d88d"
            ],
            [
                "ae98b892018efdf3"
            ]
        ]
    },
    {
        "id": "ae98b892018efdf3",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "offer",
        "property": "crm.output.entity_type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "offers",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 270,
        "y": 840,
        "wires": [
            [
                "e9576c54efe7d88d"
            ],
            [
                "2986636b43ae4fe3"
            ]
        ]
    },
    {
        "id": "2f94643da9ce8576",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "dropship",
        "property": "crm.output.entity.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "dropships",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 360,
        "y": 320,
        "wires": [
            [
                "ee8a1da282ad2d1e"
            ],
            [
                "09c27c9e000bb438"
            ]
        ],
        "outputLabels": [
            "dropship",
            ""
        ]
    },
    {
        "id": "09c27c9e000bb438",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "pickup",
        "property": "crm.output.entity.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "pickups",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 360,
        "wires": [
            [
                "c53e7918836acc38"
            ],
            [
                "1a6692702ed7dfc8"
            ]
        ],
        "outputLabels": [
            "dropship",
            ""
        ]
    },
    {
        "id": "1a6692702ed7dfc8",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "bag",
        "property": "crm.output.entity.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "bags",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 400,
        "wires": [
            [
                "0bf3f9a951080b35"
            ],
            [
                "2d040c83d579dd19"
            ]
        ],
        "outputLabels": [
            "bag",
            ""
        ]
    },
    {
        "id": "6304341fd7ca3b3a",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "test",
        "property": "crm.output.entity.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "test",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 240,
        "wires": [
            [
                "97951b1b983d0d69"
            ],
            [
                "d170308570565787"
            ]
        ]
    },
    {
        "id": "67f244ac5649799b",
        "type": "link in",
        "z": "f409e00b8acde5e1",
        "name": "success",
        "links": [
            "329422367a352006",
            "fcb74303af5f0373",
            "583801819f3cd5cd",
            "93f61e273a9e0008",
            "26f8134b5775decd",
            "0e3df07ee2f9cbb2",
            "b51db25d74bf34d1",
            "2ffeea1a21b5065c",
            "9337eeac41497a21",
            "1115272dcff9ce91",
            "9c96fd46320c60aa",
            "b3b7a9f4ebb825b2",
            "c532fe30dc470178",
            "2891ad81fc12eb03",
            "163d18ea855e0705",
            "fa9ca8e23ab06e77",
            "f108471d38ab4972",
            "66e23a95fe5b8841",
            "2125413a4c695f53",
            "cdf3af48012d0cce",
            "af653da5b3fe84ba",
            "6d0a4a44f52e279d",
            "560e0aab5d461d7d",
            "77ec514aabf38f2f",
            "c504f704e1b09183",
            "9a05d84989777b4a",
            "6bf5fea37e67cb68",
            "31c59739dcb978a2",
            "f98c960aad2f8882",
            "79c2dbc5ca532218",
            "bc290418bf9f0358",
            "ae496037bab5f0e8",
            "8fd16214e1c201da",
            "869024716b63220b",
            "1cf4ab431fdd7ed1",
            "e618aa5b6519afd3",
            "883af1ef0c25764e",
            "3cb55a743013c695",
            "921375c64483d73b",
            "6c797d289b3fc678",
            "042cf9921dd0fa1f",
            "3a0814221ddd898a",
            "8db723e502dce30d",
            "78b86276613867de",
            "1ceffe7fa8cd5ccb",
            "9774fcb4d083f5ad",
            "0b7d98e58437e6ce",
            "d8741e5fde41acfc",
            "3233b99f53ad6de1",
            "329f0130e21ad76f",
            "668ea44d3c91d90b",
            "fb11710556b074f5",
            "954526088cadcbe3",
            "40cc0f305b9d2336",
            "0cd73f3a51d670af",
            "fa7bb0d98f3545ce",
            "16c1ecfd2856714c",
            "e0dadeb10b4bc807",
            "32d5b5ed10ac5521",
            "c9ef158d4ba7ece1",
            "47af50d69cab6b9e",
            "4583e1764ff118a9",
            "cd8d5e63824cfb1c",
            "07eaf81cea8bbec7",
            "57a400967e8e6b9a",
            "fd31273f5af58b45",
            "5c0e2487f0d8a601",
            "99d6ea8250d05527",
            "a8b329b583d07c8b",
            "e223b4fd7c2e764a",
            "3a77e46f57d47392",
            "44103d33ea6565e7",
            "b3d31c3c848f8ee8",
            "e77ee729ce554d0a",
            "eafbc3303d5fa264",
            "f71ae707bab56116",
            "88c12b9f978ceae4",
            "2f4e7f77c4ce3ee6",
            "5283d799e6272f63",
            "c2fd23ac0a896078",
            "4283bf12d98e63f0",
            "b053668bef248bed",
            "d667fa193322e6ad",
            "ea067f848a29d43b",
            "ce352505a974ee4b",
            "ae44b60f50683fd8",
            "9ba06a36a5669d1c",
            "9112ceb24c1119c8",
            "bf21045cb2dff805",
            "6ad3908f4b010b32",
            "8104b9fc57535414",
            "a3b016961b1df97c",
            "4093b7f29738ca3f",
            "31dc689facc14954",
            "93bb881adc60e957",
            "dda06b823b7ab762",
            "486e40a1485746be",
            "8d79dbe55dfc5a0b",
            "2de31e8e1e6aac8b",
            "c8cc3ee86e5187cd",
            "a04cb6e87c7054ac",
            "e5b41ac2fb71d271",
            "edb2a785961eb2c0",
            "1ab1d020c06afa02",
            "9504b948721a99e7",
            "507d45aa6d91f113",
            "0a9351608454010e",
            "d03d2af634fc4ccb",
            "6be302315cf6524b",
            "debae1d85e27e699",
            "e3fdded41bebc040",
            "42bfe820bfa15232",
            "9b060f3f6379c8d6",
            "22eac5ae25c93a92",
            "cecd88a0034ee6c1",
            "ec98528178f0a7db",
            "d6c350b615b2a5d6",
            "fb2b4a077bc76b90",
            "83691f754f1e4833",
            "76b5e6e0c39ea321",
            "9a2f2745404abac9",
            "d6dbd0e4c6885c63",
            "33b2e6f223a5928e",
            "91e5460481a843b1",
            "b073480e3755e440",
            "a0172396036ab6cc",
            "8a3cb4afa285c26e",
            "dc54bd344d45a44a",
            "81f3fd444e3bdc34",
            "007998f5d5d5157b",
            "24966fa4882dd7c8",
            "677f08bba014fc5a",
            "f94c8ba2c2277837",
            "b84e668ff8e8b0a2",
            "e9bfc9becb7e410b",
            "a25d038e3e63080c",
            "604346c12162a04d",
            "aef926f6986ce885",
            "94ff7bae48926430",
            "ab3749871b18ebc5",
            "5fdaf7838a42044a",
            "bba9403f4412f978",
            "d8760d2ba8091908",
            "d3d470edcad49de6",
            "3724fa0e0d423e7a",
            "480da7223997bfc7",
            "85d9b6d566b142cd",
            "57cf8d8987e4ae81",
            "978814b92f0b3551",
            "19a45a11b1e76733",
            "6ee63b3013918359",
            "1891428ac269ed8f",
            "7258d9a644c3029d",
            "338bf9bc8f82a1ab",
            "e20917abd4154796",
            "a18d5c721938616b",
            "6453419bc39835ed",
            "e0598ee5cddfa31a",
            "4841b53dde7785e3",
            "10d7ba5ad33f33b5",
            "fad071aacdb2e280",
            "f5ae42272ab8bea6",
            "9d3a89e3d860317e",
            "99bbee840f5ec1cd",
            "2c7283a3bc57cff9",
            "548eea90d1b08bb4",
            "37fc45fefb4702c4"
        ],
        "x": 240,
        "y": 960,
        "wires": [
            [
                "5dd8099fdf62fc26",
                "fbdb6ce4e11a83c5",
                "b349c037851ab9e5"
            ]
        ],
        "l": true
    },
    {
        "id": "e9576c54efe7d88d",
        "type": "change",
        "z": "f409e00b8acde5e1",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 880,
        "wires": [
            [
                "d667fa193322e6ad"
            ]
        ]
    },
    {
        "id": "0ee512fb0c9d5346",
        "type": "rollun-openapi-in",
        "z": "f409e00b8acde5e1",
        "name": "service",
        "schema": "72bec069c933c2ad",
        "operation": "post /eventHandler",
        "x": 220,
        "y": 40,
        "wires": [
            [
                "0382d331b95435f9",
                "ba87bafd021fbfd4"
            ]
        ]
    },
    {
        "id": "ba87bafd021fbfd4",
        "type": "debug",
        "z": "f409e00b8acde5e1",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 40,
        "wires": []
    },
    {
        "id": "fbdb6ce4e11a83c5",
        "type": "rollun-openapi-out",
        "z": "f409e00b8acde5e1",
        "name": "",
        "data": "msg|payload.data",
        "messages": "msg|payload.messages",
        "statusCode": "msg|payload.code",
        "disableGenerationOfExceptionMessage": false,
        "x": 680,
        "y": 960,
        "wires": []
    },
    {
        "id": "5dd8099fdf62fc26",
        "type": "debug",
        "z": "f409e00b8acde5e1",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 1000,
        "wires": []
    },
    {
        "id": "8eae2de569740c26",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "system?",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "scenario_request",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 320,
        "y": 160,
        "wires": [
            [
                "bb6240f1dd40d81c"
            ],
            [
                "8c8ec47cd381736c"
            ]
        ]
    },
    {
        "id": "39a2de5896a98e8d",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "deal",
        "property": "crm.output.entity.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "deal",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 270,
        "y": 120,
        "wires": [
            [
                "8eae2de569740c26"
            ],
            [
                "1dc27dbff2506710"
            ]
        ]
    },
    {
        "id": "bb6240f1dd40d81c",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "system",
        "mode": "link",
        "links": [
            "a7fa691acc60e326"
        ],
        "x": 580,
        "y": 140,
        "wires": [],
        "l": true,
        "info": "main bag"
    },
    {
        "id": "2986636b43ae4fe3",
        "type": "change",
        "z": "f409e00b8acde5e1",
        "name": "set error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Entity type `\"&crm.output.entity.type&\"` is not found\"       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 920,
        "wires": [
            [
                "ea067f848a29d43b"
            ]
        ]
    },
    {
        "id": "6321f920855bea4e",
        "type": "change",
        "z": "f409e00b8acde5e1",
        "name": "set error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Entity name `\"&crm.output.entity.name&\"` is not found\"       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 760,
        "wires": [
            [
                "b053668bef248bed"
            ]
        ]
    },
    {
        "id": "2d040c83d579dd19",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "return",
        "property": "crm.output.entity.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "returns",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 440,
        "wires": [
            [
                "834c8a076715c6cc"
            ],
            [
                "18380da352016d08"
            ]
        ],
        "outputLabels": [
            "order",
            ""
        ]
    },
    {
        "id": "18380da352016d08",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "return dropship",
        "property": "crm.output.entity.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "return_dropships",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 380,
        "y": 480,
        "wires": [
            [
                "fd43e94179d44d1e"
            ],
            [
                "8ce6a354df330ec7"
            ]
        ],
        "outputLabels": [
            "dropship",
            ""
        ]
    },
    {
        "id": "8ce6a354df330ec7",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "return pickup",
        "property": "crm.output.entity.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "return_pickups",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 520,
        "wires": [
            [
                "97a75d4db4c3f803"
            ],
            [
                "294a2c61c056c1ef"
            ]
        ],
        "outputLabels": [
            "dropship",
            ""
        ]
    },
    {
        "id": "294a2c61c056c1ef",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "return bag",
        "property": "crm.output.entity.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "return_bags",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 560,
        "wires": [
            [
                "582ad6cc98c62c30"
            ],
            [
                "27fec7db22961372"
            ]
        ],
        "outputLabels": [
            "bag",
            ""
        ]
    },
    {
        "id": "834c8a076715c6cc",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "r",
        "mode": "link",
        "links": [
            "5a5893f74d23b179"
        ],
        "x": 570,
        "y": 420,
        "wires": [],
        "l": true,
        "info": "main bag"
    },
    {
        "id": "fd43e94179d44d1e",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "rd",
        "mode": "link",
        "links": [
            "44226f3891bee974"
        ],
        "x": 570,
        "y": 460,
        "wires": [],
        "l": true,
        "info": "main bag"
    },
    {
        "id": "97a75d4db4c3f803",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "rp",
        "mode": "link",
        "links": [
            "65c0ea732a2550ac"
        ],
        "x": 570,
        "y": 500,
        "wires": [],
        "l": true,
        "info": "main bag"
    },
    {
        "id": "582ad6cc98c62c30",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "rb",
        "mode": "link",
        "links": [
            "51a9434e4af08f51"
        ],
        "x": 570,
        "y": 540,
        "wires": [],
        "l": true,
        "info": "main bag"
    },
    {
        "id": "27fec7db22961372",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "problem",
        "property": "crm.output.entity.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "problems",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 360,
        "y": 600,
        "wires": [
            [
                "7778c9322acbe9e0"
            ],
            [
                "568f64fbee6f3bd9"
            ]
        ],
        "outputLabels": [
            "bag",
            ""
        ]
    },
    {
        "id": "568f64fbee6f3bd9",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "fba",
        "property": "crm.output.entity.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "fba",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 640,
        "wires": [
            [
                "7778c9322acbe9e0"
            ],
            [
                "b232bc82f882b3e6"
            ]
        ]
    },
    {
        "id": "7778c9322acbe9e0",
        "type": "change",
        "z": "f409e00b8acde5e1",
        "name": "set success",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 720,
        "wires": [
            [
                "4283bf12d98e63f0"
            ]
        ]
    },
    {
        "id": "4283bf12d98e63f0",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 580,
        "y": 720,
        "wires": [],
        "l": true
    },
    {
        "id": "b053668bef248bed",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 580,
        "y": 760,
        "wires": [],
        "l": true
    },
    {
        "id": "d667fa193322e6ad",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 580,
        "y": 880,
        "wires": [],
        "l": true
    },
    {
        "id": "ea067f848a29d43b",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 580,
        "y": 920,
        "wires": [],
        "l": true
    },
    {
        "id": "8c8ec47cd381736c",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "button?",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "button",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 320,
        "y": 200,
        "wires": [
            [
                "484e23b5d8c737e7"
            ],
            [
                "6304341fd7ca3b3a"
            ]
        ]
    },
    {
        "id": "484e23b5d8c737e7",
        "type": "link out",
        "z": "f409e00b8acde5e1",
        "name": "button",
        "mode": "link",
        "links": [
            "b3caec21cbdb2ae9"
        ],
        "x": 570,
        "y": 180,
        "wires": [],
        "l": true,
        "info": "main bag"
    },
    {
        "id": "862a0c3b6cc60127",
        "type": "elastic-logger",
        "z": "f409e00b8acde5e1",
        "name": "",
        "config": "2e26026f.b353be",
        "level": "debug",
        "messageField": "const|Set info from rollun-crm",
        "contextField": "msg|crm.output",
        "x": 640,
        "y": 80,
        "wires": []
    },
    {
        "id": "b349c037851ab9e5",
        "type": "elastic-logger",
        "z": "f409e00b8acde5e1",
        "name": "",
        "config": "2e26026f.b353be",
        "level": "debug",
        "messageField": "const|Set info to rollun-crm",
        "contextField": "msg|payload",
        "x": 640,
        "y": 1040,
        "wires": []
    },
    {
        "id": "b232bc82f882b3e6",
        "type": "switch",
        "z": "f409e00b8acde5e1",
        "name": "fba orders",
        "property": "crm.output.entity.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "fba_orders",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 360,
        "y": 680,
        "wires": [
            [
                "7778c9322acbe9e0"
            ],
            [
                "6321f920855bea4e"
            ]
        ],
        "outputLabels": [
            "bag",
            ""
        ]
    },
    {
        "id": "7521b2f710c8082b",
        "type": "catch",
        "z": "98ca48f3d4300469",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 1480,
        "y": 40,
        "wires": [
            [
                "a27ecfb4c9ddce86"
            ]
        ]
    },
    {
        "id": "a27ecfb4c9ddce86",
        "type": "debug",
        "z": "98ca48f3d4300469",
        "name": "debug Catch nodes",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1530,
        "y": 80,
        "wires": []
    },
    {
        "id": "a7fa691acc60e326",
        "type": "link in",
        "z": "98ca48f3d4300469",
        "name": "system",
        "links": [
            "bb6240f1dd40d81c"
        ],
        "x": 170,
        "y": 40,
        "wires": [
            [
                "4b9f042dbf06dbcd",
                "37c6f82040a40562"
            ]
        ],
        "l": true,
        "info": "from sorting"
    },
    {
        "id": "4b9f042dbf06dbcd",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "1",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 80,
        "wires": [
            [
                "62f2ce2849c0aca7"
            ],
            [
                "6d93a63d7aeeed23"
            ]
        ]
    },
    {
        "id": "aa0faa0cd9baac82",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "order shipped",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"update\",\t                       \"context\":{\t                           \"ArchiveScenario\":\"shipped\"                                       \t                       },\t                       \"delay\":0                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 80,
        "wires": [
            [
                "c9ef158d4ba7ece1"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "6d93a63d7aeeed23",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "2",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 160,
        "wires": [
            [
                "1f06dedae45dc130"
            ],
            [
                "c52d71c76a83bebc"
            ]
        ]
    },
    {
        "id": "1f06dedae45dc130",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "is parcel shipped?",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": " {\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/TrackNumberCheckOrder\"\t                       },\t               \"delay\": 60       \t           },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               }   \t       }   \t   ],\t   \"code\": \"200\" \t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 160,
        "wires": [
            [
                "40cc0f305b9d2336"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "c52d71c76a83bebc",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "3",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 200,
        "wires": [
            [
                "4348beb57ed29d1b"
            ],
            [
                "bb9dcdbeb2c4ff5c"
            ]
        ]
    },
    {
        "id": "ede4ee0f864b5b59",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "autohowtobuy 3",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"remote_request\",\t               \"context\": {\t                   \"headers\": {},\t                   \"body\": crm.output.entity.row,\t                   \"url\": \"https://crm-callbacks.rollun.net/autohowtobuy3\",\t                   \"method\": \"POST\" \t               },\t               \"delay\": 0       \t           \t                   \t           },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   \t           }   \t       \t               \t       }   \t   \t           \t   ],\t   \"code\": \"200\" \t\t       \t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 200,
        "wires": [
            [
                "042cf9921dd0fa1f"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "bb9dcdbeb2c4ff5c",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "4",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "4",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 280,
        "wires": [
            [
                "1adf530a110bc09d"
            ],
            [
                "f7dc6eafc455a172"
            ]
        ]
    },
    {
        "id": "1adf530a110bc09d",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "linked deal autocreation",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/HowToBuy4Webhook\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 280,
        "wires": [
            [
                "3a0814221ddd898a"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "f7dc6eafc455a172",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "5",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "5",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 320,
        "wires": [
            [
                "e86df8881b65c62d"
            ],
            [
                "1f0a0640f9c1df41"
            ]
        ]
    },
    {
        "id": "e86df8881b65c62d",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "cogs filling",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/UpdateOrderCogsWebhook\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 320,
        "wires": [
            [
                "668ea44d3c91d90b"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "1f0a0640f9c1df41",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "6",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "6",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 360,
        "wires": [
            [
                "c7096a3356d06a05"
            ],
            [
                "7408ce3345f34514"
            ]
        ]
    },
    {
        "id": "c7096a3356d06a05",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "date label creation from carrier",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\":\"update\",\t               \"context\":{\t                   \"DateLabelCreation\":$toMillis($now())~>$fromMillis(\"[Y0001]-[M01]-[D01] [H01]:[m01]:[s01]\")\t                   \t               },\t               \"delay\": 0       \t           \t                   \t           },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   \t           }   \t       \t               \t       }   \t   \t           \t   ],\t   \"code\": \"200\" \t\t       \t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 360,
        "wires": [
            [
                "fd31273f5af58b45"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "7408ce3345f34514",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "7",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "7",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 400,
        "wires": [
            [
                "0493222ee7ad9a39"
            ],
            [
                "0f146a8d7ea8faaa"
            ]
        ]
    },
    {
        "id": "0493222ee7ad9a39",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "check linked order deal",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/CheckLinkedDeal\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 400,
        "wires": [
            [
                "3233b99f53ad6de1"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "0f146a8d7ea8faaa",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "8",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "8",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 440,
        "wires": [
            [
                "3358ea77343a62bd"
            ],
            [
                "9ee747a1edfbe102"
            ]
        ]
    },
    {
        "id": "a59c3590795612e5",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "autobuy TR, AU, PU",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/AutoBuy\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 440,
        "wires": [
            [
                "e77ee729ce554d0a"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "9ee747a1edfbe102",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "9",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "9",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 520,
        "wires": [
            [
                "366b72a9de852826"
            ],
            [
                "1c4e2d5e343a018b"
            ]
        ]
    },
    {
        "id": "d9e97f75252c3620",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "AU, TR, PU get tracknumber",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/OrderStatus\"\t                       \t               },\t               \"delay\": 0       \t           \t                   \t           },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   \t           }   \t       \t               \t       }   \t   \t           \t   ],\t   \"code\": \"200\" \t\t       \t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 520,
        "wires": [
            [
                "cd8d5e63824cfb1c"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "1c4e2d5e343a018b",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "10",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "10",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 600,
        "wires": [
            [
                "6766660c01305b3a"
            ],
            [
                "8f3889132b052d86"
            ]
        ]
    },
    {
        "id": "ba405346ad8e44a1",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "TR get prices and tracknumbers",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/OrderStatus\"\t               },\t               \"delay\": 0       \t           \t                   \t           \t           },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   \t           \t           }   \t       \t               \t       \t       }   \t   \t           \t   \t   ],\t   \"code\": \"200\" \t\t       \t\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 600,
        "wires": [
            [
                "5c0e2487f0d8a601"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "8f3889132b052d86",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "11",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "11",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 680,
        "wires": [
            [
                "ea186517a07a65a4"
            ],
            [
                "d4d190c3fdbbc6ca"
            ]
        ]
    },
    {
        "id": "644973d485b0cd84",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "tracknumber into mp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"megaplan_request\",\t                       \"context\": {\t                           \"url\": \"http://megaplan-crm/api/webhook/TrackNumberToMarketplace\"               \t                       },\t                       \"delay\": 0       \t           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t           \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 680,
        "wires": [
            [
                "fb11710556b074f5"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "d4d190c3fdbbc6ca",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "12",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "12",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 760,
        "wires": [
            [
                "3ba26bb7aa8b9131"
            ],
            [
                "4a08a8289282d610"
            ]
        ]
    },
    {
        "id": "3ba26bb7aa8b9131",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "tracknumber into mp - check",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/TrackNumberToMegaplan\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 760,
        "wires": [
            [
                "954526088cadcbe3"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "4a08a8289282d610",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "13",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "13",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 800,
        "wires": [
            [
                "7474803ab1491463"
            ],
            [
                "7a8e3e87a445a2b9"
            ]
        ]
    },
    {
        "id": "d08538a544367cb4",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "tracknumber tracking",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/TracknumberShipStatus\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 800,
        "wires": [
            [
                "0cd73f3a51d670af"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "62f2ce2849c0aca7",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.StatusName=\"60 day test\"",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 80,
        "wires": [
            [
                "aa0faa0cd9baac82"
            ],
            [
                "9938dc883611862d"
            ]
        ]
    },
    {
        "id": "4348beb57ed29d1b",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "crm.output.entity.row.(\t   HowToBuy4=null\t   and\t   HowToBuy3Result=null\t   and\t   TracknumbersInMp=null\t)",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 200,
        "wires": [
            [
                "ede4ee0f864b5b59"
            ],
            [
                "7244cbfa06d57e6d"
            ]
        ]
    },
    {
        "id": "3358ea77343a62bd",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t   StatusName=\"Purchase\"\t       and\t       ProblemDescription=\"-\"\t)",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 440,
        "wires": [
            [
                "a59c3590795612e5"
            ],
            [
                "ad1d9fd3548605c9"
            ]
        ]
    },
    {
        "id": "6766660c01305b3a",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t   SrOrderStatus!=\"Completed\" \t    and\t    SrOrderStatus!=\"Tracknumber received\" \t    and\t    SrOrderStatus!=\"Picked Up\"\t    and\t    ProblemDescription=\"-\"\t    and\t    SrName=\"TuckerRocky\"\t)",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 600,
        "wires": [
            [
                "ba405346ad8e44a1"
            ],
            [
                "8eed4eb71cced164"
            ]
        ]
    },
    {
        "id": "ea186517a07a65a4",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t   ProblemDescription= \"-\" \t   and \t   DateEnteringTracknumberIntoMp=null\t)",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 680,
        "wires": [
            [
                "644973d485b0cd84"
            ],
            [
                "66d661d8263ac56f"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "7a8e3e87a445a2b9",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "14",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "14",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 880,
        "wires": [
            [
                "18dbc8902f94f130"
            ],
            [
                "01264b9834bfe1aa"
            ]
        ]
    },
    {
        "id": "3e874dbad2361004",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "delivered",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\":\"update\",\t               \"context\":{\t                   \"ArchiveScenario\":\"delivered\"\t                   },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 880,
        "wires": [
            [
                "fa7bb0d98f3545ce"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "18dbc8902f94f130",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(ShipStatus = \"delivered\"\tand\tStatusName = \"Tracking\")",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 880,
        "wires": [
            [
                "3e874dbad2361004"
            ],
            [
                "7e0a9e6c1b61b0e9"
            ]
        ]
    },
    {
        "id": "975a18614c5fa6ba",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "16",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "16",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1000,
        "wires": [
            [
                "8f6ebb022042afe2"
            ],
            [
                "4f9b43927b0ecbfb"
            ]
        ]
    },
    {
        "id": "8f6ebb022042afe2",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "dimensions",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/DealDimension\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }\t",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 1000,
        "wires": [
            [
                "329f0130e21ad76f"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "79c2dbc5ca532218",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 1560,
        "y": 160,
        "wires": [],
        "l": true
    },
    {
        "id": "74323c46fc334028",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Scenario id `\"&crm.output.entity.type&\"` is not found\"       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 120,
        "wires": [
            [
                "79c2dbc5ca532218"
            ]
        ]
    },
    {
        "id": "b590699b0aaabcaf",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "TR, PU autobuy",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/AutoBuy\"\t                       \t               },\t               \"delay\": 0       \t           \t                   \t           },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   \t           }   \t       \t               \t       }   \t   \t           \t   ],\t   \"code\": \"200\" \t\t       \t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1280,
        "wires": [
            [
                "5283d799e6272f63"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "58dd1e1875d38461",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "Return app add info",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/AddReturnInfo\"\t                       },\t               \"delay\": 0              \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 960,
        "wires": [
            [
                "338bf9bc8f82a1ab"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "e1023ff6a82421d3",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "create_rof_reserve",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/CreateReserve\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 1120,
        "wires": [
            [
                "16c1ecfd2856714c"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "03982a985bf433ce",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "delete_rof_reserve_and_subtract",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/DeleteReserveAndSubtract\"\t                       \t               },\t               \"delay\": 0       \t           \t                   \t           },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   \t           }   \t       \t               \t       }   \t   \t           \t   ],\t   \"code\": \"200\" \t\t       \t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 1200,
        "wires": [
            [
                "e0dadeb10b4bc807"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "070d7f88521a99c4",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "RM autobuy",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/PickUpAutoBuyRm\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 1320,
        "wires": [
            [
                "b073480e3755e440"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "8c39375164c4b02c",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "Amazon create labels by bag",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/AmazonLabelCreationWebhook\"               \t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 1360,
        "wires": [
            [
                "f71ae707bab56116"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "bc587e26eabbca45",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "Amazon get labels by bag",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/SendBagLabels\"               \t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 1400,
        "wires": [
            [
                "91e5460481a843b1"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "42339712359e9c45",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "products to bag",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/AddProductsToBag\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1480,
        "wires": [
            [
                "07eaf81cea8bbec7"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "bfdb6724958e8702",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "price to pickup",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/AddPriceToPickup\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1440,
        "wires": [
            [
                "57a400967e8e6b9a"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "37c6f82040a40562",
        "type": "debug",
        "z": "98ca48f3d4300469",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 330,
        "y": 40,
        "wires": []
    },
    {
        "id": "042cf9921dd0fa1f",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 220,
        "wires": [],
        "l": true
    },
    {
        "id": "3a0814221ddd898a",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 280,
        "wires": [],
        "l": true
    },
    {
        "id": "3233b99f53ad6de1",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 400,
        "wires": [],
        "l": true
    },
    {
        "id": "329f0130e21ad76f",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1000,
        "wires": [],
        "l": true
    },
    {
        "id": "01264b9834bfe1aa",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "15",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "15",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 960,
        "wires": [
            [
                "58dd1e1875d38461"
            ],
            [
                "975a18614c5fa6ba"
            ]
        ]
    },
    {
        "id": "91fe7ead0e920c64",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "18",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "18",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1120,
        "wires": [
            [
                "90f46f7f814cef6f"
            ],
            [
                "7244cb87e533fbe0"
            ]
        ]
    },
    {
        "id": "7244cb87e533fbe0",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "19",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "19",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1200,
        "wires": [
            [
                "0c28a1e312371164"
            ],
            [
                "4bd23a0bd26e7af8"
            ]
        ]
    },
    {
        "id": "4f9b43927b0ecbfb",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "17",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "17",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1040,
        "wires": [
            [
                "e73dd8df7d6ef236"
            ],
            [
                "91fe7ead0e920c64"
            ]
        ]
    },
    {
        "id": "668ea44d3c91d90b",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 320,
        "wires": [],
        "l": true
    },
    {
        "id": "fb11710556b074f5",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 700,
        "wires": [],
        "l": true
    },
    {
        "id": "954526088cadcbe3",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 760,
        "wires": [],
        "l": true
    },
    {
        "id": "40cc0f305b9d2336",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 160,
        "wires": [],
        "l": true
    },
    {
        "id": "0cd73f3a51d670af",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 820,
        "wires": [],
        "l": true
    },
    {
        "id": "fa7bb0d98f3545ce",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 900,
        "wires": [],
        "l": true
    },
    {
        "id": "16c1ecfd2856714c",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1140,
        "wires": [],
        "l": true
    },
    {
        "id": "e0dadeb10b4bc807",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1220,
        "wires": [],
        "l": true
    },
    {
        "id": "90f46f7f814cef6f",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t    SrName = \"RollunOffice\"\tand\tProblemDescription = \"-\"\tand \tSender!=null)",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1120,
        "wires": [
            [
                "e1023ff6a82421d3"
            ],
            [
                "9a6913142fdd0f14"
            ]
        ]
    },
    {
        "id": "0c28a1e312371164",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t    StatusName = \"Tracking\"\tor\tStatusName = \"Archive\"\tor \tStatusName = \"Packaging and sending\")",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1200,
        "wires": [
            [
                "03982a985bf433ce"
            ],
            [
                "c9fc4b5783ed115d"
            ]
        ]
    },
    {
        "id": "4bd23a0bd26e7af8",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "20",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "20",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1280,
        "wires": [
            [
                "b590699b0aaabcaf"
            ],
            [
                "68942c6260776ecd"
            ]
        ]
    },
    {
        "id": "68942c6260776ecd",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "21",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "21",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1320,
        "wires": [
            [
                "070d7f88521a99c4"
            ],
            [
                "18445f1c37541f80"
            ]
        ]
    },
    {
        "id": "18445f1c37541f80",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "22",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "22",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1360,
        "wires": [
            [
                "8c39375164c4b02c"
            ],
            [
                "829ba0b8a4325bd9"
            ]
        ]
    },
    {
        "id": "829ba0b8a4325bd9",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "23",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "23",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1400,
        "wires": [
            [
                "bc587e26eabbca45"
            ],
            [
                "966b442e56cb6829"
            ]
        ]
    },
    {
        "id": "966b442e56cb6829",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "24",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "24",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1440,
        "wires": [
            [
                "bfdb6724958e8702"
            ],
            [
                "0eba4bd358dfec65"
            ]
        ]
    },
    {
        "id": "0eba4bd358dfec65",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "25",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "25",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1480,
        "wires": [
            [
                "69829d60680be585"
            ],
            [
                "1676bbede61249dd"
            ]
        ]
    },
    {
        "id": "66d661d8263ac56f",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 720,
        "wires": [
            [
                "fb11710556b074f5"
            ]
        ]
    },
    {
        "id": "7e0a9e6c1b61b0e9",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 920,
        "wires": [
            [
                "fa7bb0d98f3545ce"
            ]
        ]
    },
    {
        "id": "9a6913142fdd0f14",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1160,
        "wires": [
            [
                "16c1ecfd2856714c"
            ]
        ]
    },
    {
        "id": "c9fc4b5783ed115d",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1240,
        "wires": [
            [
                "e0dadeb10b4bc807"
            ]
        ]
    },
    {
        "id": "7244cbfa06d57e6d",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 240,
        "wires": [
            [
                "042cf9921dd0fa1f"
            ]
        ]
    },
    {
        "id": "c9ef158d4ba7ece1",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 100,
        "wires": [],
        "l": true
    },
    {
        "id": "9938dc883611862d",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 120,
        "wires": [
            [
                "c9ef158d4ba7ece1"
            ]
        ]
    },
    {
        "id": "cd8d5e63824cfb1c",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 540,
        "wires": [],
        "l": true
    },
    {
        "id": "07eaf81cea8bbec7",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1500,
        "wires": [],
        "l": true
    },
    {
        "id": "57a400967e8e6b9a",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1440,
        "wires": [],
        "l": true
    },
    {
        "id": "69829d60680be585",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.FinalPrice = \"0.00\"\tor\tcrm.output.entity.row.FinalPrice = null\tor\tcrm.output.entity.row.FinalPrice = \"0\"",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1480,
        "wires": [
            [
                "42339712359e9c45"
            ],
            [
                "4f2deb0c071a6ee3"
            ]
        ]
    },
    {
        "id": "4f2deb0c071a6ee3",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1520,
        "wires": [
            [
                "07eaf81cea8bbec7"
            ]
        ]
    },
    {
        "id": "fd31273f5af58b45",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 360,
        "wires": [],
        "l": true
    },
    {
        "id": "5c0e2487f0d8a601",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 620,
        "wires": [],
        "l": true
    },
    {
        "id": "e77ee729ce554d0a",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 460,
        "wires": [],
        "l": true
    },
    {
        "id": "ad1d9fd3548605c9",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 480,
        "wires": [
            [
                "e77ee729ce554d0a"
            ]
        ]
    },
    {
        "id": "366b72a9de852826",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t   (\t       Tracknumber=\"-\"\t   or\t   Tracknumber=null\t   )\t       and\t       ProblemDescription=\"-\"\t)",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 520,
        "wires": [
            [
                "d9e97f75252c3620"
            ],
            [
                "776006d914d0f84b"
            ]
        ]
    },
    {
        "id": "776006d914d0f84b",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 560,
        "wires": [
            [
                "cd8d5e63824cfb1c"
            ]
        ]
    },
    {
        "id": "8eed4eb71cced164",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 640,
        "wires": [
            [
                "5c0e2487f0d8a601"
            ]
        ]
    },
    {
        "id": "f71ae707bab56116",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1360,
        "wires": [],
        "l": true
    },
    {
        "id": "5283d799e6272f63",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1280,
        "wires": [],
        "l": true
    },
    {
        "id": "8d8d9005cfa43342",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "return deal creation",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/CreateReturnPackage\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 1560,
        "wires": [
            [
                "bf21045cb2dff805"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "1676bbede61249dd",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "26",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "26",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1560,
        "wires": [
            [
                "46d09cbeb3109c52"
            ],
            [
                "e96a71626e810916"
            ]
        ]
    },
    {
        "id": "46d09cbeb3109c52",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t   (\t       StatusName=\"Deciding how to receive\"\t        and\t        ProblemDescription=\"-\"\t    )\t    or\t    (\t       StatusName=\"Waiting for receiving\"\t        and\t        ProblemDescription=\"-\"\t    )\t)",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1560,
        "wires": [
            [
                "8d8d9005cfa43342"
            ],
            [
                "c89ea9dfe95148f0"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "922f64e37eaf31fc",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "item not shipped",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"was_not_shipped\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               },\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"DealStatus\": \"closed\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }    \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1640,
        "wires": [
            [
                "6ad3908f4b010b32"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "e96a71626e810916",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "27",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "27",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1640,
        "wires": [
            [
                "0df7bd8fa34c6801"
            ],
            [
                "7c5eccc85a734b96"
            ]
        ]
    },
    {
        "id": "0df7bd8fa34c6801",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t       StatusName=\"Waiting for receiving\"\t        and\t        ReturnCondition=null\t    )",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1640,
        "wires": [
            [
                "922f64e37eaf31fc"
            ],
            [
                "4001798b42e3a564"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "7c5eccc85a734b96",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "28",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "28",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1720,
        "wires": [
            [
                "80b85babf9272733"
            ],
            [
                "ab8f69f160e4a81d"
            ]
        ]
    },
    {
        "id": "ab8f69f160e4a81d",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "29",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "29",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1760,
        "wires": [
            [
                "dcd0d82dcbc7df60"
            ],
            [
                "1fdcd216780ce307"
            ]
        ]
    },
    {
        "id": "c89ea9dfe95148f0",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1600,
        "wires": [
            [
                "bf21045cb2dff805"
            ]
        ]
    },
    {
        "id": "4001798b42e3a564",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1680,
        "wires": [
            [
                "6ad3908f4b010b32"
            ]
        ]
    },
    {
        "id": "bf21045cb2dff805",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1580,
        "wires": [],
        "l": true
    },
    {
        "id": "6ad3908f4b010b32",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1660,
        "wires": [],
        "l": true
    },
    {
        "id": "1fdcd216780ce307",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "31",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "31",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1800,
        "wires": [
            [
                "862798bbf1d9ad7c"
            ],
            [
                "dcbdafcfb6f0b5bc"
            ]
        ]
    },
    {
        "id": "dcbdafcfb6f0b5bc",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "32",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "32",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1880,
        "wires": [
            [
                "85f8a219cb5fcde5"
            ],
            [
                "33d067b05892c313"
            ]
        ]
    },
    {
        "id": "33d067b05892c313",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "33",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "33",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1960,
        "wires": [
            [
                "22c18b69053388b0"
            ],
            [
                "fb0140ad3ebacb8d"
            ]
        ]
    },
    {
        "id": "fb0140ad3ebacb8d",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "34",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "34",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2040,
        "wires": [
            [
                "da5650b4d7645594"
            ],
            [
                "c10175466036e17d"
            ]
        ]
    },
    {
        "id": "da5650b4d7645594",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t        Carrier!=null\t        and  \t        Tracknumber!=null\t        and \t        ProblemDescription=\"-\"\t    )",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2040,
        "wires": [
            [
                "a8d19978bdf38f54"
            ],
            [
                "b5eeb229d4715890"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "a8d19978bdf38f54",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "get tracknumber status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/TracknumberShipStatus\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 2040,
        "wires": [
            [
                "31dc689facc14954"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "b5eeb229d4715890",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2080,
        "wires": [
            [
                "31dc689facc14954"
            ]
        ]
    },
    {
        "id": "31dc689facc14954",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 2060,
        "wires": [],
        "l": true
    },
    {
        "id": "d6dbd0e4c6885c63",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 3320,
        "wires": [],
        "l": true
    },
    {
        "id": "8f1fac91e2662c2a",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Scenario_id `\"&crm.output.action.context.scenario_id&\"` is not found\"       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 3320,
        "wires": [
            [
                "d6dbd0e4c6885c63"
            ]
        ]
    },
    {
        "id": "550ef90a071012e2",
        "type": "catch",
        "z": "98ca48f3d4300469",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 1100,
        "y": 40,
        "wires": [
            [
                "555d71043fbddb5d"
            ]
        ]
    },
    {
        "id": "555d71043fbddb5d",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set error ",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "$substringAfter(\t   error.message,\t   \"Invalid JSONata expression: \"\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "alert",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.source",
                "pt": "msg",
                "to": "error.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "log.context.flow",
                "pt": "msg",
                "to": "src",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 80,
        "wires": [
            [
                "cd8d18ff6c7a4f28",
                "624eb2dbbaa72ced"
            ]
        ]
    },
    {
        "id": "cd8d18ff6c7a4f28",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "log",
        "mode": "link",
        "links": [
            "4b768188.85ab9"
        ],
        "x": 1070,
        "y": 120,
        "wires": [],
        "icon": "node-red/file-in.svg",
        "l": true
    },
    {
        "id": "624eb2dbbaa72ced",
        "type": "debug",
        "z": "98ca48f3d4300469",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1240,
        "y": 80,
        "wires": []
    },
    {
        "id": "91e5460481a843b1",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1400,
        "wires": [],
        "l": true
    },
    {
        "id": "b073480e3755e440",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1320,
        "wires": [],
        "l": true
    },
    {
        "id": "c10175466036e17d",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "35",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "35",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2120,
        "wires": [
            [
                "0b1ce9d09349d376"
            ],
            [
                "7ad8cbb4243f9b54"
            ]
        ]
    },
    {
        "id": "0b1ce9d09349d376",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.StatusName=\"Waiting for receiving\"",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2120,
        "wires": [
            [
                "41605c1113a4f935"
            ],
            [
                "c5fff8e25c5d40f4"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "41605c1113a4f935",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "new correct item",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"new_correct_item\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2120,
        "wires": [
            [
                "aef926f6986ce885"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "c5fff8e25c5d40f4",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2160,
        "wires": [
            [
                "aef926f6986ce885"
            ]
        ]
    },
    {
        "id": "7ad8cbb4243f9b54",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "36",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "36",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2200,
        "wires": [
            [
                "7b776fde24196fe0"
            ],
            [
                "a461fd71caf7cb2a"
            ]
        ]
    },
    {
        "id": "7b776fde24196fe0",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.StatusName=\"Waiting for receiving\"",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2200,
        "wires": [
            [
                "9836dea1c9c02010"
            ],
            [
                "704466487523049f"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "9836dea1c9c02010",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "new incorrect item",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"new_incorrect_item\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 2200,
        "wires": [
            [
                "94ff7bae48926430"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "704466487523049f",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2240,
        "wires": [
            [
                "94ff7bae48926430"
            ]
        ]
    },
    {
        "id": "a461fd71caf7cb2a",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "37",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "37",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2280,
        "wires": [
            [
                "5cc4c9f87054273d"
            ],
            [
                "984df45dccf0fdd8"
            ]
        ]
    },
    {
        "id": "5cc4c9f87054273d",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.StatusName=\"Waiting for receiving\"",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2280,
        "wires": [
            [
                "17806a35f097ee7d"
            ],
            [
                "131ea94e02b6813e"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "17806a35f097ee7d",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "correct with problem",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"correct_with_problem\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 2280,
        "wires": [
            [
                "ab3749871b18ebc5"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "131ea94e02b6813e",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2320,
        "wires": [
            [
                "ab3749871b18ebc5"
            ]
        ]
    },
    {
        "id": "984df45dccf0fdd8",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "38",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "38",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2360,
        "wires": [
            [
                "da8d8185bfa1d9d9"
            ],
            [
                "7275f45e02c2d104"
            ]
        ]
    },
    {
        "id": "da8d8185bfa1d9d9",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.StatusName=\"Waiting for receiving\"",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2360,
        "wires": [
            [
                "476dfab3525e43a1"
            ],
            [
                "827ecfdf965749b8"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "476dfab3525e43a1",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "incorrect with problem",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"incorrect_with_problem\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 2360,
        "wires": [
            [
                "5fdaf7838a42044a"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "827ecfdf965749b8",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2400,
        "wires": [
            [
                "5fdaf7838a42044a"
            ]
        ]
    },
    {
        "id": "7275f45e02c2d104",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "39",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "39",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2440,
        "wires": [
            [
                "48420bf8f209a582"
            ],
            [
                "81db63193a348ccc"
            ]
        ]
    },
    {
        "id": "48420bf8f209a582",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.StatusName=\"Waiting for receiving\"",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2440,
        "wires": [
            [
                "b91680eaf902934d"
            ],
            [
                "c060a6f6abcb2ac2"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "c060a6f6abcb2ac2",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2480,
        "wires": [
            [
                "bba9403f4412f978"
            ]
        ]
    },
    {
        "id": "81db63193a348ccc",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "40",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "40",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2520,
        "wires": [
            [
                "ad553f3c161e660c"
            ],
            [
                "525194a743595f24"
            ]
        ]
    },
    {
        "id": "ad553f3c161e660c",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.StatusName=\"Waiting for receiving\"",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2520,
        "wires": [
            [
                "999c52264a96b21d"
            ],
            [
                "f58316de910605fa"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "f58316de910605fa",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2560,
        "wires": [
            [
                "d8760d2ba8091908"
            ]
        ]
    },
    {
        "id": "525194a743595f24",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "41",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "41",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2600,
        "wires": [
            [
                "b3d2da7e33427220"
            ],
            [
                "c92525ab4d598793"
            ]
        ]
    },
    {
        "id": "b3d2da7e33427220",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.StatusName=\"Waiting for receiving\"",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2600,
        "wires": [
            [
                "d5cf057a19079a0f"
            ],
            [
                "7925d20a7f6de58a"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "d5cf057a19079a0f",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "was not received",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"was_not_received\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 2600,
        "wires": [
            [
                "d3d470edcad49de6"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "7925d20a7f6de58a",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2640,
        "wires": [
            [
                "d3d470edcad49de6"
            ]
        ]
    },
    {
        "id": "aef926f6986ce885",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 2140,
        "wires": [],
        "l": true
    },
    {
        "id": "94ff7bae48926430",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 2220,
        "wires": [],
        "l": true
    },
    {
        "id": "ab3749871b18ebc5",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 2300,
        "wires": [],
        "l": true
    },
    {
        "id": "5fdaf7838a42044a",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 2380,
        "wires": [],
        "l": true
    },
    {
        "id": "bba9403f4412f978",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 2460,
        "wires": [],
        "l": true
    },
    {
        "id": "d8760d2ba8091908",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 2540,
        "wires": [],
        "l": true
    },
    {
        "id": "d3d470edcad49de6",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 2620,
        "wires": [],
        "l": true
    },
    {
        "id": "22c18b69053388b0",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.StatusName=\"Waiting for receiving\"",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1960,
        "wires": [
            [
                "a8542eea82ba6dd1"
            ],
            [
                "f22d9c4d06b87f79"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "a8542eea82ba6dd1",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "was not refunded",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"was_not_refunded\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 1960,
        "wires": [
            [
                "3724fa0e0d423e7a"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "f22d9c4d06b87f79",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2000,
        "wires": [
            [
                "3724fa0e0d423e7a"
            ]
        ]
    },
    {
        "id": "3724fa0e0d423e7a",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1980,
        "wires": [],
        "l": true
    },
    {
        "id": "85f8a219cb5fcde5",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.StatusName=\"Waiting for receiving\"",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1880,
        "wires": [
            [
                "691ac7086b3a8891"
            ],
            [
                "b2b1c1629bda2a3a"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "691ac7086b3a8891",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "was refunded",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"was_refunded\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1880,
        "wires": [
            [
                "480da7223997bfc7"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "b2b1c1629bda2a3a",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1920,
        "wires": [
            [
                "480da7223997bfc7"
            ]
        ]
    },
    {
        "id": "480da7223997bfc7",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1900,
        "wires": [],
        "l": true
    },
    {
        "id": "999c52264a96b21d",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "was not refunded",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"was_not_refunded\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 2520,
        "wires": [
            [
                "d8760d2ba8091908"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "b91680eaf902934d",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "was refunded",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"was_refunded\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2440,
        "wires": [
            [
                "bba9403f4412f978"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "80b85babf9272733",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "was not shipped",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"was_not_shipped\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1720,
        "wires": [
            [
                "57cf8d8987e4ae81"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "57cf8d8987e4ae81",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1720,
        "wires": [],
        "l": true
    },
    {
        "id": "392c4acaf6b1bead",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "was not shipped",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"was_not_shipped\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2680,
        "wires": [
            [
                "978814b92f0b3551"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "edbb9d522f3fa5f3",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.StatusName=\"Waiting for receiving\"",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2680,
        "wires": [
            [
                "392c4acaf6b1bead"
            ],
            [
                "7770705aefe3fb87"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "c92525ab4d598793",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "42",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "42",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2680,
        "wires": [
            [
                "edbb9d522f3fa5f3"
            ],
            [
                "6b203fcd4276b8b2"
            ]
        ]
    },
    {
        "id": "7770705aefe3fb87",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2720,
        "wires": [
            [
                "978814b92f0b3551"
            ]
        ]
    },
    {
        "id": "978814b92f0b3551",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 2700,
        "wires": [],
        "l": true
    },
    {
        "id": "862798bbf1d9ad7c",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t    StatusName=\"Waiting_for_refund\"\t    and \t    ReturnCondition=null\t    and \t    SrRefundedSum=null\t    and \t    ProblemDescription=\"-\"\t    )",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1800,
        "wires": [
            [
                "00587859a6f0545b"
            ],
            [
                "6060090af8e210f4"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "6060090af8e210f4",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1840,
        "wires": [
            [
                "19a45a11b1e76733"
            ]
        ]
    },
    {
        "id": "19a45a11b1e76733",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1820,
        "wires": [],
        "l": true
    },
    {
        "id": "00587859a6f0545b",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "refund notification dropship",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"was_not_refunded\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 1800,
        "wires": [
            [
                "19a45a11b1e76733"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "dcd0d82dcbc7df60",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "bag filling app",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/BagFilling\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1760,
        "wires": [
            [
                "6ee63b3013918359"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "6ee63b3013918359",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1760,
        "wires": [],
        "l": true
    },
    {
        "id": "c4d78cf31a76f7a4",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "check refund",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ProblemDescription\": \"need_to_check_refund\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 2760,
        "wires": [
            [
                "1891428ac269ed8f"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "c307d2c3f63b7a1c",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t   StatusName=\"Waiting_for_refund\"\t    and \t    BagStatus in [\"brought\",\"shipped\"]\t)",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2760,
        "wires": [
            [
                "c4d78cf31a76f7a4"
            ],
            [
                "d3ae114452a7aa2f"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "6b203fcd4276b8b2",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "43",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "43",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2760,
        "wires": [
            [
                "c307d2c3f63b7a1c"
            ],
            [
                "c94bb3d2aef73ebd"
            ]
        ]
    },
    {
        "id": "d3ae114452a7aa2f",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2800,
        "wires": [
            [
                "1891428ac269ed8f"
            ]
        ]
    },
    {
        "id": "1891428ac269ed8f",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 2780,
        "wires": [],
        "l": true
    },
    {
        "id": "338bf9bc8f82a1ab",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 960,
        "wires": [],
        "l": true
    },
    {
        "id": "956b67690bada7a1",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "to Archive",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"80\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 2840,
        "wires": [
            [
                "e20917abd4154796"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "9faaab2daa8f869a",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2880,
        "wires": [
            [
                "e20917abd4154796"
            ]
        ]
    },
    {
        "id": "e20917abd4154796",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 2860,
        "wires": [],
        "l": true
    },
    {
        "id": "c94bb3d2aef73ebd",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "44",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "44",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2840,
        "wires": [
            [
                "dfc768c82e8182ac"
            ],
            [
                "be3e151c75e708a4"
            ]
        ]
    },
    {
        "id": "dfc768c82e8182ac",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t   StatusName=\"Waiting_for_sending\"\t    and \t    ReturnCondition=\"was_not_shipped\"\t    and \t    ProblemDescription=\"-\"\t)",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2840,
        "wires": [
            [
                "956b67690bada7a1"
            ],
            [
                "9faaab2daa8f869a"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "be3e151c75e708a4",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "45",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "45",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2920,
        "wires": [
            [
                "d2e012f5e308b8a1"
            ],
            [
                "3c811382f85cd73e"
            ]
        ]
    },
    {
        "id": "d2e012f5e308b8a1",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t    StatusName=\"Waiting for receiving\"\t    and \t    ItemCondition=null\t    and \t    ReturnCondition=null\t    and \t    Problemdescription=\"-\"\t)",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2920,
        "wires": [
            [
                "406a3a5f78aea722"
            ],
            [
                "329574d8ca5d0e44"
            ]
        ],
        "info": "ProblemDescription \"-\""
    },
    {
        "id": "406a3a5f78aea722",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "refund notification pickup",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"update\",\t               \"context\": {\t                   \"ReturnCondition\": \"was_not_received\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }\t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 2920,
        "wires": [
            [
                "a18d5c721938616b"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "329574d8ca5d0e44",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2960,
        "wires": [
            [
                "a18d5c721938616b"
            ]
        ]
    },
    {
        "id": "a18d5c721938616b",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 2940,
        "wires": [],
        "l": true
    },
    {
        "id": "50104b1c586abeb6",
        "type": "comment",
        "z": "98ca48f3d4300469",
        "name": "",
        "info": "returns",
        "x": 60,
        "y": 1560,
        "wires": []
    },
    {
        "id": "e73dd8df7d6ef236",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(\t   SrName in [\t       \"PartsUnlimited\",\t       \"TuckerRocky\",\t       \"Autodist\",\t       \"RockyMountain\",\t       \"Wps\"\t        ] \t    and \t    StatusName=\"Parcel creation\" \t    and \t    ProblemDescription=null\t)",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 1040,
        "wires": [
            [
                "8bf4831e8e7147bb"
            ],
            [
                "50c327d10571eb2f"
            ]
        ]
    },
    {
        "id": "8bf4831e8e7147bb",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "problem description",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"ProblemDescription\": \"-\"\t                       },\t                       \"delay\": 0     \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }   \t               }\t           ],\t           \"code\": \"200\" \t\t       \t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 1040,
        "wires": [
            [
                "4841b53dde7785e3"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "50c327d10571eb2f",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1080,
        "wires": [
            [
                "4841b53dde7785e3"
            ]
        ]
    },
    {
        "id": "4841b53dde7785e3",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 1060,
        "wires": [],
        "l": true
    },
    {
        "id": "3c811382f85cd73e",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "46",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "46",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 3000,
        "wires": [
            [
                "ffc1399a97e089b8"
            ],
            [
                "643bc9340a2242e9"
            ]
        ]
    },
    {
        "id": "ffc1399a97e089b8",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "duplicates check",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\": {\t                       \"type\": \"remote_request\",\t                       \"context\": {\t                           \"headers\": {},\t                           \"body\": crm.output.entity.row,\t                           \"url\": \"https://crm-callbacks.rollun.net/dublicatescheck\",\t                           \"method\": \"POST\"         \t               \t                       },\t                       \"delay\":0                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }           \t           ],\t           \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 3000,
        "wires": [
            [
                "10d7ba5ad33f33b5"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "10d7ba5ad33f33b5",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 3000,
        "wires": [],
        "l": true
    },
    {
        "id": "fad071aacdb2e280",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 3040,
        "wires": [],
        "l": true
    },
    {
        "id": "643bc9340a2242e9",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "47",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "47",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 3040,
        "wires": [
            [
                "a63e4d4f47133490"
            ],
            [
                "53aa545b5f5610a6"
            ]
        ]
    },
    {
        "id": "a63e4d4f47133490",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "date check",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t    (\t     $exists(crm.output.entity.row.DateShipBy)\t        and\t        crm.output.entity.row.DateShipBy!=null\t        and\t        (\t            $millis()-$toMillis(\t                 crm.output.entity.row.DateShipBy,\t                \"[Y0001]-[M01]-[D01] [H01]:[m01]:[s01]\"\t            )\t        )\t        /86400000\t        >\t        7\t    )\t?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"update\",\t                       \"context\":{\t                           \"ProblemDescription\": \"OLD DEAL\"                                       \t                       },\t                       \"delay\":60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }           \t           ],\t           \"code\":\"200\"     \t       }:\t       {\"data\": {},\"code\":\"200\"}\t)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 3040,
        "wires": [
            [
                "fad071aacdb2e280"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "53aa545b5f5610a6",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "48",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "48",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 3080,
        "wires": [
            [
                "abca3d4249297263"
            ],
            [
                "251c8eedae96f7ce"
            ]
        ]
    },
    {
        "id": "4eb47981beb5fd74",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "labels purchase",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"remote_request\",\t                       \"context\": {\t                           \"headers\": {},\t                           \"body\": crm.output.entity.row,\t                           \"url\": \"https://crm-callbacks.rollun.net/labelsPurchase\",\t                           \"method\": \"POST\"         \t               \t                       },\t                       \"delay\": 0       \t           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t           \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 3080,
        "wires": [
            [
                "2c7283a3bc57cff9"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "2c7283a3bc57cff9",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 3100,
        "wires": [],
        "l": true
    },
    {
        "id": "abca3d4249297263",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.ProblemDescription=\"-\" and (crm.output.entity.row.Tracknumber=null or crm.output.entity.row.Tracknumber=\"\")",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 3080,
        "wires": [
            [
                "4eb47981beb5fd74"
            ],
            [
                "2a7b9849750c0dae"
            ]
        ]
    },
    {
        "id": "2a7b9849750c0dae",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 3120,
        "wires": [
            [
                "2c7283a3bc57cff9"
            ]
        ]
    },
    {
        "id": "251c8eedae96f7ce",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "49",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "49",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 3160,
        "wires": [
            [
                "1892170d1d4ba26b"
            ],
            [
                "fc1ab1d00df906d3"
            ]
        ]
    },
    {
        "id": "1892170d1d4ba26b",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(ProblemDescription=\"-\" and StatusName=\"60 day test\")",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 3160,
        "wires": [
            [
                "746805197e2b115d"
            ],
            [
                "5dd96948b7df1fef"
            ]
        ]
    },
    {
        "id": "746805197e2b115d",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "delivery check",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"remote_request\",\t                       \"context\": {\t                           \"headers\": {},\t                           \"body\": crm.output.entity.row,\t                           \"url\": \"https://crm-callbacks.rollun.net/deliveryCheck\",\t                           \"method\": \"POST\"         \t                       },\t                       \"delay\": 0       \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id           \t                   }   \t               }   \t           ],\t           \"code\": \"200\" \t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 3160,
        "wires": [
            [
                "548eea90d1b08bb4"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "5dd96948b7df1fef",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 3200,
        "wires": [
            [
                "548eea90d1b08bb4"
            ]
        ]
    },
    {
        "id": "548eea90d1b08bb4",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 3180,
        "wires": [],
        "l": true
    },
    {
        "id": "fc1ab1d00df906d3",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "50",
        "property": "crm.output.action.context.scenario_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "50",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 3240,
        "wires": [
            [
                "63c9e2db916b9fb5"
            ],
            [
                "8f1fac91e2662c2a"
            ]
        ]
    },
    {
        "id": "63c9e2db916b9fb5",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.(ProblemDescription=\"-\" and HowToBuy4Result=null)",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 3240,
        "wires": [
            [
                "dd3634d816e66047"
            ],
            [
                "fc12e2a5907c689b"
            ]
        ]
    },
    {
        "id": "dd3634d816e66047",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "amazonAShS",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"remote_request\",\t                       \"context\": {\t                           \"headers\": {},\t                           \"body\": crm.output.entity,\t                           \"url\": \"https://crm-callbacks.rollun.net/amazonAShS\",\t                           \"method\": \"POST\"         \t                       },\t                       \"delay\": 0       \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id           \t                   }   \t               }   \t           ],\t           \"code\": \"200\" \t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 3240,
        "wires": [
            [
                "37fc45fefb4702c4"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "fc12e2a5907c689b",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 3280,
        "wires": [
            [
                "37fc45fefb4702c4"
            ]
        ]
    },
    {
        "id": "37fc45fefb4702c4",
        "type": "link out",
        "z": "98ca48f3d4300469",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 820,
        "y": 3260,
        "wires": [],
        "l": true
    },
    {
        "id": "7474803ab1491463",
        "type": "switch",
        "z": "98ca48f3d4300469",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.StatusName!=\"Archive\"",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 800,
        "wires": [
            [
                "d08538a544367cb4"
            ],
            [
                "22e7b5943625fca4"
            ]
        ]
    },
    {
        "id": "22e7b5943625fca4",
        "type": "change",
        "z": "98ca48f3d4300469",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 840,
        "wires": [
            [
                "0cd73f3a51d670af"
            ]
        ]
    },
    {
        "id": "b3caec21cbdb2ae9",
        "type": "link in",
        "z": "414b8641d06f1829",
        "name": "button",
        "links": [
            "484e23b5d8c737e7"
        ],
        "x": 170,
        "y": 40,
        "wires": [
            [
                "142a0c57dc16237b",
                "a826b41207aab67b"
            ]
        ],
        "l": true,
        "info": "from sorting"
    },
    {
        "id": "142a0c57dc16237b",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "1",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 80,
        "wires": [
            [
                "9417f66802fe146c"
            ],
            [
                "3e0b17938cddc5a2"
            ]
        ]
    },
    {
        "id": "3e0b17938cddc5a2",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "2",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 120,
        "wires": [
            [
                "857f5ddce0c14e89"
            ],
            [
                "f33714829e9a5e5a"
            ]
        ]
    },
    {
        "id": "9417f66802fe146c",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "is parcel shipped?",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": " {\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/TrackNumberCheckOrder\"\t                       },\t               \"delay\": 0       \t           },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               }   \t       }   \t   ],\t   \"code\": \"200\" \t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 80,
        "wires": [
            [
                "9504b948721a99e7"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "f33714829e9a5e5a",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "3",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 160,
        "wires": [
            [
                "95a1ce13602ebb5a"
            ],
            [
                "25a89cdf94ec4ee5"
            ]
        ]
    },
    {
        "id": "857f5ddce0c14e89",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "autohowtobuy 3",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"remote_request\",\t                       \"context\": {\t                           \"headers\": {},\t                           \"body\": crm.output.entity.row,\t                           \"url\": \"https://crm-callbacks.rollun.net/autohowtobuy3\",\t                           \"method\": \"POST\"         \t               \t                       },\t                       \"delay\": 0       \t           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t           \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 120,
        "wires": [
            [
                "8d79dbe55dfc5a0b"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "25a89cdf94ec4ee5",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "4",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "4",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 200,
        "wires": [
            [
                "63a6c8d9c26ea9c8"
            ],
            [
                "29ccf9def8a28b75"
            ]
        ]
    },
    {
        "id": "95a1ce13602ebb5a",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "linked deal autocreation",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/HowToBuy4Webhook\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 160,
        "wires": [
            [
                "2de31e8e1e6aac8b"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "29ccf9def8a28b75",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "5",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "5",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 240,
        "wires": [
            [
                "432c3de697fe6796"
            ],
            [
                "a11765f729846831"
            ]
        ]
    },
    {
        "id": "63a6c8d9c26ea9c8",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "cogs filling",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/UpdateOrderCogsWebhook\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 200,
        "wires": [
            [
                "e5b41ac2fb71d271"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "a11765f729846831",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "6",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "6",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 280,
        "wires": [
            [
                "bc296e89a8308101"
            ],
            [
                "30be1cfae6e6ef4b"
            ]
        ]
    },
    {
        "id": "30be1cfae6e6ef4b",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "7",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "7",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 320,
        "wires": [
            [
                "534ffd468ef9ae07"
            ],
            [
                "34b567f426dedfe0"
            ]
        ]
    },
    {
        "id": "34b567f426dedfe0",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "8",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "8",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 360,
        "wires": [
            [
                "da579795f1a48840"
            ],
            [
                "be82e63c60b6bfd0"
            ]
        ]
    },
    {
        "id": "bc296e89a8308101",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "autobuy TR, AU, PU",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/AutoBuy\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 280,
        "wires": [
            [
                "ec98528178f0a7db"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "be82e63c60b6bfd0",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "9",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "9",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 400,
        "wires": [
            [
                "0f954d8f24eef8f4"
            ],
            [
                "accedff1ba5a58fa"
            ]
        ]
    },
    {
        "id": "534ffd468ef9ae07",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "AU, TR, PU get tracknumber",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/OrderStatus\"\t                       \t               },\t               \"delay\": 0       \t           \t                   \t           },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   \t           }   \t       \t               \t       }   \t   \t           \t   ],\t   \"code\": \"200\" \t\t       \t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 320,
        "wires": [
            [
                "e3fdded41bebc040"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "accedff1ba5a58fa",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "10",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "10",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 440,
        "wires": [
            [
                "97617c7bdf85571f"
            ],
            [
                "0316fb2438fc009d"
            ]
        ]
    },
    {
        "id": "0316fb2438fc009d",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "11",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "11",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 480,
        "wires": [
            [
                "7593ec4d951bf556"
            ],
            [
                "2f8962ecb015a5d8"
            ]
        ]
    },
    {
        "id": "da579795f1a48840",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "tracknumber into mp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"megaplan_request\",\t                       \"context\": {\t                           \"url\": \"http://megaplan-crm/api/webhook/TrackNumberToMarketplace\"               \t                       },\t                       \"delay\": 0       \t           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t           \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 360,
        "wires": [
            [
                "edb2a785961eb2c0"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "2f8962ecb015a5d8",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "12",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "12",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 520,
        "wires": [
            [
                "2e13920db48ac926"
            ],
            [
                "07aa3816dddcd65b"
            ]
        ]
    },
    {
        "id": "0f954d8f24eef8f4",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "tracknumber into mp - check",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/TrackNumberToMegaplan\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 400,
        "wires": [
            [
                "1ab1d020c06afa02"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "07aa3816dddcd65b",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "13",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "13",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 560,
        "wires": [
            [
                "75666fa5442d4a51"
            ],
            [
                "ca324557cf7497f1"
            ]
        ]
    },
    {
        "id": "97617c7bdf85571f",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "tracknumber tracking",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/TracknumberShipStatus\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 440,
        "wires": [
            [
                "507d45aa6d91f113"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "ca324557cf7497f1",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "14",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "14",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 600,
        "wires": [
            [
                "806610af84f1ce87"
            ],
            [
                "8764de27e1185233"
            ]
        ]
    },
    {
        "id": "0a4f3f02b40d022e",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "16",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "16",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 680,
        "wires": [
            [
                "ae34d5673ab04374"
            ],
            [
                "c653e5b38a850995"
            ]
        ]
    },
    {
        "id": "7593ec4d951bf556",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "dimensions",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/DealDimension\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }\t",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 480,
        "wires": [
            [
                "a04cb6e87c7054ac"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "2e13920db48ac926",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "Return app add info",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/AddReturnInfo\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 520,
        "wires": [
            [
                "007998f5d5d5157b"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "75666fa5442d4a51",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "create rof reserve",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/CreateReserve\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 560,
        "wires": [
            [
                "d03d2af634fc4ccb"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "34c21001d858d227",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "delete rof reserve",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/DeleteReserve\"               \t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 640,
        "wires": [
            [
                "24966fa4882dd7c8"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "e8ff885848ad2a7d",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "products to bag",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/AddProductsToBag\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 840,
        "wires": [
            [
                "42bfe820bfa15232"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "698d62011edd53f1",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "price to pickup",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/AddPriceToPickup\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 800,
        "wires": [
            [
                "9b060f3f6379c8d6"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "a826b41207aab67b",
        "type": "debug",
        "z": "414b8641d06f1829",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 330,
        "y": 40,
        "wires": []
    },
    {
        "id": "8d79dbe55dfc5a0b",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 120,
        "wires": [],
        "l": true
    },
    {
        "id": "2de31e8e1e6aac8b",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 160,
        "wires": [],
        "l": true
    },
    {
        "id": "a04cb6e87c7054ac",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 480,
        "wires": [],
        "l": true
    },
    {
        "id": "8764de27e1185233",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "15",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "15",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 640,
        "wires": [
            [
                "34c21001d858d227"
            ],
            [
                "0a4f3f02b40d022e"
            ]
        ]
    },
    {
        "id": "521f893f7f84f4bc",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "18",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "18",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 760,
        "wires": [
            [
                "b6bb792c80dc4e4c"
            ],
            [
                "a952432a89c5d0c1"
            ]
        ]
    },
    {
        "id": "a952432a89c5d0c1",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "19",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "19",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 800,
        "wires": [
            [
                "698d62011edd53f1"
            ],
            [
                "ad97e28d9d608404"
            ]
        ]
    },
    {
        "id": "c653e5b38a850995",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "17",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "17",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 720,
        "wires": [
            [
                "2a7933d7aa5b22e7"
            ],
            [
                "521f893f7f84f4bc"
            ]
        ]
    },
    {
        "id": "e5b41ac2fb71d271",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 200,
        "wires": [],
        "l": true
    },
    {
        "id": "edb2a785961eb2c0",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 360,
        "wires": [],
        "l": true
    },
    {
        "id": "1ab1d020c06afa02",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 400,
        "wires": [],
        "l": true
    },
    {
        "id": "9504b948721a99e7",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 80,
        "wires": [],
        "l": true
    },
    {
        "id": "507d45aa6d91f113",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 440,
        "wires": [],
        "l": true
    },
    {
        "id": "d03d2af634fc4ccb",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 560,
        "wires": [],
        "l": true
    },
    {
        "id": "ad97e28d9d608404",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "20",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "20",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 840,
        "wires": [
            [
                "e8ff885848ad2a7d"
            ],
            [
                "333957a621bf2d9f"
            ]
        ]
    },
    {
        "id": "e3fdded41bebc040",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 320,
        "wires": [],
        "l": true
    },
    {
        "id": "42bfe820bfa15232",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 840,
        "wires": [],
        "l": true
    },
    {
        "id": "9b060f3f6379c8d6",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 800,
        "wires": [],
        "l": true
    },
    {
        "id": "ec98528178f0a7db",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 280,
        "wires": [],
        "l": true
    },
    {
        "id": "432c3de697fe6796",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "cogs filling new",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/CalculateProfit\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 240,
        "wires": [
            [
                "9a2f2745404abac9"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "9a2f2745404abac9",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 240,
        "wires": [],
        "l": true
    },
    {
        "id": "2a7933d7aa5b22e7",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "Amazon create labels by bag",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/AmazonLabelCreationWebhook\"               \t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 720,
        "wires": [
            [
                "d6c350b615b2a5d6"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "b6bb792c80dc4e4c",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "Amazon get labels by bag",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/SendBagLabels\"               \t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 760,
        "wires": [
            [
                "8a3cb4afa285c26e"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "d6c350b615b2a5d6",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 720,
        "wires": [],
        "l": true
    },
    {
        "id": "806610af84f1ce87",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "delete rof reserve and subtract",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/DeleteReserveAndSubtract\"\t                       \t               },\t               \"delay\": 0       \t           \t                   \t           },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   \t           }   \t       \t               \t       }   \t   \t           \t   ],\t   \"code\": \"200\" \t\t       \t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 600,
        "wires": [
            [
                "6be302315cf6524b"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "6be302315cf6524b",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 600,
        "wires": [],
        "l": true
    },
    {
        "id": "33b2e6f223a5928e",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 1120,
        "wires": [],
        "l": true
    },
    {
        "id": "5e12262eea8be2c6",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "set error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Button_id `\"&crm.output.action.context.button_id&\"` is not found\"       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 1120,
        "wires": [
            [
                "33b2e6f223a5928e"
            ]
        ]
    },
    {
        "id": "2745f6fa8175b45d",
        "type": "catch",
        "z": "414b8641d06f1829",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 1000,
        "y": 40,
        "wires": [
            [
                "9b908207293badcc"
            ]
        ]
    },
    {
        "id": "9b908207293badcc",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "set error ",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "$substringAfter(\t   error.message,\t   \"Invalid JSONata expression: \"\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "alert",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.source",
                "pt": "msg",
                "to": "error.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "log.context.flow",
                "pt": "msg",
                "to": "src",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 80,
        "wires": [
            [
                "35d70fd825143e25",
                "f5dfd07427756a0a"
            ]
        ]
    },
    {
        "id": "35d70fd825143e25",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "log",
        "mode": "link",
        "links": [
            "4b768188.85ab9"
        ],
        "x": 970,
        "y": 120,
        "wires": [],
        "icon": "node-red/file-in.svg",
        "l": true
    },
    {
        "id": "f5dfd07427756a0a",
        "type": "debug",
        "z": "414b8641d06f1829",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1140,
        "y": 80,
        "wires": []
    },
    {
        "id": "ae34d5673ab04374",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "RM autobuy",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/PickUpAutoBuyRm\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 680,
        "wires": [
            [
                "a0172396036ab6cc"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "a0172396036ab6cc",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 680,
        "wires": [],
        "l": true
    },
    {
        "id": "8a3cb4afa285c26e",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 760,
        "wires": [],
        "l": true
    },
    {
        "id": "007998f5d5d5157b",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 520,
        "wires": [],
        "l": true
    },
    {
        "id": "24966fa4882dd7c8",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 640,
        "wires": [],
        "l": true
    },
    {
        "id": "4dd6fd0946957b99",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "retrun deal creation",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/CreateReturnPackage\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 880,
        "wires": [
            [
                "677f08bba014fc5a"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "333957a621bf2d9f",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "21",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "21",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 880,
        "wires": [
            [
                "4dd6fd0946957b99"
            ],
            [
                "b1cfb1095dde4172"
            ]
        ]
    },
    {
        "id": "677f08bba014fc5a",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 880,
        "wires": [],
        "l": true
    },
    {
        "id": "da53cc228cfb5366",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "bag filling app",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"megaplan_request\",\t               \"context\": {\t                   \"url\": \"http://megaplan-crm/api/webhook/BagFilling\"\t                       },\t               \"delay\": 0       \t           \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t   \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 920,
        "wires": [
            [
                "f94c8ba2c2277837"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "b1cfb1095dde4172",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "22",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "22",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 920,
        "wires": [
            [
                "da53cc228cfb5366"
            ],
            [
                "abad38369f09dbce"
            ]
        ]
    },
    {
        "id": "f94c8ba2c2277837",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 920,
        "wires": [],
        "l": true
    },
    {
        "id": "abad38369f09dbce",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "23",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "23",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 960,
        "wires": [
            [
                "afa95d6514720d5a"
            ],
            [
                "ae0a74e6029248b5"
            ]
        ]
    },
    {
        "id": "d1e2a28ad5fa606e",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "labels purchase",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"remote_request\",\t                       \"context\": {\t                           \"headers\": {},\t                           \"body\": crm.output.entity.row,\t                           \"url\": \"https://crm-callbacks.rollun.net/labelsPurchase\",\t                           \"method\": \"POST\"         \t               \t                       },\t                       \"delay\": 0       \t           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t           \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 1040,
        "wires": [
            [
                "9d3a89e3d860317e"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "9d3a89e3d860317e",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 1040,
        "wires": [],
        "l": true
    },
    {
        "id": "afa95d6514720d5a",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "rule",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.row.ProblemDescription=\"-\" and (crm.output.entity.row.Tracknumber=null or crm.output.entity.row.Tracknumber=\"\")",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 960,
        "wires": [
            [
                "d1e2a28ad5fa606e",
                "53045022df4fd8e8"
            ],
            [
                "ab694b5a608aba5c",
                "cd69bf07a909341c"
            ]
        ]
    },
    {
        "id": "ab694b5a608aba5c",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 1000,
        "wires": [
            [
                "9d3a89e3d860317e"
            ]
        ]
    },
    {
        "id": "ae0a74e6029248b5",
        "type": "switch",
        "z": "414b8641d06f1829",
        "name": "24",
        "property": "crm.output.action.context.button_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "24",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 1080,
        "wires": [
            [
                "4a574c25fdac3eef"
            ],
            [
                "5e12262eea8be2c6"
            ]
        ]
    },
    {
        "id": "4a574c25fdac3eef",
        "type": "change",
        "z": "414b8641d06f1829",
        "name": "labels merging",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"remote_request\",\t                       \"context\": {\t                           \"headers\": {},\t                           \"body\": crm.output.entity.row,\t                           \"url\": \"https://crm-callbacks.rollun.net/labelsMerging\",\t                           \"method\": \"POST\"         \t               \t                       },\t                       \"delay\": 0       \t           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id           \t               \t                   }   \t       \t               }   \t   \t           ],\t           \"code\": \"200\" \t\t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 1080,
        "wires": [
            [
                "99bbee840f5ec1cd"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "99bbee840f5ec1cd",
        "type": "link out",
        "z": "414b8641d06f1829",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 680,
        "y": 1080,
        "wires": [],
        "l": true
    },
    {
        "id": "cd69bf07a909341c",
        "type": "debug",
        "z": "414b8641d06f1829",
        "name": "debug 31",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 700,
        "y": 1000,
        "wires": []
    },
    {
        "id": "53045022df4fd8e8",
        "type": "debug",
        "z": "414b8641d06f1829",
        "name": "debug 32",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 700,
        "y": 960,
        "wires": []
    },
    {
        "id": "99f994a095ff1072",
        "type": "link in",
        "z": "e181d79831f12e5d",
        "name": "sorting",
        "links": [
            "d4c7cf29592984ee"
        ],
        "x": 170,
        "y": 40,
        "wires": [
            [
                "5536039ac52e1939",
                "1ada85b2bb4490ec"
            ]
        ],
        "l": true,
        "info": "from sorting"
    },
    {
        "id": "5536039ac52e1939",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 40,
        "wires": []
    },
    {
        "id": "99e232cc72473f01",
        "type": "catch",
        "z": "e181d79831f12e5d",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 1000,
        "y": 40,
        "wires": [
            [
                "554bc18623c2d787"
            ]
        ]
    },
    {
        "id": "554bc18623c2d787",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "set error ",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "$substringAfter(\t   error.message,\t   \"Invalid JSONata expression: \"\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "alert",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.source",
                "pt": "msg",
                "to": "error.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "log.context.flow",
                "pt": "msg",
                "to": "src",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 80,
        "wires": [
            [
                "0b9c521f3eb12705",
                "8ffc143396d45355"
            ]
        ]
    },
    {
        "id": "0b9c521f3eb12705",
        "type": "link out",
        "z": "e181d79831f12e5d",
        "name": "log",
        "mode": "link",
        "links": [
            "4b768188.85ab9"
        ],
        "x": 970,
        "y": 120,
        "wires": [],
        "icon": "node-red/file-in.svg",
        "l": true
    },
    {
        "id": "8ffc143396d45355",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 80,
        "wires": []
    },
    {
        "id": "c03ee32f43fe6424",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "to Parcels preparation",
        "rules": [
            {
                "t": "set",
                "p": "crm.response",
                "pt": "msg",
                "to": "{\"messages\":[],\"data\":[],\"code\":\"200\"}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"MpName\")\t               or\t               $lookup(crm.output.action.context, \"MpOrderNumber\")\t               or\t               $lookup(crm.output.action.context, \"MpShipMethod\")\t               or \t               $lookup(crm.output.action.context, \"DateCrPayed\")\t               or\t               $lookup(crm.output.action.context, \"DateShipBy\")\t               or\t               $lookup(crm.output.action.context, \"DateDeliverBy\")\t               or \t               $lookup(crm.output.action.context, \"ProblemDescription\")\t           ) \t           and\t           crm.output.entity.row.(\t               MpName!=null \t   and \t   MpOrderNumber!=null \t   and \t   MpShipMethod!=null \t   and \t   DateCrPayed!=null \t   and \t   DateShipBy!=null \t   and \t   DateDeliverBy!=null \t   and \t   ProblemDescription=\"-\"\t   and\t   (StatusName=\"Order creation\" or StatusName=\"Pending\")\t)\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"14\"\t                       },\t                       \"delay\": 0       \t           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   }   \t       \t               }   \t   \t           ],\t           \"code\": \"200\" \t\t       }:null\t}|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 320,
        "wires": [
            [
                "65b6195a151108aa",
                "a671abefc88e9be2"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "6d0a4a44f52e279d",
        "type": "link out",
        "z": "e181d79831f12e5d",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 880,
        "wires": [],
        "l": true
    },
    {
        "id": "560e0aab5d461d7d",
        "type": "link out",
        "z": "e181d79831f12e5d",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 840,
        "wires": [],
        "l": true
    },
    {
        "id": "e5a8290c9fdc78c4",
        "type": "switch",
        "z": "e181d79831f12e5d",
        "name": "update",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "update",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 280,
        "wires": [
            [
                "c03ee32f43fe6424"
            ],
            [
                "2465606a7eb0f17f"
            ]
        ]
    },
    {
        "id": "65e169a01c409718",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 480,
        "wires": []
    },
    {
        "id": "041c6ae7e50facfc",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 440,
        "wires": []
    },
    {
        "id": "0fd65ab6ab71fbf2",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 400,
        "wires": []
    },
    {
        "id": "7a0ee24b993a69fd",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 360,
        "wires": []
    },
    {
        "id": "65b6195a151108aa",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 320,
        "wires": []
    },
    {
        "id": "f605125c568ada39",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 520,
        "wires": []
    },
    {
        "id": "4a5da8dad438bc09",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 560,
        "wires": []
    },
    {
        "id": "f7688ce519a4f954",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 600,
        "wires": []
    },
    {
        "id": "b4c5ac6f9ca23c73",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 640,
        "wires": []
    },
    {
        "id": "2a27864521276b1d",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 680,
        "wires": []
    },
    {
        "id": "2465606a7eb0f17f",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "set error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Event type `\"&crm.output.event.type&\"` is not found\"       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 880,
        "wires": [
            [
                "6d0a4a44f52e279d"
            ]
        ]
    },
    {
        "id": "1f12c42fb7fb4cdc",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 720,
        "wires": []
    },
    {
        "id": "9c8426cbc8b9099f",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 840,
        "wires": [
            [
                "560e0aab5d461d7d"
            ]
        ]
    },
    {
        "id": "a671abefc88e9be2",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "to Pending",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"MpName\")\t               or\t               $lookup(crm.output.action.context, \"MpOrderNumber\")\t               or \t               $lookup(crm.output.action.context, \"ProblemDescription\")\t           ) \t           and\t           crm.output.entity.row.(\t               MpName!=null     \t               and     \t               MpOrderNumber!=null     \t               and     \t               MpShipMethod=null     \t               and     \t               DateCrPayed=null     \t               and     \t               DateShipBy=null     \t               and     \t               DateDeliverBy=null     \t               and     \t               ProblemDescription=\"-\"    \t               and    \t               StatusName=\"Order creation\" \t           )        \t       ) ?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"13\"                        \t                       },\t                       \"delay\": 0                                       \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                                              \t                   }                           \t               }                   \t           ],\t           \"code\": \"200\"          \t       }:null \t   }| \t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 360,
        "wires": [
            [
                "7a0ee24b993a69fd",
                "2483abf963082beb"
            ]
        ]
    },
    {
        "id": "2483abf963082beb",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "to 60 day test",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"Tracknumber\")\t               or \t               $lookup(crm.output.action.context, \"ProblemDescription\")\t           ) \t           and\t           crm.output.entity.row.(\t               Tracknumber!=null     \t               and      \t               ProblemDescription=\"-\"    \t               and    \t               StatusName in [\"Parcels preparation\",\"Order creation\",\"Pending\"]\t           )        \t       ) ?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"15\"                        \t                       },\t                       \"delay\": 0                                       \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                                              \t                   }                           \t               }                   \t           ],\t           \"code\": \"200\"          \t       }:null \t   }| \t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 400,
        "wires": [
            [
                "0fd65ab6ab71fbf2",
                "f5281ae2c41e066b"
            ]
        ]
    },
    {
        "id": "f5281ae2c41e066b",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "to Archive",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t               $lookup(crm.output.action.context, \"ArchiveScenario\")\t           and\t           crm.output.entity.row.(\t               ArchiveScenario!=null \t               and \t               StatusName!=\"Archive\")\t       ) ?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"16\"                        \t                       },\t                       \"delay\": 0                                       \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                                              \t                   }                           \t               }                   \t           ],\t           \"code\": \"200\"          \t       }:null \t   }| \t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 440,
        "wires": [
            [
                "041c6ae7e50facfc",
                "08125de6e9526e69"
            ]
        ]
    },
    {
        "id": "0b566ba068f6caee",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "autohowtobuy 3",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t            (\t               $lookup(crm.output.action.context, \"Status\")\t               or \t               $lookup(crm.output.action.context, \"ProblemDescription\")\t           ) \t           and\t           (\t               crm.output.entity.row.(\t                   ProblemDescription=\"-\" \t                    and \t                    StatusName=\"Parcels preparation\" \t                    and\t                    HowToBuy4=null\t                    and \t                    TracknumbersInMp=null\t                    and \t                    MpShipMethod!=\"International\"\t           )\t           )\t       ) ?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"3\"                                       \t                       },\t                       \"delay\":60                           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }:null \t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 680,
        "wires": [
            [
                "2a27864521276b1d",
                "0c6f80163b47cd3b"
            ]
        ]
    },
    {
        "id": "0c6f80163b47cd3b",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "linked deal autocreation",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":((\t               $lookup(\t                   crm.output.action.context,\t                   \"HowToBuy4BestShipping\"\t               )\t           )and\t           (\t           crm.output.entity.row.(\t               ProblemDescription=\"-\" \t                and \t                StatusName=\"Parcels preparation\" \t                and\t                TracknumbersInMp=null\t                and \t                (MpShipMethod=\"Standard\"\t                or\t                MpShipMethod=\"FreeEconomy\"\t                or\t                MpShipMethod=\"Other\")\t                and \t                (\t                    HowToBuy4BestShipping!=null\t                    and\t                    HowToBuy4BestShipping!=\"null\"\t                )\t           ))\t       ) ?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"4\"                                       \t                       },\t                       \"delay\":60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }:null \t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 720,
        "wires": [
            [
                "1f12c42fb7fb4cdc",
                "af8129f17e572842"
            ]
        ]
    },
    {
        "id": "08125de6e9526e69",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "client canceled amazon",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":\t           (\t               crm.output.entity.row.(\t                   MpName=\"Amazon Shoptimistic\" \t   and \t   (\t                       StatusName=\"Order creation\"\t       or\t       StatusName=\"Pending\"\t   \t           )\t   and \t   (\t                       ProblemDescription=\"client canceled\"\t       or\t       ProblemDescription=\"order canceled\" \t   \t           )\t\t       )\t           )\t?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"16\"                        \t                       },\t                       \"delay\": 0                                       \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }:null \t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 480,
        "wires": [
            [
                "65e169a01c409718",
                "04d398a13ac0cbe8"
            ]
        ]
    },
    {
        "id": "04d398a13ac0cbe8",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "profit amazon",
        "rules": [
            {
                "t": "set",
                "p": "crm.output.entity.row.Cogs",
                "pt": "msg",
                "to": "crm.output.entity.row.Cogs=null ? 0 : crm.output.entity.row.Cogs",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t                $lookup(crm.output.action.context, \"Cogs\") \t                or\t                $lookup(crm.output.action.context, \"FinalPrice\")\t                or  \t                crm.output.action.context.Profit=null\t            )\t       and \t       crm.output.entity.row.MpName=\"Amazon Shoptimistic\"\t   )\t?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Profit\": crm.output.entity.row.($number(FinalPrice)*0.88-$number(Cogs))                        \t                       },\t                       \"delay\": 0                                       \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }:null}|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 520,
        "wires": [
            [
                "f605125c568ada39",
                "6f09e6846d26862b"
            ]
        ]
    },
    {
        "id": "6f09e6846d26862b",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "profit ebay",
        "rules": [
            {
                "t": "set",
                "p": "crm.output.entity.row.Cogs",
                "pt": "msg",
                "to": "crm.output.entity.row.Cogs=null ? 0 : crm.output.entity.row.Cogs",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t                $lookup(crm.output.action.context, \"Cogs\") \t                or\t                $lookup(crm.output.action.context, \"FinalPrice\")\t                or \t                crm.output.action.context.Profit=null\t            )\t       and \t       $contains(crm.output.entity.row.MpName,\"Ebay\")\t   )\t?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Profit\": crm.output.entity.row.($number(FinalPrice)*0.9-$number(Cogs))                        \t                       },\t                       \"delay\": 0                                       \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }:null\t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 560,
        "wires": [
            [
                "4a5da8dad438bc09",
                "150066217e4dc617"
            ]
        ]
    },
    {
        "id": "150066217e4dc617",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "negative profit",
        "rules": [
            {
                "t": "set",
                "p": "crm.output.entity.row.Profit",
                "pt": "msg",
                "to": "crm.output.entity.row.Profit=null ? 0 : crm.output.entity.row.Profit",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t               $lookup(\t                   crm.output.action.context,\t                   \"Profit\"\t               )\t           )\t           and\t           (\t               $number(crm.output.entity.row.Profit)<0 \t               and \t               crm.output.entity.row.ProblemDescription!=\"negative profit\"\t            )\t   \t?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"ProblemDescription\": \"negative profit\"                        \t                       },\t                       \"delay\": 0                                       \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }:null \t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 600,
        "wires": [
            [
                "f7688ce519a4f954",
                "59c9407eb9696f91"
            ]
        ]
    },
    {
        "id": "59c9407eb9696f91",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "order shipped",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":((\t               $lookup(\t                   crm.output.action.context,\t                   \"Status\"\t               )\t           )and\t           (\t           crm.output.entity.row.StatusName=\"60 day test\"\t   ))\t?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"1\"                                       \t                       },\t                       \"delay\":5184000                                     \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }:null \t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 640,
        "wires": [
            [
                "b4c5ac6f9ca23c73",
                "0b566ba068f6caee"
            ]
        ]
    },
    {
        "id": "1ada85b2bb4490ec",
        "type": "switch",
        "z": "e181d79831f12e5d",
        "name": "create",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "create",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 80,
        "wires": [
            [
                "82dba3eb9142a3ec"
            ],
            [
                "e5a8290c9fdc78c4"
            ]
        ]
    },
    {
        "id": "82dba3eb9142a3ec",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "problem description \"-\"",
        "rules": [
            {
                "t": "set",
                "p": "crm.response",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\":[\t       {\t           \"action\":{\t               \"type\":\"update\",\t               \"context\":{\t                   \"ProblemDescription\":\"-\"                                       \t                       },\t               \"delay\":0                            \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t   \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 120,
        "wires": [
            [
                "0412e9479fccefb3",
                "ecc2639578e0cc5c"
            ]
        ]
    },
    {
        "id": "0412e9479fccefb3",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 120,
        "wires": []
    },
    {
        "id": "0b7d98e58437e6ce",
        "type": "link out",
        "z": "e181d79831f12e5d",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 240,
        "wires": [],
        "l": true
    },
    {
        "id": "b56716357307c19f",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 240,
        "wires": [
            [
                "0b7d98e58437e6ce"
            ]
        ]
    },
    {
        "id": "ecc2639578e0cc5c",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "date check",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                        \"context\": {\t                        \"scenario_id\": \"47\"\t                       },\t                       \"delay\":0                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }           \t           ],\t           \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 160,
        "wires": [
            [
                "73198c81f35f44c3",
                "1eed867f1714a8b7"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "73198c81f35f44c3",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 160,
        "wires": []
    },
    {
        "id": "1eed867f1714a8b7",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "duplicates check",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                        \"context\": {\t                        \"scenario_id\": \"46\"\t                       },\t                       \"delay\":0                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }           \t           ],\t           \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 200,
        "wires": [
            [
                "b56716357307c19f",
                "ed92cb8765b2a375"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "ed92cb8765b2a375",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 200,
        "wires": []
    },
    {
        "id": "af8129f17e572842",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "delivery check",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t            $lookup(crm.output.action.context, \"Status\")\t           and\t           (\t               crm.output.entity.row.(\t                   ProblemDescription=\"-\" \t                    and \t                    StatusName=\"60 day test\" \t                )\t           )\t           and \t           (\t                $round(\t                    ($toMillis(\t                    crm.output.entity.row.DateDeliverBy,\"[Y0001]-[M01]-[D01] [H01]:[m01]:[s01]\")\t                    -$toMillis\t                    ($now(UTC)))\t                /1000)\t            ) > 0\t       ) ?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"49\"                                       \t                       },\t                       \"delay\":$round(($toMillis(crm.output.entity.row.DateDeliverBy,\"[Y0001]-[M01]-[D01] [H01]:[m01]:[s01]\")-$toMillis($now(UTC)))/1000)                          \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }:null \t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 760,
        "wires": [
            [
                "2968c8c46fe09fd5",
                "a060c84986130c1d"
            ]
        ]
    },
    {
        "id": "2968c8c46fe09fd5",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 760,
        "wires": []
    },
    {
        "id": "ae0756d8c73f6904",
        "type": "debug",
        "z": "e181d79831f12e5d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 800,
        "wires": []
    },
    {
        "id": "a060c84986130c1d",
        "type": "change",
        "z": "e181d79831f12e5d",
        "name": "amazon shipping check",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(crm.output.action.context,\"Status\")\t           and\t           (\t            crm.output.entity.row.(\t                ProblemDescription=\"-\" \t                and \t                StatusName=\"Parcels preparation\" \t                and\t                HowToBuy4Result=null\t                and \t                MpName=\"Amazon Shoptimistic\"\t                and \t                (\t                    $contains(MpShipTemplate,\"test\")\t                    or\t                    $contains(MpShipTemplate,\"PU_DS_\")\t                )\t            )\t        )\t    )?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"50\"                                       \t                       },\t                       \"delay\":0                       \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }:null \t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 800,
        "wires": [
            [
                "9c8426cbc8b9099f",
                "ae0756d8c73f6904"
            ]
        ]
    },
    {
        "id": "597b99c23bdd8f45",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 120,
        "wires": []
    },
    {
        "id": "9071f25d324ebdd6",
        "type": "catch",
        "z": "62cb6b3a5192492c",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 1000,
        "y": 40,
        "wires": [
            [
                "df033301ab00592a"
            ]
        ]
    },
    {
        "id": "df033301ab00592a",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "set error ",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "$substringAfter(\t   error.message,\t   \"Invalid JSONata expression: \"\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "alert",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.source",
                "pt": "msg",
                "to": "error.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "log.context.flow",
                "pt": "msg",
                "to": "src",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 80,
        "wires": [
            [
                "af1395fa84ce18db",
                "221f9689529e3858"
            ]
        ]
    },
    {
        "id": "af1395fa84ce18db",
        "type": "link out",
        "z": "62cb6b3a5192492c",
        "name": "log",
        "mode": "link",
        "links": [
            "4b768188.85ab9"
        ],
        "x": 970,
        "y": 120,
        "wires": [],
        "icon": "node-red/file-in.svg",
        "l": true
    },
    {
        "id": "221f9689529e3858",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 80,
        "wires": []
    },
    {
        "id": "6242e4ca54d3c938",
        "type": "link in",
        "z": "62cb6b3a5192492c",
        "name": "sorting",
        "links": [
            "ee8a1da282ad2d1e",
            "c48b558f64f6b2cf"
        ],
        "x": 170,
        "y": 40,
        "wires": [
            [
                "6a1fb970c9a5e4ee",
                "e133f1afadfd92f8"
            ]
        ],
        "l": true,
        "info": "from sorting"
    },
    {
        "id": "6a1fb970c9a5e4ee",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 40,
        "wires": []
    },
    {
        "id": "c504f704e1b09183",
        "type": "link out",
        "z": "62cb6b3a5192492c",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 1000,
        "wires": [],
        "l": true
    },
    {
        "id": "ad8f5ad2a55df304",
        "type": "switch",
        "z": "62cb6b3a5192492c",
        "name": "update",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "update",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 240,
        "wires": [
            [
                "a339bc6cf7c45b45"
            ],
            [
                "5ade5d23cc7f45d5"
            ]
        ]
    },
    {
        "id": "e133f1afadfd92f8",
        "type": "switch",
        "z": "62cb6b3a5192492c",
        "name": "create",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "create",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 80,
        "wires": [
            [
                "5f6ff74b04442c38"
            ],
            [
                "ad8f5ad2a55df304"
            ]
        ]
    },
    {
        "id": "270b986e4cbb1c7c",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 160,
        "wires": []
    },
    {
        "id": "05c9527da2960e74",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 400,
        "wires": []
    },
    {
        "id": "ac4c9fa7698a7409",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 360,
        "wires": []
    },
    {
        "id": "9108212e9c34cb55",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 320,
        "wires": []
    },
    {
        "id": "bff03ede250919ce",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 280,
        "wires": []
    },
    {
        "id": "0c2f77c5adc4852e",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 440,
        "wires": []
    },
    {
        "id": "4c118f18e6e55899",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 520,
        "wires": []
    },
    {
        "id": "4c1e61fea5d1eff4",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 560,
        "wires": []
    },
    {
        "id": "4e30e92a7eadb581",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 600,
        "wires": []
    },
    {
        "id": "592e757d4c8ecca8",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 640,
        "wires": []
    },
    {
        "id": "6cf967d0dcd49052",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 480,
        "wires": []
    },
    {
        "id": "65453f391348cbce",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 680,
        "wires": []
    },
    {
        "id": "4cefcb6cf6d561f2",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 720,
        "wires": []
    },
    {
        "id": "b113ba0a8aba2532",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 760,
        "wires": []
    },
    {
        "id": "94642fa0d5b2b6de",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 840,
        "wires": []
    },
    {
        "id": "0301599c911e5921",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 880,
        "wires": []
    },
    {
        "id": "f079c4a3abab1315",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 920,
        "wires": []
    },
    {
        "id": "02778f4ce5fdd64b",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 960,
        "wires": []
    },
    {
        "id": "47af50d69cab6b9e",
        "type": "link out",
        "z": "62cb6b3a5192492c",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 200,
        "wires": [],
        "l": true
    },
    {
        "id": "4d35c053cc273687",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 200,
        "wires": [
            [
                "47af50d69cab6b9e"
            ]
        ]
    },
    {
        "id": "5f6ff74b04442c38",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "check linked order deal",
        "rules": [
            {
                "t": "set",
                "p": "crm.response",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"7\"                                       \t                       },\t                       \"delay\":60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               },\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Tracknumber\": \"-\"\t                       },\t                       \"delay\": 0     \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }   \t               },\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Carrier\": \"-\"\t                       },\t                       \"delay\": 0     \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }   \t               }               \t           ],\t           \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 120,
        "wires": [
            [
                "597b99c23bdd8f45",
                "162308c9961baf06"
            ]
        ]
    },
    {
        "id": "4583e1764ff118a9",
        "type": "link out",
        "z": "62cb6b3a5192492c",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 1040,
        "wires": [],
        "l": true
    },
    {
        "id": "5ade5d23cc7f45d5",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "set error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Event type `\"&crm.output.event.type&\"` is not found\"       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 1040,
        "wires": [
            [
                "4583e1764ff118a9"
            ]
        ]
    },
    {
        "id": "b70ac29862b6ceff",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 1000,
        "wires": [
            [
                "c504f704e1b09183"
            ]
        ]
    },
    {
        "id": "a339bc6cf7c45b45",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "to Purchase",
        "rules": [
            {
                "t": "set",
                "p": "crm.response",
                "pt": "msg",
                "to": "{\"messages\":[],\"data\":[],\"code\":\"200\"}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"MpOrderNumber\")\t               or\t               $lookup(crm.output.action.context, \"MpName\")\t               or\t               $lookup(crm.output.action.context, \"SrName\")\t               or \t               $lookup(crm.output.action.context, \"ProblemDescription\")\t               or\t               $lookup(crm.output.action.context, \"SrShipMethod\")\t           ) \t           and\t           crm.output.entity.row.(\t               MpOrderNumber!=null \t               and \t               MpName!=null \t               and \t               SrName!=null \t               /*\t               and \t               SrName!=\"RockyMountain\"\t               */\t               and \t               SrShipMethod!=null\t               and \t               ProblemDescription=\"-\"\t               and\t               StatusName=\"Parcel creation\" \t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"105\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 280,
        "wires": [
            [
                "bff03ede250919ce",
                "f04c3ea41b6a46ec"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "f04c3ea41b6a46ec",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "to Track-numbers getting",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"SrOrderNumber\")\t               or\t               $lookup(crm.output.action.context, \"SrPaymentCard\")\t               or \t               $lookup(crm.output.action.context, \"ProblemDescription\")\t           ) \t           and\t           crm.output.entity.row.(\t               SrOrderNumber!=null \t               and \t               SrPaymentCard!=null \t               and \t               ProblemDescription=\"-\"\t               and \t               StatusName in [\"Parcel creation\",\"Purchase\"] \t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"106\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 320,
        "wires": [
            [
                "9108212e9c34cb55",
                "1d162fe7717f34ed"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "1d162fe7717f34ed",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "to Tracking",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"Carrier\")\t               or\t               $lookup(crm.output.action.context, \"Tracknumber\")\t               or\t               $lookup(crm.output.action.context, \"DateEnteringTracknumberIntoMp\")\t               or \t               $lookup(crm.output.action.context, \"ProblemDescription\")\t           ) \t           and\t           crm.output.entity.row.(\t               Carrier!=null \t               and \t               Carrier!=\"-\" \t               and \t               ProblemDescription=\"-\"\t               and\t               Tracknumber!=\"-\" \t               and\t               Tracknumber!=null\t               and \t               DateEnteringTracknumberIntoMp!=null\t               and\t               StatusName in [\"Parcel creation\",\"Purchase\",\"Track-numbers getting\"]\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"107\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 360,
        "wires": [
            [
                "ac4c9fa7698a7409",
                "47663908ea656acf"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "47663908ea656acf",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "to Archive",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(crm.output.action.context, \"ArchiveScenario\")\t           and\t           crm.output.entity.row.(\t               ArchiveScenario!=null \t               and \t               StatusName!=\"Archive\"\t           )\t\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"108\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 400,
        "wires": [
            [
                "05c9527da2960e74",
                "e0745a422fd56803"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "162308c9961baf06",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "problem description",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               SrName in [\t                   \"PartsUnlimited\",\t                   \"TuckerRocky\",\t                   \"Autodist\",\t                   \"RockyMountain\",\t                   \"Wps\"\t               ] \t               and \t               StatusName=\"Parcel creation\" \t               and \t               ProblemDescription=null\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"17\"                                       \t                       },\t                       \"delay\":120                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }           \t           ],\t           \"code\":\"200\"     \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 160,
        "wires": [
            [
                "270b986e4cbb1c7c",
                "4d35c053cc273687"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "e0745a422fd56803",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "date label creation",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context,\"Tracknumber\")\t           )\t           and\t           crm.output.entity.row.(\t               DateLabelCreation=null\t               and \t               Tracknumber!=\"-\"\t               and \t               Tracknumber!=null\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"scenario_request\",\t                       \"context\": {\t                           \"scenario_id\": \"6\"\t                       },\t                       \"delay\": 60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id\t                   } \t               }  \t           ],\t           \"code\": \"200\" \t       }:null\t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 440,
        "wires": [
            [
                "0c2f77c5adc4852e",
                "5b351be9330954f9"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "36c44b463c0d6de3",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "total field",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(crm.output.action.context, \"FinalPrice\")\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Total\": crm.output.entity.row.FinalPrice \t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 520,
        "wires": [
            [
                "4c118f18e6e55899",
                "f1ec441744093c53"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "f1ec441744093c53",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "returned to sender",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(\t                   crm.output.action.context,\t                   \"ShipStatus\"\t               )\t           )and\t           (\t               crm.output.entity.row.(\t                   ShipStatus=\"return_to_sender\"\t                   and \t                   ProblemDescription!=\"parcel was returned to sender\"\t               )\t       \t       )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"ProblemDescription\": \"parcel was returned to sender\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 560,
        "wires": [
            [
                "4c1e61fea5d1eff4",
                "68d2bc15485e7ba4"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "68d2bc15485e7ba4",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "parcel delivered",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":((\t               $lookup(\t                   crm.output.action.context,\t                   \"Status\"\t               )\t           )and\t           (\t           crm.output.entity.row.StatusName=\"Tracking\"\t       \t       ))\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"14\"                                       \t                       },\t                       \"delay\":1209600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"14\"                                       \t                       },\t                       \"delay\":1814400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id \t                       }\t                }   \t            ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 600,
        "wires": [
            [
                "4e30e92a7eadb581",
                "0d86c9b34dfa609d"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "0d86c9b34dfa609d",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "archive scenario",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               (\t                   $lookup(\t                       crm.output.action.context,\t                       \"ShipStatus\"\t                    )\t               or\t                    $lookup(\t                       crm.output.action.context,\t                       \"Status\"\t                    )\t                )\t                and\t                (\t                   StatusName=\"Tracking\" \t                   and \t                   ShipStatus=\"delivered\"\t                )\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"update\",\t                       \"context\":{\t                           \"ArchiveScenario\":\"delivered\"\t                   \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id           \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 640,
        "wires": [
            [
                "592e757d4c8ecca8",
                "13650d563d01fa3d"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "5b351be9330954f9",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "date entering manual",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"EnterTracknumber\")\t               or \t               $lookup(crm.output.action.context, \"DateEnteringTracknumberIntoMp\")\t           ) \t           and\t           crm.output.entity.row.(\t               EnterTracknumber=\"don't enter\" \t               and \t               DateEnteringTracknumberIntoMp=null\t            )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"DateEnteringTracknumberIntoMp\": \"2023-01-01 00:01:00\"\t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 480,
        "wires": [
            [
                "36c44b463c0d6de3",
                "6cf967d0dcd49052"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "13650d563d01fa3d",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "autobuy TR, AU, PU",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(\t                   crm.output.action.context,\t                   \"ProblemDescription\"\t               ) or $lookup(\t                   crm.output.action.context,\t                   \"Status\"\t               )\t           )and\t           (\t               crm.output.entity.row.(\t                   StatusName=\"Purchase\"\t               and \t               ProblemDescription=\"-\"\t               and \t               SrName in [\t                       \"Autodist\",\t                       \"TuckerRocky\",\t                       \"PartsUnlimited\",\t                       \"Wps\"\t               ]\t               )\t       \t       )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"8\"                                       \t                       },\t                       \"delay\":60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       }  \t            ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 680,
        "wires": [
            [
                "65453f391348cbce",
                "aaf51f8047c0a7e6"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "aaf51f8047c0a7e6",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "AU, TR, PU get tracknumber",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(\t                   crm.output.action.context,\t                   \"ProblemDescription\"\t               )\t               or\t               $lookup(\t                   crm.output.action.context,\t                   \"Status\"\t               )\t           )and\t           (\t               crm.output.entity.row.(\t                   StatusName=\"Track-numbers getting\"\t               and \t               ProblemDescription=\"-\"\t               and \t               SrName in [\t                       \"Autodist\",\t                       \"TuckerRocky\",\t                       \"PartsUnlimited\",\t                       \"Wps\"\t               ]\t               and \t               (\t                       Carrier=null\t               or\t               Carrier=\"-\"\t               )\t               and \t               (\t                       Tracknumber=null\t               or\t               Tracknumber=\"-\"\t               )\t               )\t       \t       )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":240*60                          \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":480*60                          \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":720*60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":840*60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":960*60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":1200*60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       } ,\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":86400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       } ,\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":144000                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":201600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":244800                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":288000                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":302400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       }\t            ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 720,
        "wires": [
            [
                "4cefcb6cf6d561f2",
                "9c17121633344c9e"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "9c17121633344c9e",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "TR get prices and tracknumbers",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               $lookup(\t                   crm.output.action.context,\t                   \"SrOrderId\"\t               )\t               and\t               SrOrderStatus!=\"Completed\" \t               and\t               SrOrderStatus!=\"Tracknumber received\" \t               and\t               SrOrderStatus!=\"Picked Up\"\t               and\t               SrName=\"TuckerRocky\"\t               and \t               ProblemDescription=\"-\"\t               and\t               SrOrderNumber=null\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"10\"                                       \t                       },\t                       \"delay\":180                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"10\"                                       \t                       },\t                       \"delay\":14400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"10\"                                       \t                       },\t                       \"delay\":28800                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"10\"                                       \t                       },\t                       \"delay\":42000                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"10\"                                       \t                       },\t                       \"delay\":57000                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       } ,\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"10\"                                       \t                       },\t                       \"delay\":90000                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       } \t            ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 760,
        "wires": [
            [
                "b113ba0a8aba2532",
                "7c51799ca90e16d4"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "61612813b59cb8b6",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "tracknumber into mp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(\t                   crm.output.action.context,\t                   \"Tracknumber\"\t               )\t               or \t               $lookup(\t                   crm.output.action.context,\t                   \"Carrier\"\t               )\t           )\t           and\t           (\t               crm.output.entity.row.(\t                   Tracknumber!=null \t               and \t               Tracknumber!=\"-\"\t               and \t               (\t                       EnterTracknumber=\"products in order\"\t\t                    or\t                    EnterTracknumber=\"products in parcel\"\t               )   \t               and \t               DateEnteringTracknumberIntoMp=null \t               and \t               Carrier!=null \t               and \t               Carrier!=\"-\" \t               and \t               ProblemDescription=\"-\"\t               and\t               StatusName=\"Track-numbers getting\" \t           )\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"11\"                                       \t                       },\t                       \"delay\":120                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"12\"                                       \t                       },\t                       \"delay\":600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }   \t               } ,\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"12\"                                       \t                       },\t                       \"delay\":1800                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }   \t               }  \t   \t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   \t   }|\t\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 840,
        "wires": [
            [
                "94642fa0d5b2b6de",
                "328d1911a9b8f0f8"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "328d1911a9b8f0f8",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "tracknumber tracking",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":((\t               $lookup(\t                   crm.output.action.context,\t                   \"DateEnteringTracknumberIntoMp\"\t               )\t           )and\t           (crm.output.entity.row.DateEnteringTracknumberIntoMp!=null\t       ))\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":60                           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id       \t                        }\t               },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":21600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id       \t                        }\t               },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":43200                           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":86400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":129600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":172800                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":216000                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":259200                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":302400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":345600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":388800                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":432000                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":475200                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":518400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":561600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":604800                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":648000                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":691200                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":734400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":777600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":820800                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":864000                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                }          \t           ],\t           \"code\": \"200\" \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 880,
        "wires": [
            [
                "0301599c911e5921",
                "2c69546ca52f2bfb"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "2c69546ca52f2bfb",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "tracknumber to order",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(\t                   crm.output.action.context,\t                   \"DateEnteringTracknumberIntoMp\"\t               )\t           )and\t           (\t               crm.output.entity.row.DateEnteringTracknumberIntoMp!=null\t       \t       )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\": \"5\",\t                           \"scenario_id\": \"2\"                                       \t                       },\t                       \"delay\":60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\": \"5\",\t                           \"scenario_id\": \"2\"                                       \t                       },\t                       \"delay\":600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               }   \t   \t           \t           \t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 920,
        "wires": [
            [
                "f079c4a3abab1315",
                "6130f26b4d0247cd"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "6130f26b4d0247cd",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "total from parcel to order",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(crm.output.action.context, \"Total\")\t       )\t?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\": \"5\", \t                           \"scenario_id\": \"5\"                                       \t                       },\t                       \"delay\":60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 960,
        "wires": [
            [
                "02778f4ce5fdd64b",
                "b70ac29862b6ceff"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "7c51799ca90e16d4",
        "type": "change",
        "z": "62cb6b3a5192492c",
        "name": "carrier check",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(\t                   crm.output.action.context,\t                   \"Carrier\"\t               )\t           )\t           and\t           (\t               crm.output.entity.row.( \t               ProblemDescription=\"-\"\t               and\t               StatusName=\"Track-numbers getting\" \t               and\t               SrName=\"TuckerRocky\"\t               and \t               Carrier=\"UPS\"\t               and \t               $not($contains(Tracknumber, \"1Z\"))\t               and \t               Tracknumber!=\"-\"   \t           )\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"update\",\t                       \"context\":{\t                           \"ProblemDescription\": \"Wrong Carrier Name - Please Check\"                                       \t                       },\t                       \"delay\":0                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id \t                   }   \t               }],\t           \"code\": \"200\" \t       }:null\t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 800,
        "wires": [
            [
                "61612813b59cb8b6",
                "695eb280ae31bd07"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "695eb280ae31bd07",
        "type": "debug",
        "z": "62cb6b3a5192492c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 800,
        "wires": []
    },
    {
        "id": "75d3acf739c9e638",
        "type": "link in",
        "z": "bddf42db0215867b",
        "name": "sorting",
        "links": [
            "c53e7918836acc38",
            "b4c63573f89540bc"
        ],
        "x": 170,
        "y": 40,
        "wires": [
            [
                "b5ea65127c3c3327",
                "002d9f070d3369df"
            ]
        ],
        "l": true,
        "info": "from sorting"
    },
    {
        "id": "b5ea65127c3c3327",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 40,
        "wires": []
    },
    {
        "id": "ec9c0b0ce3203bf6",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "to Packaging and sending",
        "rules": [
            {
                "t": "set",
                "p": "crm.response",
                "pt": "msg",
                "to": "{\"messages\":[],\"data\":[],\"code\":200}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"Tracknumber\")\t               or\t               $lookup(crm.output.action.context, \"EnterTracknumber\")\t               or\t               $lookup(crm.output.action.context, \"DateEnteringTracknumberIntoMp\")\t               or \t               $lookup(crm.output.action.context, \"BagLink\")\t               or \t               $lookup(crm.output.action.context, \"ProblemDescription\")\t           ) \t           and\t           crm.output.entity.row.(\t               Tracknumber!=null \t               and \t               Tracknumber!=\"-\"\t               and \t               EnterTracknumber!=null \t               and \t               DateEnteringTracknumberIntoMp!=null \t               and \t               BagLink!=null \t               and \t               BagLink!=\"-\" \t               and \t               ProblemDescription=\"-\"\t               and\t               StatusName=\"Pick-up preparation\" \t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"52\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 440,
        "wires": [
            [
                "f2a2a0ac11d77908",
                "85905c38a620c4fe"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "31c59739dcb978a2",
        "type": "link out",
        "z": "bddf42db0215867b",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 1000,
        "wires": [],
        "l": true
    },
    {
        "id": "f98c960aad2f8882",
        "type": "link out",
        "z": "bddf42db0215867b",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 960,
        "wires": [],
        "l": true
    },
    {
        "id": "137ee6d989d3adb6",
        "type": "switch",
        "z": "bddf42db0215867b",
        "name": "update",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "update",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 400,
        "wires": [
            [
                "ec9c0b0ce3203bf6"
            ],
            [
                "ebd556016c04a11a"
            ]
        ]
    },
    {
        "id": "002d9f070d3369df",
        "type": "switch",
        "z": "bddf42db0215867b",
        "name": "create",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "create",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 80,
        "wires": [
            [
                "a49b3a8d7d6d0d48"
            ],
            [
                "137ee6d989d3adb6"
            ]
        ]
    },
    {
        "id": "968f9d4467b64d80",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 240,
        "wires": []
    },
    {
        "id": "1d62805df46a9504",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 520,
        "wires": []
    },
    {
        "id": "6f229de12906dddb",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 480,
        "wires": []
    },
    {
        "id": "f2a2a0ac11d77908",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 440,
        "wires": []
    },
    {
        "id": "9746f473d901c1c1",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 800,
        "wires": []
    },
    {
        "id": "4f28f7b7be15a135",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 600,
        "wires": []
    },
    {
        "id": "dc6e6012669a4d39",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 640,
        "wires": []
    },
    {
        "id": "7db66f94c1df37d5",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 680,
        "wires": []
    },
    {
        "id": "4ddc283c6f254530",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 880,
        "wires": []
    },
    {
        "id": "fc8c11331ecbabba",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 840,
        "wires": []
    },
    {
        "id": "14b82783620c1ea7",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 720,
        "wires": []
    },
    {
        "id": "922a7df2c93af25b",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 760,
        "wires": []
    },
    {
        "id": "38f5f04e72c9595f",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 560,
        "wires": []
    },
    {
        "id": "79d4af413b849ecb",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 920,
        "wires": []
    },
    {
        "id": "3fee22ae8197d041",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 280,
        "wires": []
    },
    {
        "id": "a49b3a8d7d6d0d48",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "usps",
        "rules": [
            {
                "t": "set",
                "p": "crm.response",
                "pt": "msg",
                "to": "{\"messages\":[],\"data\":[],\"code\":200}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.SrShipMethod in \t           [\t            \"First-Class Package Service\",\t            \"Priority Mail\",\t            \"Priority Mail Legal Flat Rate Envelope\",\t            \"Priority Mail Flat Rate Padded Envelope\",\t            \"Priority Mail Small Flat Rate Box\",\t            \"Priority Mail Medium Flat Rate Box\",\t            \"Priority Mail Large Flat Rate Box\",\t            \"Priority Mail Regional Rate Box A\",\t            \"Priority Mail Regional Rate Box B\",\t            \"Parcel Select Ground\",\t            \"Priority Mail Flat Rate Envelope\",\t            \"Priority Mail Cubic\",\t            \"Priority Mail Large Flat Rate Board Game Box\",\t            \"Priority Mail Medium Flat Rate Box\",\t            \"Ground Advantage\"\t               ]       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Carrier\": \"USPS\"\t                       },\t                       \"delay\": 0       \t           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   }   \t       \t               }   \t   \t           ],\t           \"code\": \"200\" \t\t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 250,
        "y": 120,
        "wires": [
            [
                "4f9048810161da82",
                "613b1ec03f6d75c1"
            ]
        ]
    },
    {
        "id": "4f9048810161da82",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 120,
        "wires": []
    },
    {
        "id": "02b5575ba01b7524",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 320,
        "wires": []
    },
    {
        "id": "ebd556016c04a11a",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "set error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Event type `\"&crm.output.event.type&\"` is not found\"       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 1000,
        "wires": [
            [
                "31c59739dcb978a2"
            ]
        ]
    },
    {
        "id": "921375c64483d73b",
        "type": "link out",
        "z": "bddf42db0215867b",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 360,
        "wires": [],
        "l": true
    },
    {
        "id": "a589868ca2f5f71c",
        "type": "catch",
        "z": "bddf42db0215867b",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 1000,
        "y": 40,
        "wires": [
            [
                "a619a92fd9bce695"
            ]
        ]
    },
    {
        "id": "a619a92fd9bce695",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "set error ",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "$substringAfter(\t   error.message,\t   \"Invalid JSONata expression: \"\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "alert",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.source",
                "pt": "msg",
                "to": "error.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "log.context.flow",
                "pt": "msg",
                "to": "src",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 80,
        "wires": [
            [
                "28613ae36fe79247",
                "7076041c4d69a6bc"
            ]
        ]
    },
    {
        "id": "28613ae36fe79247",
        "type": "link out",
        "z": "bddf42db0215867b",
        "name": "log",
        "mode": "link",
        "links": [
            "4b768188.85ab9"
        ],
        "x": 970,
        "y": 120,
        "wires": [],
        "icon": "node-red/file-in.svg",
        "l": true
    },
    {
        "id": "7076041c4d69a6bc",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 80,
        "wires": []
    },
    {
        "id": "838a0fc70c504328",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 360,
        "wires": [
            [
                "921375c64483d73b"
            ]
        ]
    },
    {
        "id": "eefa36edef2ea50f",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 960,
        "wires": [
            [
                "f98c960aad2f8882"
            ]
        ]
    },
    {
        "id": "58019965cf6a68cc",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "problem description \"-\"",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\":[\t       {\t           \"action\":{\t               \"type\":\"update\",\t               \"context\":{\t                   \"ProblemDescription\": \"-\"                                       \t                       },\t               \"delay\":0                            \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t   \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 240,
        "wires": [
            [
                "968f9d4467b64d80",
                "5eeca7be9761bf9f"
            ]
        ]
    },
    {
        "id": "5eeca7be9761bf9f",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "check linked order deal",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"7\"                                       \t                       },\t                       \"delay\":60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 280,
        "wires": [
            [
                "3fee22ae8197d041",
                "c4775e4a2227338b"
            ]
        ]
    },
    {
        "id": "c4775e4a2227338b",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "dimensions",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"16\"                                       \t                       },\t                       \"delay\":60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 320,
        "wires": [
            [
                "02b5575ba01b7524",
                "838a0fc70c504328"
            ]
        ]
    },
    {
        "id": "85905c38a620c4fe",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "to Tracking",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"WasPacked\")\t               or \t               $lookup(crm.output.action.context, \"ProblemDescription\")\t           ) \t           and\t           crm.output.entity.row.(\t               WasPacked=\"yes\" \t               and \t               ProblemDescription=\"-\"\t               and\t               StatusName=\"Packaging and sending\" \t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"53\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 480,
        "wires": [
            [
                "6f229de12906dddb",
                "73226f9eac7435c9"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "73226f9eac7435c9",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "to Archive",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(crm.output.action.context, \"ArchiveScenario\")\t           and\t           crm.output.entity.row.(ArchiveScenario!=null and StatusName!=\"Archive\")\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"54\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 520,
        "wires": [
            [
                "1d62805df46a9504",
                "8868fdce2daedef1"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "8868fdce2daedef1",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "total field",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(crm.output.action.context, \"FinalPrice\")\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Total\": crm.output.entity.row.($number(FinalPrice)+1) \t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 560,
        "wires": [
            [
                "101268757c0520e9",
                "38f5f04e72c9595f"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "d7933e31a0e4a92b",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "returned to sender",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":((\t               $lookup(\t                   crm.output.action.context,\t                   \"ShipStatus\"\t               )\t           )and\t           (\t           crm.output.entity.row.ShipStatus=\"return_to_sender\"\t       \t       ))\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"ProblemDescription\": \"parcel was returned to sender\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 800,
        "wires": [
            [
                "3fe7b9b5b437342e",
                "9746f473d901c1c1"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "3fe7b9b5b437342e",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "parcel delivered",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":((\t               $lookup(\t                   crm.output.action.context,\t                   \"Status\"\t               )\t           )and\t           crm.output.entity.row.StatusName=\"Tracking\"\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"14\"                                       \t                       },\t                       \"delay\":1209600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               }   \t       },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"14\"                                       \t                       },\t                       \"delay\":1814400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id \t                       }\t                }   \t            ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 840,
        "wires": [
            [
                "fc8c11331ecbabba",
                "e73637817fa7b615"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "73313b3b1bf2676f",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "tracknumber into mp - check",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"Tracknumber\")\t               or\t               $lookup(crm.output.action.context, \"DateEnteringTracknumberIntoMp\")\t               or \t               $lookup(crm.output.action.context, \"ProblemDescription\")\t           ) \t           and\t           crm.output.entity.row.(\t               Tracknumber!=null\t                and\t                DateEnteringTracknumberIntoMp=null\t                and  \t                ProblemDescription=\"-\"\t                and\t                StatusName=\"Pick-up preparation\" \t           )\t       \t       \t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"12\"                                       \t                       \t                       },\t                       \"delay\":120                            \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   \t                   }   \t       \t               \t               \t               \t               }   \t   \t           \t           \t           \t           ],\t           \"code\": \"200\" \t\t       \t       \t       \t       }:null\t\t   \t   \t   }|\t\t\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 680,
        "wires": [
            [
                "8e7f34048a42c91b",
                "7db66f94c1df37d5"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "70842c8a4bf0ca03",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "delete rof reserve",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t               $lookup(\t                   crm.output.action.context,\t                   \"WasPacked\"\t               )\t           and\t           crm.output.entity.row.( \t               SrName=\"RollunOffice\"\t               and \t               ProblemDescription=\"-\"\t               and \t               Sender!=null\t               and \t               WasPacked!=null\t               and \t               DateRofReservation!=null\t               and \t               DateRofSubtraction=null\t               )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"scenario_request\",\t                       \"context\": {\t                           \"scenario_id\": \"19\"\t                       },\t                       \"delay\": 60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 920,
        "wires": [
            [
                "eefa36edef2ea50f",
                "79d4af413b849ecb"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "7323df2a347a64ef",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "tracknumber into mp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":((\t               $lookup(\t                   crm.output.action.context,\t                   \"Tracknumber\"\t               )\t           )\t           and\t           crm.output.entity.row.(\t               /*(\t                   MpName=\"Ebay Plaisir\"\t                   or\t                   MpName=\"Ebay Rollun\"\t               )\t               and */\t               Tracknumber!=null \t               and \t               Tracknumber!=\"-\"\t               and \t               (\t                    EnterTracknumber=\"products in order\"\t                    or\t                    EnterTracknumber=\"products in parcel\"\t               )   \t               and \t               DateEnteringTracknumberIntoMp=null \t               and \t               BagLink!=null \t               and \t               BagLink!=\"-\" \t               and \t               ProblemDescription=\"-\"\t               and\t               StatusName=\"Pick-up preparation\" \t           )\t       \t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"11\"                                       \t                       },\t                       \"delay\":120                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"12\"                                       \t                       },\t                       \"delay\":900                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               }   \t   \t           \t           \t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   \t   }|\t\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 640,
        "wires": [
            [
                "73313b3b1bf2676f",
                "dc6e6012669a4d39"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "5459aa01553a0fea",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "tracknumber tracking",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(crm.output.action.context, \"WasPacked\")\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":60                           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id       \t                        }\t               },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":21600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id       \t                        }\t               },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":43200                           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":86400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":129600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":172800                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":216000                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":259200                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":302400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":345600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":388800                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":432000                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":475200                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":518400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":561600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":604800                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":648000                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":691200                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":734400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":777600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":820800                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":864000                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                }          \t           ],\t           \"code\": \"200\" \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 760,
        "wires": [
            [
                "d7933e31a0e4a92b",
                "922a7df2c93af25b"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "101268757c0520e9",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "total from parcel to order",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(crm.output.action.context, \"Total\")\t       )\t?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\": \"5\", \t                           \"scenario_id\": \"5\"                                       \t                       },\t                       \"delay\":60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 600,
        "wires": [
            [
                "7323df2a347a64ef",
                "4f28f7b7be15a135"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "e73637817fa7b615",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "create rof reserve",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t               $lookup(\t                   crm.output.action.context,\t                   \"ProblemDescription\"\t               )\t               or\t               $lookup(\t                   crm.output.action.context,\t                   \"Sender\"\t               )\t           )and(\t           crm.output.entity.row.(\t               SrName=\"RollunOffice\"\t               and \t               ProblemDescription=\"-\"\t               and \t               Sender!=null\t               and \t               DateRofReservation=null\t               )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"scenario_request\",\t                       \"context\": {\t                           \"scenario_id\": \"18\"\t                       },\t                       \"delay\": 60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 880,
        "wires": [
            [
                "70842c8a4bf0ca03",
                "4ddc283c6f254530"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "8e7f34048a42c91b",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "tracknumber to order",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":((\t               $lookup(\t                   crm.output.action.context,\t                   \"DateEnteringTracknumberIntoMp\"\t               )\t           )\t           and\t           crm.output.entity.row.DateEnteringTracknumberIntoMp!=null\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\": \"5\", \t                           \"scenario_id\": \"2\"                                       \t                       },\t                       \"delay\":60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\": \"5\", \t                           \"scenario_id\": \"2\"                                       \t                       },\t                       \"delay\":600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               }   \t   \t           \t           \t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 720,
        "wires": [
            [
                "5459aa01553a0fea",
                "14b82783620c1ea7"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "814e4e58aa630038",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 160,
        "wires": []
    },
    {
        "id": "a486df7336b43eec",
        "type": "debug",
        "z": "bddf42db0215867b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 200,
        "wires": []
    },
    {
        "id": "613b1ec03f6d75c1",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "fedex",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.SrShipMethod in \t           [\t            \"2Day\",\t            \"Standard Overnight\",\t            \"Express Saver\",\t            \"Home Delivery\"\t               ]       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Carrier\": \"FEDEX\"\t                       },\t                       \"delay\": 0       \t           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   }   \t       \t               }   \t   \t           ],\t           \"code\": \"200\" \t\t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 250,
        "y": 160,
        "wires": [
            [
                "814e4e58aa630038",
                "e5ef030c5c6fd478"
            ]
        ]
    },
    {
        "id": "e5ef030c5c6fd478",
        "type": "change",
        "z": "bddf42db0215867b",
        "name": "ups",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.SrShipMethod in \t           [\t            \"Ground\"\t               ]       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Carrier\": \"UPS\"\t                       },\t                       \"delay\": 0       \t           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   }   \t       \t               }   \t   \t           ],\t           \"code\": \"200\" \t\t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 250,
        "y": 200,
        "wires": [
            [
                "58019965cf6a68cc",
                "a486df7336b43eec"
            ]
        ]
    },
    {
        "id": "8bf50d58ba491581",
        "type": "link in",
        "z": "e021d1d1bf02799b",
        "name": "sorting",
        "links": [
            "0bf3f9a951080b35",
            "0235e897ffb32563"
        ],
        "x": 170,
        "y": 40,
        "wires": [
            [
                "78a9ca8926bfc75d",
                "6cba8d5d2230ef83"
            ]
        ],
        "l": true,
        "info": "from sorting"
    },
    {
        "id": "78a9ca8926bfc75d",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 40,
        "wires": []
    },
    {
        "id": "914c501580a85811",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "to Bag filling",
        "rules": [
            {
                "t": "set",
                "p": "crm.response",
                "pt": "msg",
                "to": "{\"messages\":[],\"data\":[],\"code\":200}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.StatusName=\"Bag creation\"\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"18\"\t                       \t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               }   \t   \t           \t           \t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   \t   }|\t\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 240,
        "wires": [
            [
                "b79dd2fa09317aee",
                "473b1d1b0d4f016c"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "e618aa5b6519afd3",
        "type": "link out",
        "z": "e021d1d1bf02799b",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 720,
        "wires": [],
        "l": true
    },
    {
        "id": "883af1ef0c25764e",
        "type": "link out",
        "z": "e021d1d1bf02799b",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 680,
        "wires": [],
        "l": true
    },
    {
        "id": "92bfec63dcc89ad2",
        "type": "switch",
        "z": "e021d1d1bf02799b",
        "name": "update",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "update",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 200,
        "wires": [
            [
                "914c501580a85811"
            ],
            [
                "ba9d810c57fd5d00"
            ]
        ]
    },
    {
        "id": "52b9d198e783572f",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 400,
        "wires": []
    },
    {
        "id": "c890a1489f3ce190",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 360,
        "wires": []
    },
    {
        "id": "d538ac2968a3908b",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 320,
        "wires": []
    },
    {
        "id": "9144276f1254e350",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 280,
        "wires": []
    },
    {
        "id": "b79dd2fa09317aee",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 240,
        "wires": []
    },
    {
        "id": "f06e7d932fadf7c0",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 440,
        "wires": []
    },
    {
        "id": "09fe240cc31d0a9c",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 480,
        "wires": []
    },
    {
        "id": "cd526eb7b5d36e5a",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 520,
        "wires": []
    },
    {
        "id": "d9de69c283e52cef",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 560,
        "wires": []
    },
    {
        "id": "60eb3a8fcbc51c6f",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 600,
        "wires": []
    },
    {
        "id": "9d2f5ca92b72f80f",
        "type": "catch",
        "z": "e021d1d1bf02799b",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 1000,
        "y": 40,
        "wires": [
            [
                "6e002940bcb340fe"
            ]
        ]
    },
    {
        "id": "6e002940bcb340fe",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "set error ",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "$substringAfter(\t   error.message,\t   \"Invalid JSONata expression: \"\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "alert",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.source",
                "pt": "msg",
                "to": "error.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "log.context.flow",
                "pt": "msg",
                "to": "src",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 80,
        "wires": [
            [
                "d4dc75af76e83c87",
                "9fa81febba139f8c"
            ]
        ]
    },
    {
        "id": "d4dc75af76e83c87",
        "type": "link out",
        "z": "e021d1d1bf02799b",
        "name": "log",
        "mode": "link",
        "links": [
            "4b768188.85ab9"
        ],
        "x": 970,
        "y": 120,
        "wires": [],
        "icon": "node-red/file-in.svg",
        "l": true
    },
    {
        "id": "9fa81febba139f8c",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 80,
        "wires": []
    },
    {
        "id": "26b6cb7c8e033ad1",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 640,
        "wires": []
    },
    {
        "id": "980fd897e42af7e3",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 680,
        "wires": [
            [
                "883af1ef0c25764e"
            ]
        ]
    },
    {
        "id": "ba9d810c57fd5d00",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "set error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Event type `\"&crm.output.event.type&\"` is not found\"       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 720,
        "wires": [
            [
                "e618aa5b6519afd3"
            ]
        ]
    },
    {
        "id": "473b1d1b0d4f016c",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "to Payment",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               SrOrderNumber!=null\t               and \t               StatusName=\"Placing order\") \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"20\"\t                       \t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               }   \t   \t           \t           \t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   \t   }|\t\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 280,
        "wires": [
            [
                "9144276f1254e350",
                "5c9c44daeca9b3fa"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "5c9c44daeca9b3fa",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "to Labels creation",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               SrPaymentCard!=null\t               and \t               BagStatus=\"changed statuses\"\t               and \t               StatusName=\"Payment\"\t               ) \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"21\"\t                       \t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               }   \t   \t           \t           \t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   \t   }|\t\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 320,
        "wires": [
            [
                "d538ac2968a3908b",
                "f878aad55e1ebb2f"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "f878aad55e1ebb2f",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "to Packaging",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               BagStatus=\"prepared information\" \t               and \t               StatusName=\"Labels creation information preparation\"\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"22\"\t                       \t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               }   \t   \t           \t           \t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   \t   }|\t\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 360,
        "wires": [
            [
                "c890a1489f3ce190",
                "3ab6f2fdc3e3fb00"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "3ab6f2fdc3e3fb00",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "to Archive",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(\t               crm.output.action.context,\t               \"ArchiveScenario\"\t           )\t           and\t           crm.output.entity.row.(\t               ArchiveScenario!=null \t               and \t               StatusName!=\"Archive\"\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"24\"\t                       },\t                       \"delay\": 0    \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id    \t                   }  \t               }  \t           ],\t           \"code\": \"200\" \t       }:null\t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 400,
        "wires": [
            [
                "52b9d198e783572f",
                "ade63b7191e76771"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "ade63b7191e76771",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "completed order",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"BagStatus\")\t           ) \t           and\t           crm.output.entity.row.(\t               SrOrderNumber!=null\t               and \t               BagStatus=\"placed order\"\t               ) \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"BagStatus\": \"completed order\"                      \t                       },\t                       \"delay\": 0       \t           \t                   \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               }   \t   \t           \t           \t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   \t   }|\t\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 440,
        "wires": [
            [
                "f06e7d932fadf7c0",
                "b5a62920df15f04c"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "b5a62920df15f04c",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "bag was packed",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"BagStatus\")\t           ) \t           and\t           crm.output.entity.row.BagStatus=\"packed bag\"\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"ArchiveScenario\": \"was_packaged\"                      \t                       },\t                       \"delay\": 0       \t           \t                   \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               }   \t   \t           \t           \t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   \t   }|\t\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 480,
        "wires": [
            [
                "09fe240cc31d0a9c",
                "72d2a5abdf1fa531"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "2e8fe4b5fec00ac3",
        "type": "comment",
        "z": "e021d1d1bf02799b",
        "name": "",
        "info": "was_packaged - was_packed",
        "x": 100,
        "y": 480,
        "wires": []
    },
    {
        "id": "72d2a5abdf1fa531",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "get tracknumber PU",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":((\t               $lookup(crm.output.action.context, \"Status\")\t           ) \t           and\t           crm.output.entity.row.(\t               SrOrderNumber!=null\t               and \t               Tracknumber=\"-\"\t               and \t               ProblemDescription=\"-\"\t               and \t               SrName=\"PartsUnlimited\"\t               and \t               StatusName=\"Labels creation information preparation\"\t               ) \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":21600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id       \t                        }\t               },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":43200                           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":64800                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":86400                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"9\"                                       \t                       },\t                       \"delay\":129600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                }   \t   \t           \t           \t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   \t   }|\t\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 520,
        "wires": [
            [
                "cd526eb7b5d36e5a",
                "eeaab7c470797deb"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "eeaab7c470797deb",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "tracknumber tracking",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"Tracknumber\")\t           ) \t           and\t           crm.output.entity.row.(\t               Tracknumber!=null\t       and\t       Tracknumber!=\"-\"\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":21600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id       \t                        }\t               },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":100800                           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":273600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":532800                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"13\"                                       \t                       },\t                       \"delay\":705600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                }   \t   \t           \t           \t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 560,
        "wires": [
            [
                "d9de69c283e52cef",
                "7aef0c36ce6a3bb3"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "7aef0c36ce6a3bb3",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "prices into pickup",
        "rules": [
            {
                "t": "set",
                "p": "crm.output.entity.row.FinalPrice",
                "pt": "msg",
                "to": "crm.output.entity.row.FinalPrice=null ? 0 : $number(crm.output.entity.row.FinalPrice)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"FinalPrice\")\t           ) \t           and\t           $number(crm.output.entity.row.FinalPrice)>=3\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"scenario_request\",\t                       \"context\": {\t                           \"scenario_id\": \"24\"\t                           },\t                       \"delay\": 60    \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   \t                   }   \t       \t               \t               \t               }   \t   \t           \t           \t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   \t   }|\t\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 600,
        "wires": [
            [
                "60eb3a8fcbc51c6f",
                "5f6c0c7fec25ad53"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "5f6c0c7fec25ad53",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "items into bag",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"Status\")\t           ) \t           and\t           crm.output.entity.row.(\t               FinalPrice=0\t               and \t               StatusName=\"Labels creation information preparation\"\t               ) \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"25\"                                       \t                       },\t                       \"delay\":60                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id       \t                        }\t               },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"25\"                                       \t                       },\t                       \"delay\":1800                           \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                },\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"25\"                                       \t                       },\t                       \"delay\":3600                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id  \t                       } \t                }\t           ],\t           \"code\": \"200\" \t\t       \t       \t       }:null\t\t   \t   }|\t\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 640,
        "wires": [
            [
                "26b6cb7c8e033ad1",
                "980fd897e42af7e3"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "6cba8d5d2230ef83",
        "type": "switch",
        "z": "e021d1d1bf02799b",
        "name": "create",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "create",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 80,
        "wires": [
            [
                "d257b5d11e4d6d7f"
            ],
            [
                "92bfec63dcc89ad2"
            ]
        ]
    },
    {
        "id": "d257b5d11e4d6d7f",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "problem description \"-\"",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\":[\t       {\t           \"action\":{\t               \"type\":\"update\",\t               \"context\":{\t                   \"ProblemDescription\": \"-\"                                       \t                       },\t               \"delay\":0                            \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t   \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : (payload.data ~>$append(crm.response.data))",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 120,
        "wires": [
            [
                "89701de65905b04f",
                "8b123e1a1a50373b"
            ]
        ]
    },
    {
        "id": "8b123e1a1a50373b",
        "type": "change",
        "z": "e021d1d1bf02799b",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 160,
        "wires": [
            [
                "eafbc3303d5fa264"
            ]
        ]
    },
    {
        "id": "89701de65905b04f",
        "type": "debug",
        "z": "e021d1d1bf02799b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 120,
        "wires": []
    },
    {
        "id": "eafbc3303d5fa264",
        "type": "link out",
        "z": "e021d1d1bf02799b",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 160,
        "wires": [],
        "l": true
    },
    {
        "id": "5a5893f74d23b179",
        "type": "link in",
        "z": "cd39ac09273f5605",
        "name": "sorting",
        "links": [
            "834c8a076715c6cc"
        ],
        "x": 170,
        "y": 40,
        "wires": [
            [
                "ba24041c56d164a4",
                "6d94564063520481"
            ]
        ],
        "l": true,
        "info": "from sorting"
    },
    {
        "id": "d9978c446c41bb1a",
        "type": "catch",
        "z": "cd39ac09273f5605",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 1000,
        "y": 40,
        "wires": [
            [
                "4d6a9bb330dc3aae"
            ]
        ]
    },
    {
        "id": "4d6a9bb330dc3aae",
        "type": "change",
        "z": "cd39ac09273f5605",
        "name": "set error ",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "$substringAfter(\t   error.message,\t   \"Invalid JSONata expression: \"\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "alert",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.source",
                "pt": "msg",
                "to": "error.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "log.context.flow",
                "pt": "msg",
                "to": "src",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 80,
        "wires": [
            [
                "3231c25c463c4dcb",
                "871098f97f016260"
            ]
        ]
    },
    {
        "id": "3231c25c463c4dcb",
        "type": "link out",
        "z": "cd39ac09273f5605",
        "name": "log",
        "mode": "link",
        "links": [
            "4b768188.85ab9"
        ],
        "x": 970,
        "y": 120,
        "wires": [],
        "icon": "node-red/file-in.svg",
        "l": true
    },
    {
        "id": "871098f97f016260",
        "type": "debug",
        "z": "cd39ac09273f5605",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 80,
        "wires": []
    },
    {
        "id": "ba24041c56d164a4",
        "type": "debug",
        "z": "cd39ac09273f5605",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 40,
        "wires": []
    },
    {
        "id": "6d94564063520481",
        "type": "switch",
        "z": "cd39ac09273f5605",
        "name": "create",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "create",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 80,
        "wires": [
            [
                "1a6e484053e105ea"
            ],
            [
                "46fb7f0221f973e4"
            ]
        ]
    },
    {
        "id": "46fb7f0221f973e4",
        "type": "switch",
        "z": "cd39ac09273f5605",
        "name": "update",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "update",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 200,
        "wires": [
            [
                "df78935203b9c65d"
            ],
            [
                "755de281c643ac07"
            ]
        ]
    },
    {
        "id": "df78935203b9c65d",
        "type": "change",
        "z": "cd39ac09273f5605",
        "name": "to Waiting for receiving",
        "rules": [
            {
                "t": "set",
                "p": "crm.response",
                "pt": "msg",
                "to": "{\"messages\":[],\"data\":[],\"code\":200}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               StatusName=\"Deciding how to receive\"\t               and\t               MpReturnNumber!=null\t               and \t               MpOrderNumber!=null\t               and\t               MpDateOpened!=null\t               and\t               LabelCreator in [\"MP\",\"Rlln\",\"Sr\"]\t               and \t               ReturnLocation!=null \t               and\t               ReturnLocation!=\"none\"\t               and \t               ProblemDescription=\"-\"\t               and \t               MpName!=null\t               and \t               MpRetReason!=null\t               and \t               SrName!=null\t               and \t               DealStatus=\"authorized_waiting_for_receiving\"\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"60\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 240,
        "wires": [
            [
                "01bdf40c46390bed",
                "9d59e714d7f63505"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "1a6e484053e105ea",
        "type": "change",
        "z": "cd39ac09273f5605",
        "name": "problem description \"-\"",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\":[\t       {\t           \"action\":{\t               \"type\":\"update\",\t               \"context\":{\t                   \"ProblemDescription\": \"-\"                                       \t                       },\t               \"delay\":0                            \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t   \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : (payload.data ~>$append(crm.response.data))",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 120,
        "wires": [
            [
                "5af34630b46d2c7d",
                "5982c1a2ddb3b9eb"
            ]
        ]
    },
    {
        "id": "5982c1a2ddb3b9eb",
        "type": "change",
        "z": "cd39ac09273f5605",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 160,
        "wires": [
            [
                "ae44b60f50683fd8"
            ]
        ]
    },
    {
        "id": "5af34630b46d2c7d",
        "type": "debug",
        "z": "cd39ac09273f5605",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 120,
        "wires": []
    },
    {
        "id": "ae44b60f50683fd8",
        "type": "link out",
        "z": "cd39ac09273f5605",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 160,
        "wires": [],
        "l": true
    },
    {
        "id": "01bdf40c46390bed",
        "type": "debug",
        "z": "cd39ac09273f5605",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 240,
        "wires": []
    },
    {
        "id": "9d59e714d7f63505",
        "type": "change",
        "z": "cd39ac09273f5605",
        "name": "to Return closing",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               (\t                   StatusName=\"Deciding how to receive\"\t               and\t               MpReturnNumber!=null\t               and \t               MpOrderNumber!=null\t               and\t               MpDateOpened!=null\t               and\t               LabelCreator=\"none\"\t               and\t               ReturnLocation=\"none\"\t               and \t               ProblemDescription=\"-\"\t               )\t               or\t               (\t                   StatusName=\"Waiting for receiving\"\t               and\t               DealStatus in [\t                       \"authorized_waiting_for_receiving\",\t                       \"authorized_waiting_for_sending_and_replacement\"\t                   ]\t               and \t               ReturnCondition!=null\t               and\t               ReturnCondition!=\"was_not_shipped\"\t               and\t               ProblemDescription=\"-\"\t               )\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"61\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 280,
        "wires": [
            [
                "5efd37e0c7b568f6",
                "31d729963713bcff"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "5efd37e0c7b568f6",
        "type": "debug",
        "z": "cd39ac09273f5605",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 280,
        "wires": []
    },
    {
        "id": "31d729963713bcff",
        "type": "change",
        "z": "cd39ac09273f5605",
        "name": "to Archive",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(crm.output.action.context, \"DealStatus\")\t               and\t           crm.output.entity.row.DealStatus=\"closed\"\t       )\t       or\t       (\t               $lookup(crm.output.action.context, \"ArchiveScenario\")\t           and\t           crm.output.entity.row.(\t               ArchiveScenario!=null \t               and \t               StatusName!=\"Archive\")\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"62\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 320,
        "wires": [
            [
                "f8677170ef14a321",
                "d924f2db4e1c751e"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "f8677170ef14a321",
        "type": "debug",
        "z": "cd39ac09273f5605",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 320,
        "wires": []
    },
    {
        "id": "d924f2db4e1c751e",
        "type": "change",
        "z": "cd39ac09273f5605",
        "name": "deal creation",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"Status\")\t               /*\t               or\t               $lookup(crm.output.action.context, \"LabelCreator\")\t               or\t               $lookup(crm.output.action.context, \"ReturnLocation\")\t               or \t               $lookup(crm.output.action.context, \"ProblemDescription\")\t               */\t           ) \t           and\t           crm.output.entity.row.(\t               StatusName=\"Waiting for receiving\"\t               and\t               LabelCreator!=null\t               and\t               ReturnLocation!=null\t               and \t               ProblemDescription=\"-\"\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"26\"                                       \t                       },\t                       \"delay\": 60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 360,
        "wires": [
            [
                "af7d190d8888f565",
                "258c890db4d497a4"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "af7d190d8888f565",
        "type": "debug",
        "z": "cd39ac09273f5605",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 360,
        "wires": []
    },
    {
        "id": "258c890db4d497a4",
        "type": "change",
        "z": "cd39ac09273f5605",
        "name": "item not shipped ebay",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"Status\")\t           ) \t           and\t           crm.output.entity.row.(\t               StatusName=\"Waiting for receiving\"\t               and\t               MpName in [\"Ebay Rollun\",\"Ebay Plaisir\"]\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"27\"                                       \t                       },\t                       \"delay\": 20160*60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 400,
        "wires": [
            [
                "a32865134491d2b0",
                "0a03631e349a4049"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "a32865134491d2b0",
        "type": "debug",
        "z": "cd39ac09273f5605",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 400,
        "wires": []
    },
    {
        "id": "0a03631e349a4049",
        "type": "change",
        "z": "cd39ac09273f5605",
        "name": "item not shipped amazon",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"Status\")\t           ) \t           and\t           crm.output.entity.row.(\t               StatusName=\"Waiting for receiving\"\t               and\t               MpName=\"Amazon Shoptimistic\"\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"27\"                                       \t                       },\t                       \"delay\": 43200*60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 440,
        "wires": [
            [
                "8e6b4e6759f016e0",
                "665c128ecba1fe51"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "8e6b4e6759f016e0",
        "type": "debug",
        "z": "cd39ac09273f5605",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 440,
        "wires": []
    },
    {
        "id": "665c128ecba1fe51",
        "type": "change",
        "z": "cd39ac09273f5605",
        "name": "item not shipped to parcels",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"Status\")\t               or\t               $lookup(crm.output.action.context, \"ReturnCondition\")\t           ) \t           and\t           crm.output.entity.row.(\t               StatusName=\"Waiting for receiving\"\t               and\t               ReturnCondition=\"was_not_shipped\"\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\":\"16\", \t                           \"scenario_id\": \"28\"                                      \t                       },\t                       \"delay\": 60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\":\"15\", \t                           \"scenario_id\": \"28\"                                         \t                       },\t                       \"delay\": 60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 480,
        "wires": [
            [
                "fa5c08242cee18f4",
                "c08028d940ed11d3"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "fa5c08242cee18f4",
        "type": "debug",
        "z": "cd39ac09273f5605",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 480,
        "wires": []
    },
    {
        "id": "9ba06a36a5669d1c",
        "type": "link out",
        "z": "cd39ac09273f5605",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 560,
        "wires": [],
        "l": true
    },
    {
        "id": "9112ceb24c1119c8",
        "type": "link out",
        "z": "cd39ac09273f5605",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 520,
        "wires": [],
        "l": true
    },
    {
        "id": "c08028d940ed11d3",
        "type": "change",
        "z": "cd39ac09273f5605",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 520,
        "wires": [
            [
                "9112ceb24c1119c8"
            ]
        ]
    },
    {
        "id": "755de281c643ac07",
        "type": "change",
        "z": "cd39ac09273f5605",
        "name": "set error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Event type `\"&crm.output.event.type&\"` is not found\"       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 560,
        "wires": [
            [
                "9ba06a36a5669d1c"
            ]
        ]
    },
    {
        "id": "1ce10234eb88573f",
        "type": "change",
        "z": "cd39ac09273f5605",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 180,
        "wires": [
            [
                "8db723e502dce30d"
            ]
        ]
    },
    {
        "id": "8db723e502dce30d",
        "type": "link out",
        "z": "cd39ac09273f5605",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 1120,
        "y": 180,
        "wires": [],
        "l": true
    },
    {
        "id": "44226f3891bee974",
        "type": "link in",
        "z": "d7cd6c87a33b6389",
        "name": "sorting",
        "links": [
            "fd43e94179d44d1e"
        ],
        "x": 170,
        "y": 40,
        "wires": [
            [
                "e20d741e97f9fd6a",
                "221e1c6fdd95d470"
            ]
        ],
        "l": true,
        "info": "from sorting"
    },
    {
        "id": "822b07ab150d570c",
        "type": "catch",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 1000,
        "y": 40,
        "wires": [
            [
                "511a828c290e0993"
            ]
        ]
    },
    {
        "id": "511a828c290e0993",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "set error ",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "$substringAfter(\t   error.message,\t   \"Invalid JSONata expression: \"\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "alert",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.source",
                "pt": "msg",
                "to": "error.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "log.context.flow",
                "pt": "msg",
                "to": "src",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 80,
        "wires": [
            [
                "82218e7cee0aef8f",
                "5fbf2bdd106cecfe"
            ]
        ]
    },
    {
        "id": "82218e7cee0aef8f",
        "type": "link out",
        "z": "d7cd6c87a33b6389",
        "name": "log",
        "mode": "link",
        "links": [
            "4b768188.85ab9"
        ],
        "x": 970,
        "y": 120,
        "wires": [],
        "icon": "node-red/file-in.svg",
        "l": true
    },
    {
        "id": "5fbf2bdd106cecfe",
        "type": "debug",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 80,
        "wires": []
    },
    {
        "id": "e20d741e97f9fd6a",
        "type": "debug",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 40,
        "wires": []
    },
    {
        "id": "221e1c6fdd95d470",
        "type": "switch",
        "z": "d7cd6c87a33b6389",
        "name": "create",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "create",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 80,
        "wires": [
            [
                "f830e9a6011e693e"
            ],
            [
                "137caadb8d5b9247"
            ]
        ]
    },
    {
        "id": "137caadb8d5b9247",
        "type": "switch",
        "z": "d7cd6c87a33b6389",
        "name": "update",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "update",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 200,
        "wires": [
            [
                "326e2d9c43438478"
            ],
            [
                "b150c39bf34d9335"
            ]
        ]
    },
    {
        "id": "326e2d9c43438478",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "to Mp return autorization",
        "rules": [
            {
                "t": "set",
                "p": "crm.response",
                "pt": "msg",
                "to": "{\"messages\":[],\"data\":[],\"code\":200}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               (\t                   StatusName=\"Sr_return_number_getting\"\t               and\t               SrReturnNumber!=null\t               and \t               MpOrderNumber!=null\t               and\t               MpReturnNumber!=null\t               and\t               LabelCreator in [\"Rlln\",\"Sr\"]\t               and \t               ReturnLocation!=null \t               and \t               ProblemDescription=\"-\"\t               and \t               MpRetReason!=null\t               and \t               SrName!=null\t               )\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"72\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 240,
        "wires": [
            [
                "f7cdfe83962fed49",
                "21969ba3a84fc4fc"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "f830e9a6011e693e",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "problem description \"-\"",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\":[\t       {\t           \"action\":{\t               \"type\":\"update\",\t               \"context\":{\t                   \"ProblemDescription\": \"-\"                                       \t                       },\t               \"delay\":0                            \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t   \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : (payload.data ~>$append(crm.response.data))",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 120,
        "wires": [
            [
                "1d50ef8541182218",
                "3f2c2e31d0881122"
            ]
        ]
    },
    {
        "id": "3f2c2e31d0881122",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 160,
        "wires": [
            [
                "8104b9fc57535414"
            ]
        ]
    },
    {
        "id": "1d50ef8541182218",
        "type": "debug",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 120,
        "wires": []
    },
    {
        "id": "8104b9fc57535414",
        "type": "link out",
        "z": "d7cd6c87a33b6389",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 160,
        "wires": [],
        "l": true
    },
    {
        "id": "f7cdfe83962fed49",
        "type": "debug",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 240,
        "wires": []
    },
    {
        "id": "21969ba3a84fc4fc",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "to Waiting for sending",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               StatusName=\"Mp_return_autorization\"\t               and\t               DealStatus=\"authorized\"\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"73\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 280,
        "wires": [
            [
                "5a1fe623f8b67477",
                "3df305137be6bc9c"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "5a1fe623f8b67477",
        "type": "debug",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 280,
        "wires": []
    },
    {
        "id": "b9afcb9847e47e9e",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "to Archive",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               (\t                   StatusName=\"Waiting_for_refund\"\t               and\t               ProblemDescription=\"-\"\t               and \t               SrRefundedSum!=null\t               and \t               ReturnCondition!=null\t               )\t               or\t               (\t                   StatusName=\"Waiting_for_sending\"\t               and\t               ProblemDescription=\"-\"\t               and \t               ReturnCondition=\"was_not_shipped\"\t               )\t           )\t       \t       )\t       or\t       (\t               $lookup(crm.output.action.context, \"ArchiveScenario\")\t           and\t           crm.output.entity.row.(\t               ArchiveScenario!=null \t               and \t               StatusName!=\"Archive\")\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"75\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 360,
        "wires": [
            [
                "68fb489b80af0d89",
                "75ff0f2ab215eb46"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "68fb489b80af0d89",
        "type": "debug",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 360,
        "wires": []
    },
    {
        "id": "75ff0f2ab215eb46",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "get tracknumber status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context,\"Status\")\t                or \t                $lookup(crm.output.action.context,\"ProblemDescription\")\t            )\t           and\t           crm.output.entity.row.(\t               StatusName=\"Waiting_for_sending\"\t               and\t               ProblemDescription=\"-\"\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 400,
        "wires": [
            [
                "6cd8f7ced7d79ee9",
                "1a2a55cf3eb71864"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "6cd8f7ced7d79ee9",
        "type": "debug",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 400,
        "wires": []
    },
    {
        "id": "1a2a55cf3eb71864",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "accept refund",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               StatusName=\"Waiting_for_refund\"\t               and\t               SrRefundedSum!=null\t               and \t               ProblemDescription=\"-\"\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"update\",\t                       \"context\":{\t                           \"ReturnCondition\": \"was_refunded\"                                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 440,
        "wires": [
            [
                "08b98c7ec2a27e14",
                "273666f65b297316"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "08b98c7ec2a27e14",
        "type": "debug",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 440,
        "wires": []
    },
    {
        "id": "273666f65b297316",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "refund notification",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(\t               crm.output.action.context,\t               \"Status\"\t               )and\t           crm.output.entity.row.StatusName=\"Waiting_for_refund\"\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"31\"                                         \t                       },\t                       \"delay\": 1800*60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 480,
        "wires": [
            [
                "76bc47261a5c5533",
                "70cd39464d983c31"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "76bc47261a5c5533",
        "type": "debug",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 480,
        "wires": []
    },
    {
        "id": "a3b016961b1df97c",
        "type": "link out",
        "z": "d7cd6c87a33b6389",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 640,
        "wires": [],
        "l": true
    },
    {
        "id": "4093b7f29738ca3f",
        "type": "link out",
        "z": "d7cd6c87a33b6389",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 600,
        "wires": [],
        "l": true
    },
    {
        "id": "def43a7dae9b1a4e",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 600,
        "wires": [
            [
                "4093b7f29738ca3f"
            ]
        ]
    },
    {
        "id": "b150c39bf34d9335",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "set error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Event type `\"&crm.output.event.type&\"` is not found\"       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 640,
        "wires": [
            [
                "a3b016961b1df97c"
            ]
        ]
    },
    {
        "id": "3df305137be6bc9c",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "to Waiting for refund",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               StatusName=\"Waiting_for_sending\"\t               and\t               ShipStatus=\"delivered\"\t               and \t               Carrier!=null\t               and \t               Tracknumber!=null\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"74\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 320,
        "wires": [
            [
                "b9afcb9847e47e9e",
                "ad1804e93a4a22b4"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "ad1804e93a4a22b4",
        "type": "debug",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 320,
        "wires": []
    },
    {
        "id": "70cd39464d983c31",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "was refunded",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               StatusName=\"Waiting_for_refund\"\t           and \t           ReturnCondition=\"was_refunded\"\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{ \t                           \"scenario_id\": \"32\"                                         \t                       },\t                       \"delay\": 60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 520,
        "wires": [
            [
                "68fe6b598e364aea",
                "22d723c817c1df99"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "68fe6b598e364aea",
        "type": "debug",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 520,
        "wires": []
    },
    {
        "id": "22d723c817c1df99",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "was not refunded",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               StatusName=\"Waiting_for_refund\"\t           and \t           ReturnCondition=\"was_not_refunded\"\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{ \t                           \"scenario_id\": \"33\"                                         \t                       },\t                       \"delay\": 60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 560,
        "wires": [
            [
                "84d096b0b662678b",
                "def43a7dae9b1a4e"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "84d096b0b662678b",
        "type": "debug",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 560,
        "wires": []
    },
    {
        "id": "e106f16de11f81f3",
        "type": "comment",
        "z": "d7cd6c87a33b6389",
        "name": "",
        "info": "наставить кучу делеев",
        "x": 100,
        "y": 400,
        "wires": []
    },
    {
        "id": "4e4ed3b774fa1413",
        "type": "change",
        "z": "d7cd6c87a33b6389",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 180,
        "wires": [
            [
                "dc54bd344d45a44a"
            ]
        ]
    },
    {
        "id": "dc54bd344d45a44a",
        "type": "link out",
        "z": "d7cd6c87a33b6389",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 1120,
        "y": 180,
        "wires": [],
        "l": true
    },
    {
        "id": "412abb637a25b4c1",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 180,
        "wires": [
            [
                "1ceffe7fa8cd5ccb"
            ]
        ]
    },
    {
        "id": "1ceffe7fa8cd5ccb",
        "type": "link out",
        "z": "c7627bdbbbf8f486",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 1120,
        "y": 180,
        "wires": [],
        "l": true
    },
    {
        "id": "65c0ea732a2550ac",
        "type": "link in",
        "z": "c7627bdbbbf8f486",
        "name": "sorting",
        "links": [
            "97a75d4db4c3f803"
        ],
        "x": 170,
        "y": 40,
        "wires": [
            [
                "3a77b7780e984e87",
                "5d7897f41b3ed951"
            ]
        ],
        "l": true,
        "info": "from sorting"
    },
    {
        "id": "fa92dccdbd754eb8",
        "type": "catch",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 1000,
        "y": 40,
        "wires": [
            [
                "3423d150f26ba9cc"
            ]
        ]
    },
    {
        "id": "3423d150f26ba9cc",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "set error ",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "$substringAfter(\t   error.message,\t   \"Invalid JSONata expression: \"\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "alert",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.source",
                "pt": "msg",
                "to": "error.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "log.context.flow",
                "pt": "msg",
                "to": "src",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 80,
        "wires": [
            [
                "ef131b1e301d8659",
                "f4e8688855fe2c1b"
            ]
        ]
    },
    {
        "id": "ef131b1e301d8659",
        "type": "link out",
        "z": "c7627bdbbbf8f486",
        "name": "log",
        "mode": "link",
        "links": [
            "4b768188.85ab9"
        ],
        "x": 970,
        "y": 120,
        "wires": [],
        "icon": "node-red/file-in.svg",
        "l": true
    },
    {
        "id": "f4e8688855fe2c1b",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 80,
        "wires": []
    },
    {
        "id": "3a77b7780e984e87",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 40,
        "wires": []
    },
    {
        "id": "5d7897f41b3ed951",
        "type": "switch",
        "z": "c7627bdbbbf8f486",
        "name": "create",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "create",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 80,
        "wires": [
            [
                "34a253de16f7b64c"
            ],
            [
                "ad338c2e5dce31cd"
            ]
        ]
    },
    {
        "id": "34a253de16f7b64c",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "problem description \"-\"",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\":[\t       {\t           \"action\":{\t               \"type\":\"update\",\t               \"context\":{\t                   \"ProblemDescription\": \"-\"                                       \t                       },\t               \"delay\":0                            \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t   \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : (payload.data ~>$append(crm.response.data))",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 120,
        "wires": [
            [
                "a0eec966d5ec16b4",
                "104ee77b7ddf900a"
            ]
        ]
    },
    {
        "id": "104ee77b7ddf900a",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 160,
        "wires": [
            [
                "7258d9a644c3029d"
            ]
        ]
    },
    {
        "id": "a0eec966d5ec16b4",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 120,
        "wires": []
    },
    {
        "id": "7258d9a644c3029d",
        "type": "link out",
        "z": "c7627bdbbbf8f486",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 160,
        "wires": [],
        "l": true
    },
    {
        "id": "ad338c2e5dce31cd",
        "type": "switch",
        "z": "c7627bdbbbf8f486",
        "name": "update",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "update",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 200,
        "wires": [
            [
                "3bb55bb2b91c6870"
            ],
            [
                "1e33964fd9c4d3ab"
            ]
        ]
    },
    {
        "id": "3bb55bb2b91c6870",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "to Waiting for sending",
        "rules": [
            {
                "t": "set",
                "p": "crm.response",
                "pt": "msg",
                "to": "{\"messages\":[],\"data\":[],\"code\":200}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               StatusName=\"Labels creation\"\t               and\t               DealStatus in [\"authorized_waiting_for_receiving\",\"authorized_waiting_for_sending_and_replacement\"]\t               and \t               LabelCreator in [\"MP\",\"Rlln\"]\t               and \t               ProblemDescription=\"-\"\t               and \t               Carrier!=null\t               and \t               Tracknumber!=null\t               and \t               ReturnLocation!=null\t               and \t               MpOrderNumber!=null\t               and \t               MpRetReason!=null\t               and \t               MpReturnNumber!=null\t               and \t               SrName!=null\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"78\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 240,
        "wires": [
            [
                "64d4e413f5acc623",
                "d9df78bcbe4e61e0"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "64d4e413f5acc623",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 240,
        "wires": []
    },
    {
        "id": "57a070c165864e8e",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "to Archive",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               (\t                   StatusName=\"Waiting for receiving\"\t               and\t               ItemCondition!=null\t               and \t               ReturnCondition!=null\t               )\t               or\t               (\t                   StatusName=\"Waiting_for_sending\"\t               and\t               ItemCondition!=null\t               and \t               ReturnCondition!=null\t               )\t           )\t       \t       )\t       or\t       (\t               $lookup(crm.output.action.context, \"ArchiveScenario\")\t           and\t           crm.output.entity.row.(\t               ArchiveScenario!=null \t               and \t               StatusName!=\"Archive\")\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"80\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 320,
        "wires": [
            [
                "8308c1e009ac5f42",
                "ae131b509c260461"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "8308c1e009ac5f42",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 320,
        "wires": []
    },
    {
        "id": "d9df78bcbe4e61e0",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "to Waiting for reсeiving",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               StatusName=\"Waiting_for_sending\"\t               and\t               ShipStatus=\"delivered\"\t               and \t               Carrier!=null\t               and \t               Tracknumber!=null\t               and \t               DealStatus in [\"authorized_waiting_for_receiving\",\"authorized_waiting_for_sending_and_replacement\"]\t               and \t               ProblemDescription=\"-\"\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"79\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 280,
        "wires": [
            [
                "57a070c165864e8e",
                "f125d638ce3ed01b"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "f125d638ce3ed01b",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 280,
        "wires": []
    },
    {
        "id": "ae131b509c260461",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "get tracknumber status",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"Status\")\t               or\t               $lookup(\t                   crm.output.action.context,\t                   \"ProblemDescription\"\t               )\t               or\t               $lookup(crm.output.action.context,\"Tracknumber\")\t               or\t               $lookup(crm.output.action.context, \"Carrier\")\t           ) \t           and\t           crm.output.entity.row.(\t               StatusName=\"Waiting_for_sending\"\t               and\t               ProblemDescription=\"-\"\t               and \t               Carrier!=null\t               and \t               Tracknumber!=null\t               and \t               ShipStatus!=\"delivered\"\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 120   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   } \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id\t                    }\t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*2*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*3*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*4*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*5*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*6*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*7*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*8*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*9*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*10*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*12*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*14*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*16*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*18*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*20*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*25*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*30*60  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               },\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"34\"                                       \t                       },\t                       \"delay\": 60*24*30*60*2  \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id   \t                   }  \t               }\t           ],\t           \"code\": \"200\" \t       }:null\t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 360,
        "wires": [
            [
                "8c3fc51755eabeaa",
                "9444bc6da74142a3"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "8c3fc51755eabeaa",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 360,
        "wires": []
    },
    {
        "id": "9444bc6da74142a3",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "return app add info",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(crm.output.action.context, \"Status\")\t               or\t               $lookup(crm.output.action.context, \"ShipStatus\")\t               or\t               $lookup(\t                   crm.output.action.context,\t                   \"ProblemDescription\"\t               )\t               or\t               $lookup(\t                   crm.output.action.context,\t                   \"Tracknumber\"\t               )\t               or\t               $lookup(crm.output.action.context, \"Carrier\")\t           ) \t           and\t           (\t               crm.output.entity.row.(\t                   (\t                       StatusName=\"Waiting_for_sending\"\t                    and\t                    ProblemDescription=\"-\"\t                    and \t                    Tracknumber!=null\t                    and \t                    Carrier!=null\t               )\t               or\t               (\t                       StatusName in [\"Waiting_for_receiving\",\"Archive\"]\t                   and \t                   ShipStatus=\"delivered\"\t                   and \t                   ProblemDescription=\"-\"\t               )\t           )\t       )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"15\"                                       \t                       },\t                       \"delay\": 60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 400,
        "wires": [
            [
                "e7a22612c3e98702",
                "cbf8e4e39760ae42"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "e7a22612c3e98702",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 400,
        "wires": []
    },
    {
        "id": "cbf8e4e39760ae42",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "refund notification",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(\t               crm.output.action.context,\t               \"Status\"\t               )and\t           crm.output.entity.row.StatusName=\"Waiting for receiving\"\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"45\"                                         \t                       },\t                       \"delay\": 1800*60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 440,
        "wires": [
            [
                "9f134974760d6613",
                "90e2a864cadb3bdb"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "9f134974760d6613",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 440,
        "wires": []
    },
    {
        "id": "90e2a864cadb3bdb",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "new correct item",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               ReturnCondition=\"new_correct_item\"\t               and \t               (\t               StatusName=\"Waiting for receiving\"\t               or\t               StatusName=\"Waiting_for_sending\"\t               )\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\":\"13\", \t                           \"scenario_id\": \"35\"                                      \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }\t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 480,
        "wires": [
            [
                "ec975ffc5210b4be",
                "41d31d2bb2cbf8ca"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "ec975ffc5210b4be",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 480,
        "wires": []
    },
    {
        "id": "41d31d2bb2cbf8ca",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "new incorrect item",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               ReturnCondition=\"new_incorrect_item\"\t               and \t               (\t               StatusName=\"Waiting for receiving\"\t               or\t               StatusName=\"Waiting_for_sending\"\t               )\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\":\"13\", \t                           \"scenario_id\": \"36\"                                      \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }\t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 520,
        "wires": [
            [
                "0cfd36baa90f8229",
                "2d9fceee23624334"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "0cfd36baa90f8229",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 520,
        "wires": []
    },
    {
        "id": "2d9fceee23624334",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "correct with problem",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               ReturnCondition=\"correct_with_problem\"\t               and \t               (\t               StatusName=\"Waiting for receiving\"\t               or\t               StatusName=\"Waiting_for_sending\"\t               )\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\":\"13\", \t                           \"scenario_id\": \"37\"                                      \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }\t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 560,
        "wires": [
            [
                "48b3f714bf383a5c",
                "e6ee32e760f85616"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "48b3f714bf383a5c",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 560,
        "wires": []
    },
    {
        "id": "e6ee32e760f85616",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "incorrect with problem",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               ReturnCondition=\"incorrect_with_problem\"\t               and \t               (\t               StatusName=\"Waiting for receiving\"\t               or\t               StatusName=\"Waiting_for_sending\"\t               )\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\":\"13\", \t                           \"scenario_id\": \"38\"                                      \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }\t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 600,
        "wires": [
            [
                "5732b0ee16743954",
                "7372ca2dffa4cc40"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "5732b0ee16743954",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 600,
        "wires": []
    },
    {
        "id": "7372ca2dffa4cc40",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "was not received",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               ReturnCondition=\"was_not_received\"\t               and \t               (\t               StatusName=\"Waiting for receiving\"\t               or\t               StatusName=\"Waiting_for_sending\"\t               )\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\":\"13\", \t                           \"scenario_id\": \"41\"                                      \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }\t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 640,
        "wires": [
            [
                "f3ef15b818c6585b",
                "03b759ad81a4980f"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "f3ef15b818c6585b",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 640,
        "wires": []
    },
    {
        "id": "03b759ad81a4980f",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "was not shipped",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(\t               crm.output.action.context,\"ReturnCondition\"\t               )\t               and\t           crm.output.entity.row.(\t               StatusName=\"Waiting_for_sending\"\t               and \t               ProblemDescription=\"-\"\t               and\t               ReturnCondition=\"was_not_shipped\"\t               )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"44\"                                         \t                       },\t                       \"delay\": 14440*60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 680,
        "wires": [
            [
                "9c821be997f87567",
                "ec4b7f7b1417120a"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "9c821be997f87567",
        "type": "debug",
        "z": "c7627bdbbbf8f486",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 680,
        "wires": []
    },
    {
        "id": "6453419bc39835ed",
        "type": "link out",
        "z": "c7627bdbbbf8f486",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 760,
        "wires": [],
        "l": true
    },
    {
        "id": "e0598ee5cddfa31a",
        "type": "link out",
        "z": "c7627bdbbbf8f486",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 720,
        "wires": [],
        "l": true
    },
    {
        "id": "ec4b7f7b1417120a",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 720,
        "wires": [
            [
                "e0598ee5cddfa31a"
            ]
        ]
    },
    {
        "id": "1e33964fd9c4d3ab",
        "type": "change",
        "z": "c7627bdbbbf8f486",
        "name": "set error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Event type `\"&crm.output.event.type&\"` is not found\"       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 760,
        "wires": [
            [
                "6453419bc39835ed"
            ]
        ]
    },
    {
        "id": "51a9434e4af08f51",
        "type": "link in",
        "z": "cce016f7fd2b5ab6",
        "name": "sorting",
        "links": [
            "582ad6cc98c62c30"
        ],
        "x": 170,
        "y": 40,
        "wires": [
            [
                "29405b27f8feca55",
                "0a136ba99fa90c61"
            ]
        ],
        "l": true,
        "info": "from sorting"
    },
    {
        "id": "d52c2efaf94b23e8",
        "type": "catch",
        "z": "cce016f7fd2b5ab6",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 1000,
        "y": 40,
        "wires": [
            [
                "646bffeaaf5a8ded"
            ]
        ]
    },
    {
        "id": "646bffeaaf5a8ded",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "set error ",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "$substringAfter(\t   error.message,\t   \"Invalid JSONata expression: \"\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "alert",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.source",
                "pt": "msg",
                "to": "error.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "log.context.flow",
                "pt": "msg",
                "to": "src",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 80,
        "wires": [
            [
                "0ceb385c1369e3e1",
                "500166fde6b7f043"
            ]
        ]
    },
    {
        "id": "0ceb385c1369e3e1",
        "type": "link out",
        "z": "cce016f7fd2b5ab6",
        "name": "log",
        "mode": "link",
        "links": [
            "4b768188.85ab9"
        ],
        "x": 970,
        "y": 120,
        "wires": [],
        "icon": "node-red/file-in.svg",
        "l": true
    },
    {
        "id": "500166fde6b7f043",
        "type": "debug",
        "z": "cce016f7fd2b5ab6",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 80,
        "wires": []
    },
    {
        "id": "29405b27f8feca55",
        "type": "debug",
        "z": "cce016f7fd2b5ab6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 40,
        "wires": []
    },
    {
        "id": "0a136ba99fa90c61",
        "type": "switch",
        "z": "cce016f7fd2b5ab6",
        "name": "create",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "create",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 80,
        "wires": [
            [
                "620a79ceba7f72fb"
            ],
            [
                "716ece7641d92d37"
            ]
        ]
    },
    {
        "id": "716ece7641d92d37",
        "type": "switch",
        "z": "cce016f7fd2b5ab6",
        "name": "update",
        "property": "crm.output.action.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "update",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 200,
        "wires": [
            [
                "2cbd7243494c4c5b"
            ],
            [
                "8834a5082cbfdab2"
            ]
        ]
    },
    {
        "id": "2cbd7243494c4c5b",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "to Bag preparation",
        "rules": [
            {
                "t": "set",
                "p": "crm.response",
                "pt": "msg",
                "to": "{\"messages\":[],\"data\":[],\"code\":200}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t                   StatusName=\"Bag_filling\"\t               and\t               SrName!=null\t               and \t               ParselInfo!=null\t               and\t               Storage!=null\t               and \t               BagStatus=\"bag_containings_sent\"\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"64\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 240,
        "wires": [
            [
                "031a4f2eeec4f0c9",
                "5fc2876de5f0b8c2"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "620a79ceba7f72fb",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "problem description \"-\"",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\":[\t       {\t           \"action\":{\t               \"type\":\"update\",\t               \"context\":{\t                   \"ProblemDescription\": \"-\"                                       \t                       },\t               \"delay\":0                            \t                   },\t           \"entity\":{\t               \"type\":crm.output.entity.type,\t               \"name\":crm.output.entity.name,\t               \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t   \"code\":\"200\"     \t       }",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : (payload.data ~>$append(crm.response.data))",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 120,
        "wires": [
            [
                "6e7b1e713a1cf46c",
                "4d7181cf6bacd625"
            ]
        ]
    },
    {
        "id": "4d7181cf6bacd625",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 160,
        "wires": [
            [
                "93bb881adc60e957"
            ]
        ]
    },
    {
        "id": "6e7b1e713a1cf46c",
        "type": "debug",
        "z": "cce016f7fd2b5ab6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 120,
        "wires": []
    },
    {
        "id": "93bb881adc60e957",
        "type": "link out",
        "z": "cce016f7fd2b5ab6",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 160,
        "wires": [],
        "l": true
    },
    {
        "id": "031a4f2eeec4f0c9",
        "type": "debug",
        "z": "cce016f7fd2b5ab6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 240,
        "wires": []
    },
    {
        "id": "5fc2876de5f0b8c2",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "to Returns getting",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               (\t                   StatusName=\"Bag_preparation\"\t               and\t               BagStatus=\"packed_bag\"\t               and\t               ParselInfo!=null\t               and \t               ParselInfo!=\"waiting\"\t               and \t               ParselInfo!=\"no_need\"\t               and \t               ProblemDescription=\"-\"\t               )\t               or\t               (\t                   StatusName=\"Bag_preparation\"\t               and\t               BagStatus=\"packed_bag\"\t               and \t               ParselInfo=\"no_need\"\t               and \t               ProblemDescription=\"-\"\t               )\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"65\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 280,
        "wires": [
            [
                "3a84bb7f80823c78",
                "4f509d654f968486"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "3a84bb7f80823c78",
        "type": "debug",
        "z": "cce016f7fd2b5ab6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 280,
        "wires": []
    },
    {
        "id": "689e35b7718ac602",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "to Archive",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t                   StatusName=\"Waiting_for_refund\"\t               and\t               ProblemDescription=\"-\"\t               and \t               BagStatus=\"refunded\"               \t           )\t       \t       )\t       or\t       (\t               $lookup(crm.output.action.context, \"ArchiveScenario\")\t           and\t           crm.output.entity.row.(\t               ArchiveScenario!=null \t               and \t               StatusName!=\"Archive\")\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"70\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 480,
        "wires": [
            [
                "3f3cd0705d5f8f6a",
                "24f1b5fbecf10246"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "3f3cd0705d5f8f6a",
        "type": "debug",
        "z": "cce016f7fd2b5ab6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 480,
        "wires": []
    },
    {
        "id": "24f1b5fbecf10246",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "bag filling app add info",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               StatusName=\"Bag_preparation\"\t               and\t               ProblemDescription=\"-\"\t               and \t               Storage!=null\t               and \t               SrName!=null\t           )\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"29\"                                       \t                       },\t                       \"delay\": 60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 520,
        "wires": [
            [
                "ba8007c5f469fa37",
                "395c7567eab7c4a2"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "ba8007c5f469fa37",
        "type": "debug",
        "z": "cce016f7fd2b5ab6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 520,
        "wires": []
    },
    {
        "id": "395c7567eab7c4a2",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "check refund",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           $lookup(\t               crm.output.action.context,\t               \"Status\"\t               )and\t           crm.output.entity.row.StatusName=\"Waiting_for_refund\"\t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"43\"                                       \t                       },\t                       \"delay\": 20160*6                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 560,
        "wires": [
            [
                "537d3deb4d9a1723",
                "e059221fd50196f7"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "537d3deb4d9a1723",
        "type": "debug",
        "z": "cce016f7fd2b5ab6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 560,
        "wires": []
    },
    {
        "id": "dda06b823b7ab762",
        "type": "link out",
        "z": "cce016f7fd2b5ab6",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 640,
        "wires": [],
        "l": true
    },
    {
        "id": "486e40a1485746be",
        "type": "link out",
        "z": "cce016f7fd2b5ab6",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 600,
        "y": 600,
        "wires": [],
        "l": true
    },
    {
        "id": "e059221fd50196f7",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "crm.response.data!=null ? crm.response.data : {}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "crm.response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 600,
        "wires": [
            [
                "486e40a1485746be"
            ]
        ]
    },
    {
        "id": "8834a5082cbfdab2",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "set error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Event type `\"&crm.output.event.type&\"` is not found\"       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 640,
        "wires": [
            [
                "dda06b823b7ab762"
            ]
        ]
    },
    {
        "id": "4f509d654f968486",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "to Label creation",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           (\t               $lookup(\t                   crm.output.action.context,\t                   \"SrReturnNumber\"\t               )\t               or\t               $lookup(\t                   crm.output.action.context,\t                   \"ParselInfo\"\t               )\t               or\t               $lookup(\t                   crm.output.action.context,\t                   \"ProblemDescription\"\t               )\t            )\t               and\t           crm.output.entity.row.(\t               StatusName=\"Returns_getting\"\t               and\t               SrReturnNumber!=null\t               and \t               ParselInfo!=null\t               and \t               ParselInfo!=\"no_need\"\t               and \t               ProblemDescription=\"-\"\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"65\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 320,
        "wires": [
            [
                "c78c22fc44203232",
                "0946a437d515c8cb"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "c78c22fc44203232",
        "type": "debug",
        "z": "cce016f7fd2b5ab6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 320,
        "wires": []
    },
    {
        "id": "0946a437d515c8cb",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "to Info sending",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               (\t                   StatusName=\"Returns_getting\"\t               and\t               SrReturnNumber!=null\t               and \t               ParselInfo=\"no_need\"\t               and \t               ProblemDescription=\"-\"\t               )\t               or\t               (\t                   StatusName=\"Label_creation\"\t               and\t               Tracknumber!=null\t               and \t               Carrier!=null\t               and \t               ProblemDescription=\"-\"\t               )\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"67\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 360,
        "wires": [
            [
                "cb9f66ba7401d660",
                "880532cd9c5edf7e"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "cb9f66ba7401d660",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "to Items return",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t                   StatusName=\"Info_sending\"\t               and\t               BagStatus=\"info_sent\"\t               and \t               ParselInfo!=null\t               and \t               ProblemDescription=\"-\"\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"68\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 400,
        "wires": [
            [
                "051a46ac3bd68021",
                "ec5bb4e8008f390c"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "051a46ac3bd68021",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "to Waiting for refund",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t                   StatusName=\"Items_return\"\t               and\t               BagStatus in [\"brought\",\"shipped\"]\t               and \t               ProblemDescription=\"-\"\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\": \"update\",\t                       \"context\": {\t                           \"Status\": \"69\"\t                       \t                       },\t                       \"delay\": 0       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 440,
        "wires": [
            [
                "689e35b7718ac602",
                "0666e76ef53f0f47"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "880532cd9c5edf7e",
        "type": "debug",
        "z": "cce016f7fd2b5ab6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 360,
        "wires": []
    },
    {
        "id": "ec5bb4e8008f390c",
        "type": "debug",
        "z": "cce016f7fd2b5ab6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 400,
        "wires": []
    },
    {
        "id": "0666e76ef53f0f47",
        "type": "debug",
        "z": "cce016f7fd2b5ab6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 440,
        "wires": []
    },
    {
        "id": "b0dfc821846f93fc",
        "type": "change",
        "z": "cce016f7fd2b5ab6",
        "name": "set action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 180,
        "wires": [
            [
                "81f3fd444e3bdc34"
            ]
        ]
    },
    {
        "id": "81f3fd444e3bdc34",
        "type": "link out",
        "z": "cce016f7fd2b5ab6",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 1120,
        "y": 180,
        "wires": [],
        "l": true
    },
    {
        "id": "6ef347c7c1385c15",
        "type": "rollun-tables-crud",
        "z": "805a768837c7900b",
        "name": "update",
        "tableURL": "",
        "url": "http://rollun-crm/api/datastore/TestDataStore",
        "timeout": "1000000",
        "idField": "id",
        "action": "update",
        "payload": "msg|payload",
        "log": true,
        "x": 290,
        "y": 560,
        "wires": [
            [
                "49bb387b6827dec9"
            ],
            [
                "a4b44c2cd095459b"
            ]
        ]
    },
    {
        "id": "025f8feb59eece5b",
        "type": "inject",
        "z": "805a768837c7900b",
        "name": "update (success)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"id\":\"1\",\"field_a\":\"test_delay2\"}",
        "payloadType": "json",
        "x": 140,
        "y": 560,
        "wires": [
            [
                "6ef347c7c1385c15"
            ]
        ]
    },
    {
        "id": "49bb387b6827dec9",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 8",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 540,
        "wires": []
    },
    {
        "id": "a4b44c2cd095459b",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 9",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 580,
        "wires": []
    },
    {
        "id": "c5eeed3c.902bc",
        "type": "rollun-tables-crud",
        "z": "805a768837c7900b",
        "name": "query",
        "tableURL": "",
        "url": "http://rollun-crm/api/datastore/TestDataStore",
        "timeout": 10000,
        "idField": "id",
        "action": "query",
        "payload": "const|limit(1,0)",
        "log": true,
        "x": 290,
        "y": 480,
        "wires": [
            [
                "733004b5e50b9efe"
            ],
            [
                "6a375005c71630c0"
            ]
        ]
    },
    {
        "id": "d0ff625e18c29368",
        "type": "inject",
        "z": "805a768837c7900b",
        "name": "query",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 480,
        "wires": [
            [
                "c5eeed3c.902bc"
            ]
        ]
    },
    {
        "id": "733004b5e50b9efe",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 3",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 460,
        "wires": []
    },
    {
        "id": "6a375005c71630c0",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 4",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 500,
        "wires": []
    },
    {
        "id": "56337dd2c360f722",
        "type": "rollun-openapi-client",
        "z": "805a768837c7900b",
        "name": "client",
        "schema": "72bec069c933c2ad",
        "operation": "post /eventHandler",
        "server": 0,
        "body": "msg|payload",
        "params": "msg|",
        "headers": "msg|",
        "query": "msg|",
        "x": 390,
        "y": 100,
        "wires": [
            [
                "683734d8dd6600bd"
            ],
            [
                "2cc93e0677015e17"
            ]
        ]
    },
    {
        "id": "f09dd5dd3a2055da",
        "type": "rollun-openapi-in",
        "z": "805a768837c7900b",
        "d": true,
        "name": "service",
        "schema": "72bec069c933c2ad",
        "operation": "post /eventHandler",
        "x": 200,
        "y": 160,
        "wires": [
            [
                "eda20c50a1233a06",
                "9f8d66f786bb1ee7"
            ]
        ]
    },
    {
        "id": "8b01fd8e6418a318",
        "type": "rollun-openapi-out",
        "z": "805a768837c7900b",
        "name": "",
        "data": "msg|payload",
        "messages": "msg|",
        "statusCode": "msg|",
        "disableGenerationOfExceptionMessage": false,
        "x": 220,
        "y": 240,
        "wires": []
    },
    {
        "id": "d558769aa8a36cf5",
        "type": "inject",
        "z": "805a768837c7900b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"lifecycleToken\":\"1234567890QWERTY\",\"entity\":{\"type\":\"deals\",\"name\":\"orders\",\"row\":{\"id\":\"01\",\"status\":\"Archive\"},\"changedFields\":{\"status\":\"Order creation\"}},\"action\":{\"type\":\"update\",\"data\":{\"status\":\"Archive\"},\"delay\":0,\"startedAt\":\"2022-09-22 21:53:10\"}}",
        "payloadType": "json",
        "x": 110,
        "y": 40,
        "wires": [
            [
                "8590fed5aaa6fafd"
            ]
        ]
    },
    {
        "id": "683734d8dd6600bd",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 80,
        "wires": []
    },
    {
        "id": "2cc93e0677015e17",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 120,
        "wires": []
    },
    {
        "id": "eda20c50a1233a06",
        "type": "change",
        "z": "805a768837c7900b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"lifecycleToken\":\"1234567890QWERTY\",\"messages\":[],\"data\":{}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 200,
        "wires": [
            [
                "9a21bf4db7594496",
                "8b01fd8e6418a318"
            ]
        ]
    },
    {
        "id": "ca9086a98c9965ad",
        "type": "rollun-openapi-messages",
        "z": "805a768837c7900b",
        "name": "",
        "oldMessages": "msg|payload.messages",
        "level": "debug",
        "fromMsg": "msg|",
        "text": "const|test",
        "msgType": "const|test",
        "x": 220,
        "y": 300,
        "wires": [
            [
                "125e2c1ca403b6b5"
            ]
        ]
    },
    {
        "id": "9f8d66f786bb1ee7",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 160,
        "wires": []
    },
    {
        "id": "9a21bf4db7594496",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 200,
        "wires": []
    },
    {
        "id": "125e2c1ca403b6b5",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 300,
        "wires": []
    },
    {
        "id": "8590fed5aaa6fafd",
        "type": "http request",
        "z": "805a768837c7900b",
        "name": "",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "https://crm-node-red.rollun.net/openapi/CRMEventHandler/v1/eventHandler",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 310,
        "y": 40,
        "wires": [
            [
                "f92431b166147e59"
            ]
        ]
    },
    {
        "id": "f92431b166147e59",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 40,
        "wires": []
    },
    {
        "id": "376671e71982a7bb",
        "type": "link in",
        "z": "805a768837c7900b",
        "name": "test",
        "links": [
            "97951b1b983d0d69",
            "6e87287a70bda1d1"
        ],
        "x": 190,
        "y": 620,
        "wires": [
            [
                "319f9926516fedb5"
            ]
        ],
        "l": true,
        "info": "from sorting"
    },
    {
        "id": "b8aea3430ce954ad",
        "type": "change",
        "z": "805a768837c7900b",
        "name": "b",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 820,
        "wires": [
            [
                "2d5b69c5501cf1a8",
                "f108471d38ab4972"
            ]
        ]
    },
    {
        "id": "e117cb95c5f9a7b6",
        "type": "switch",
        "z": "805a768837c7900b",
        "name": "success",
        "property": "crm.output.entity.changedFields",
        "propertyType": "msg",
        "rules": [
            {
                "t": "hask",
                "v": "field_a",
                "vt": "str"
            },
            {
                "t": "hask",
                "v": "field_b",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 260,
        "y": 740,
        "wires": [
            [
                "b421bc05ad717890"
            ],
            [
                "b8aea3430ce954ad"
            ]
        ]
    },
    {
        "id": "b421bc05ad717890",
        "type": "change",
        "z": "805a768837c7900b",
        "name": "a",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"messages\": [],\t   \"data\":[\t       {\t           \"action\":{\t               \"type\":\"update\",\t               \"context\":{\t                   \"field_b\":\"test_delay2\"\t                   },\t               \"delay\":100\t           },\t           \"entity\":{\t               \"type\":\"deals\",\t               \"name\":\"test\",\t               \"rowId\":\"1\"\t           }\t       }\t   ],\t   \"code\":\"200\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 780,
        "wires": [
            [
                "c303e05561368e55",
                "f108471d38ab4972"
            ]
        ]
    },
    {
        "id": "c303e05561368e55",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "success with action",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 550,
        "y": 780,
        "wires": []
    },
    {
        "id": "2d5b69c5501cf1a8",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "success",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 820,
        "wires": []
    },
    {
        "id": "f108471d38ab4972",
        "type": "link out",
        "z": "805a768837c7900b",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 340,
        "y": 860,
        "wires": [],
        "l": true
    },
    {
        "id": "319f9926516fedb5",
        "type": "switch",
        "z": "805a768837c7900b",
        "name": "",
        "property": "crm.output.entity.row.field_a",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "cont",
                "v": "test_webhook",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "test_scenario",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "test",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "error",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 230,
        "y": 680,
        "wires": [
            [
                "ef64653901151baa"
            ],
            [
                "6daad36e6ff5f4a6"
            ],
            [
                "e117cb95c5f9a7b6"
            ],
            [
                "e800d79ad06bee6b"
            ]
        ]
    },
    {
        "id": "d6d721467bf436be",
        "type": "change",
        "z": "805a768837c7900b",
        "name": "system error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$error(\"error test\")",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 1000,
        "wires": [
            [
                "720d123dd7d3e696"
            ]
        ]
    },
    {
        "id": "e800d79ad06bee6b",
        "type": "switch",
        "z": "805a768837c7900b",
        "name": "error",
        "property": "crm.output.entity.changedFields",
        "propertyType": "msg",
        "rules": [
            {
                "t": "hask",
                "v": "field_a",
                "vt": "str"
            },
            {
                "t": "hask",
                "v": "field_b",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 250,
        "y": 920,
        "wires": [
            [
                "92a81e93c1c5ea6a"
            ],
            [
                "d6d721467bf436be"
            ]
        ]
    },
    {
        "id": "92a81e93c1c5ea6a",
        "type": "change",
        "z": "805a768837c7900b",
        "name": "manual error",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Something wrong\"\t       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 960,
        "wires": [
            [
                "bfc29be355e22263",
                "66e23a95fe5b8841"
            ]
        ]
    },
    {
        "id": "bfc29be355e22263",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "error 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 510,
        "y": 960,
        "wires": []
    },
    {
        "id": "720d123dd7d3e696",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "error",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 510,
        "y": 1000,
        "wires": []
    },
    {
        "id": "66e23a95fe5b8841",
        "type": "link out",
        "z": "805a768837c7900b",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 340,
        "y": 1040,
        "wires": [],
        "l": true
    },
    {
        "id": "304e7c78f288d1f3",
        "type": "rollun-tables-crud",
        "z": "805a768837c7900b",
        "name": "update",
        "tableURL": "",
        "url": "http://rollun-crm/api/datastore/TestDataStore",
        "timeout": "1000000",
        "idField": "id",
        "action": "update",
        "payload": "msg|payload",
        "log": true,
        "x": 790,
        "y": 480,
        "wires": [
            [
                "ad981033b9fe9ae6"
            ],
            [
                "1235671a7fca080e"
            ]
        ]
    },
    {
        "id": "a64fd8ca9685c28c",
        "type": "inject",
        "z": "805a768837c7900b",
        "name": "update (error a)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"id\":\"1\",\"field_a\":\"error\"}",
        "payloadType": "json",
        "x": 640,
        "y": 480,
        "wires": [
            [
                "304e7c78f288d1f3"
            ]
        ]
    },
    {
        "id": "ad981033b9fe9ae6",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 10",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 460,
        "wires": []
    },
    {
        "id": "1235671a7fca080e",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 11",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 500,
        "wires": []
    },
    {
        "id": "10f97eb7ae2739a4",
        "type": "rollun-tables-crud",
        "z": "805a768837c7900b",
        "name": "update",
        "tableURL": "",
        "url": "http://rollun-crm/api/datastore/TestDataStore",
        "timeout": "1000000",
        "idField": "id",
        "action": "update",
        "payload": "msg|payload",
        "log": true,
        "x": 790,
        "y": 560,
        "wires": [
            [
                "32698b457f72d794"
            ],
            [
                "b7f0517231e63235"
            ]
        ]
    },
    {
        "id": "15cd2f8e2785999e",
        "type": "inject",
        "z": "805a768837c7900b",
        "name": "update (error b)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"id\":\"1\",\"field_b\":\"error\"}",
        "payloadType": "json",
        "x": 640,
        "y": 560,
        "wires": [
            [
                "10f97eb7ae2739a4"
            ]
        ]
    },
    {
        "id": "32698b457f72d794",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 12",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 540,
        "wires": []
    },
    {
        "id": "b7f0517231e63235",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 13",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 580,
        "wires": []
    },
    {
        "id": "dc7314ecefc50d2c",
        "type": "catch",
        "z": "805a768837c7900b",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 820,
        "y": 860,
        "wires": [
            [
                "b1e37f1f2264dec3"
            ]
        ]
    },
    {
        "id": "b1e37f1f2264dec3",
        "type": "change",
        "z": "805a768837c7900b",
        "name": "set error ",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "$substringAfter(\t   error.message,\t   \"Invalid JSONata expression: \"\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "alert",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.source",
                "pt": "msg",
                "to": "error.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "log.context.flow",
                "pt": "msg",
                "to": "src",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"data\":[],\t   \"messages\": [\t       {\t           \"level\":\"error\",\t           \"text\": \"Something wrong\"\t       }\t   ],\t   \"code\":\"500\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 900,
        "wires": [
            [
                "140b4e12d5d26fcd",
                "d941d3bd75e92498",
                "66e23a95fe5b8841"
            ]
        ]
    },
    {
        "id": "140b4e12d5d26fcd",
        "type": "link out",
        "z": "805a768837c7900b",
        "name": "log",
        "mode": "link",
        "links": [
            "4b768188.85ab9"
        ],
        "x": 790,
        "y": 940,
        "wires": [],
        "icon": "node-red/file-in.svg",
        "l": true
    },
    {
        "id": "d941d3bd75e92498",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 960,
        "y": 900,
        "wires": []
    },
    {
        "id": "d53e874d1339a589",
        "type": "http in",
        "z": "805a768837c7900b",
        "name": "",
        "url": "/testwebhook",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 1380,
        "wires": [
            [
                "56571a356e6fcf12"
            ]
        ]
    },
    {
        "id": "2c3333f30ed44151",
        "type": "http response",
        "z": "805a768837c7900b",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 530,
        "y": 1380,
        "wires": []
    },
    {
        "id": "56571a356e6fcf12",
        "type": "change",
        "z": "805a768837c7900b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 1380,
        "wires": [
            [
                "2c3333f30ed44151",
                "44498e28aa839948"
            ]
        ]
    },
    {
        "id": "6c834f244aef65a5",
        "type": "rollun-tables-crud",
        "z": "805a768837c7900b",
        "name": "update",
        "tableURL": "",
        "url": "http://rollun-crm/api/datastore/TestDataStore",
        "timeout": "1000000",
        "idField": "id",
        "action": "update",
        "payload": "msg|payload",
        "log": true,
        "x": 290,
        "y": 1220,
        "wires": [
            [
                "9d0b6a79b5f25f3a"
            ],
            [
                "e4809467a33a169f"
            ]
        ]
    },
    {
        "id": "a20481985ce538f5",
        "type": "inject",
        "z": "805a768837c7900b",
        "name": "test_webhook",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"id\":\"1\",\"field_a\":\"test_webhook\"}",
        "payloadType": "json",
        "x": 130,
        "y": 1220,
        "wires": [
            [
                "6c834f244aef65a5"
            ]
        ]
    },
    {
        "id": "9d0b6a79b5f25f3a",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 18",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 1200,
        "wires": []
    },
    {
        "id": "e4809467a33a169f",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 19",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 1240,
        "wires": []
    },
    {
        "id": "84415ecb470999c8",
        "type": "rollun-tables-crud",
        "z": "805a768837c7900b",
        "name": "query",
        "tableURL": "",
        "url": "http://rollun-crm/api/datastore/TestDataStore",
        "timeout": 10000,
        "idField": "id",
        "action": "query",
        "payload": "const|limit(1,0)",
        "log": true,
        "x": 270,
        "y": 1140,
        "wires": [
            [
                "0ceee2450cfb18d2"
            ],
            [
                "b59902358e4aead1"
            ]
        ]
    },
    {
        "id": "bdf32ca961376589",
        "type": "inject",
        "z": "805a768837c7900b",
        "name": "query",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 1140,
        "wires": [
            [
                "84415ecb470999c8"
            ]
        ]
    },
    {
        "id": "0ceee2450cfb18d2",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 20",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 1120,
        "wires": []
    },
    {
        "id": "b59902358e4aead1",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 21",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 1160,
        "wires": []
    },
    {
        "id": "ef64653901151baa",
        "type": "link out",
        "z": "805a768837c7900b",
        "name": "webhook",
        "mode": "link",
        "links": [
            "a0965fe990c4a94e"
        ],
        "x": 380,
        "y": 660,
        "wires": [],
        "l": true
    },
    {
        "id": "a0965fe990c4a94e",
        "type": "link in",
        "z": "805a768837c7900b",
        "name": "webhook",
        "links": [
            "ef64653901151baa"
        ],
        "x": 120,
        "y": 1300,
        "wires": [
            [
                "a988933f75c2a428"
            ]
        ],
        "l": true
    },
    {
        "id": "a988933f75c2a428",
        "type": "change",
        "z": "805a768837c7900b",
        "name": "test_webhook",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": " {\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"remote_request\",\t               \"context\": {\t                   \"headers\": {},\t                   \"body\": \"test\",\t                   \"url\": \"https://crm-node-red.rollun.net/testwebhook\",\t                   \"method\": \"GET\"         \t               },\t               \"delay\": 0       \t           },\t           \"entity\": {\t               \"type\": \"deals\",\t               \"name\": \"test\",\t               \"rowId\": \"1\"       \t           }     \t       }   \t   ],\t   \"code\": \"200\" \t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 1300,
        "wires": [
            [
                "8d10b5f9ba07558f",
                "2125413a4c695f53"
            ]
        ]
    },
    {
        "id": "44498e28aa839948",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 22",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 540,
        "y": 1420,
        "wires": []
    },
    {
        "id": "8d10b5f9ba07558f",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 23",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 500,
        "y": 1340,
        "wires": []
    },
    {
        "id": "afff73501ffaeba3",
        "type": "change",
        "z": "805a768837c7900b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"data\": {},\"code\":\"200\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 1800,
        "wires": [
            [
                "7d284aacf32dd214",
                "af653da5b3fe84ba"
            ]
        ]
    },
    {
        "id": "cedacd6070721573",
        "type": "rollun-tables-crud",
        "z": "805a768837c7900b",
        "name": "update",
        "tableURL": "",
        "url": "http://rollun-crm/api/datastore/TestDataStore",
        "timeout": "1000000",
        "idField": "id",
        "action": "update",
        "payload": "msg|payload",
        "log": true,
        "x": 290,
        "y": 1640,
        "wires": [
            [
                "fa168b042571fe4f"
            ],
            [
                "6785a062b1713ebc"
            ]
        ]
    },
    {
        "id": "af8d191e5e36fe04",
        "type": "inject",
        "z": "805a768837c7900b",
        "name": "test_scenario",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"id\":\"1\",\"field_a\":\"test_scenario\"}",
        "payloadType": "json",
        "x": 130,
        "y": 1640,
        "wires": [
            [
                "cedacd6070721573"
            ]
        ]
    },
    {
        "id": "fa168b042571fe4f",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 25",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 1620,
        "wires": []
    },
    {
        "id": "6785a062b1713ebc",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 26",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 1660,
        "wires": []
    },
    {
        "id": "821a07eb9287143f",
        "type": "rollun-tables-crud",
        "z": "805a768837c7900b",
        "name": "query",
        "tableURL": "",
        "url": "http://rollun-crm/api/datastore/TestDataStore",
        "timeout": 10000,
        "idField": "id",
        "action": "query",
        "payload": "const|limit(1,0)",
        "log": true,
        "x": 270,
        "y": 1560,
        "wires": [
            [
                "c2cb8a1c7b07919d"
            ],
            [
                "deb5acb4b0de3279"
            ]
        ]
    },
    {
        "id": "273de28ba65f0a1b",
        "type": "inject",
        "z": "805a768837c7900b",
        "name": "query",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 1560,
        "wires": [
            [
                "821a07eb9287143f"
            ]
        ]
    },
    {
        "id": "c2cb8a1c7b07919d",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 27",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 1540,
        "wires": []
    },
    {
        "id": "deb5acb4b0de3279",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 28",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 1580,
        "wires": []
    },
    {
        "id": "7d760ed2ed3b0620",
        "type": "link in",
        "z": "805a768837c7900b",
        "name": "scenario",
        "links": [
            "6daad36e6ff5f4a6"
        ],
        "x": 120,
        "y": 1720,
        "wires": [
            [
                "5216318ad75a8f37"
            ]
        ],
        "l": true
    },
    {
        "id": "5216318ad75a8f37",
        "type": "change",
        "z": "805a768837c7900b",
        "name": "test_scenario",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": " {\t   \"messages\": [],\t   \"data\": [\t       {\t           \"action\": {\t               \"type\": \"scenario_request\",\t               \"context\": {\t                   \"scenario_id\": \"0\"\t                   },\t               \"delay\": 0\t      },\t           \"entity\": {\t               \"type\": \"deals\",\t               \"name\": \"orders\",\t               \"rowId\": \"185648\"       \t           }     \t       }   \t   ],\t   \"code\": \"200\" \t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 1720,
        "wires": [
            [
                "5a631b4489e32b2e",
                "cdf3af48012d0cce"
            ]
        ]
    },
    {
        "id": "7d284aacf32dd214",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 29",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 500,
        "y": 1840,
        "wires": []
    },
    {
        "id": "5a631b4489e32b2e",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "debug 30",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 500,
        "y": 1760,
        "wires": []
    },
    {
        "id": "6daad36e6ff5f4a6",
        "type": "link out",
        "z": "805a768837c7900b",
        "name": "scenario",
        "mode": "link",
        "links": [
            "7d760ed2ed3b0620"
        ],
        "x": 380,
        "y": 700,
        "wires": [],
        "l": true
    },
    {
        "id": "2125413a4c695f53",
        "type": "link out",
        "z": "805a768837c7900b",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 500,
        "y": 1300,
        "wires": [],
        "l": true
    },
    {
        "id": "cdf3af48012d0cce",
        "type": "link out",
        "z": "805a768837c7900b",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 500,
        "y": 1720,
        "wires": [],
        "l": true
    },
    {
        "id": "af653da5b3fe84ba",
        "type": "link out",
        "z": "805a768837c7900b",
        "name": "answer",
        "mode": "link",
        "links": [
            "67f244ac5649799b"
        ],
        "x": 500,
        "y": 1800,
        "wires": [],
        "l": true
    },
    {
        "id": "4090c83dfa669b4f",
        "type": "link in",
        "z": "805a768837c7900b",
        "name": "system",
        "links": [],
        "x": 130,
        "y": 1800,
        "wires": [
            [
                "afff73501ffaeba3"
            ]
        ],
        "l": true,
        "info": "from sorting"
    },
    {
        "id": "d3f99c0720767c7c",
        "type": "switch",
        "z": "805a768837c7900b",
        "name": "status updated?",
        "property": "crm.output.action.context",
        "propertyType": "msg",
        "rules": [
            {
                "t": "hask",
                "v": "Status",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 180,
        "y": 2100,
        "wires": [
            [
                "2c0e22f4eb330fe1"
            ],
            []
        ],
        "outputLabels": [
            "yes",
            "no"
        ],
        "info": "#to_do"
    },
    {
        "id": "2c0e22f4eb330fe1",
        "type": "switch",
        "z": "805a768837c7900b",
        "name": "status check",
        "property": "true",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "crm.output.entity.context.updated_fields.StatusName in $lookup(crm.status.rules,crm.output.entity.data.StatusName) ",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2140,
        "wires": [
            [
                "f3c029ba962e2f4f"
            ],
            [
                "615b35bb6264cbe1"
            ]
        ]
    },
    {
        "id": "f3c029ba962e2f4f",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 530,
        "y": 2120,
        "wires": []
    },
    {
        "id": "615b35bb6264cbe1",
        "type": "debug",
        "z": "805a768837c7900b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 530,
        "y": 2160,
        "wires": []
    },
    {
        "id": "11bcafd6.1e80a",
        "type": "inject",
        "z": "b799064cb3f975fb",
        "name": "",
        "props": [
            {
                "p": "log.message",
                "v": "7777test",
                "vt": "str"
            },
            {
                "p": "log.level",
                "v": "error",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 90,
        "y": 300,
        "wires": [
            [
                "9922fb31.2dc4d8"
            ]
        ]
    },
    {
        "id": "9922fb31.2dc4d8",
        "type": "change",
        "z": "b799064cb3f975fb",
        "name": "log",
        "rules": [
            {
                "t": "set",
                "p": "log",
                "pt": "msg",
                "to": "log.(\t    $exists(level)?\t    $~>|$|{\t            \"level\":level\t    }|\t    :\t        $~>|$|{\t            \"level\":\"critical\",\t            \"message\":\"there is not log.level. Message: \" & message\t        }|\t)\t\t/*\t[\t    {\t        \"log\":         \t            {\t                \"level\":\"debug\",\t                \"message\":\"there is Message\"\t            }\t    },\t    {\t        \"log\":         \t            {\t                \"message\":\"there is Message\",\t                \"context\":{}\t            }\t    }\t]\t*/",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "context",
                "pt": "msg",
                "to": "$.(\t\t    (log.level in [\"error\",\"alert\",\"critical\"])?(\t            $merge([\t                $exists(log.context)?log.context:{},\t                $exists(rlln)?\t                {\t                    \"rlln\":rlln\t                }:{},\t                $exists(payload)?\t                {\t                    \"payload\":payload\t                }:{},\t                {\t                    \"globs\":{\t                        \"dlvdCache\":$globalContext(\"dlvdCache\"),\t                        \"saveCache\":$globalContext(\"saveCache\"),\t                        \"RLST\":$globalContext(\"RLST\")\t                    \t                    }\t                }\t            ])    \t        \t    ):(\t        $exists(log.context)?log.context:{}\t    )\t)\t\t/*\t\t\t\t\t\t\t\t    (\t        log.level in [\"error\",\"alert\",\"critical\"]\t            and \t        $exists(log.context)\t    )?\t        rlln\t    :\t        ($exists(log.context)?(log.context):null)\t)\t\t\t[\t    {\t        \"log\":         \t            {\t                \"level\":\"error\",\t                \"message\":\"there is Message\"\t            },\t        \"rlln\":{\"evnt\":{}}   \t    },\t    {\t        \"log\":         \t            {\t                \"level\":\"info\",\t                \"message\":\"there is Message\",\t                \"context\":{\"arr\":[1,2]}\t            },\t        \"rlln\":{\"evnt\":{}}   \t    },\t    {\t        \"log\":         \t            {\t                \"level\":\"info\",\t                \"message\":\"there is Message\",\t                \"context\":{\"arr\":[1,2]}\t            }\t    },\t    {\t        \"log\":         \t            {\t                \"level\":\"info\",\t                \"message\":\"there is Message\"\t            }\t    }\t    \t]\t\t*/",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "message",
                "pt": "msg",
                "to": "$exists(log.message)?log.message:\"No message\"\t",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "level",
                "pt": "msg",
                "to": "log.level",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 230,
        "y": 300,
        "wires": [
            [
                "488b08b6.6a9c38",
                "10fd27ab.b09fa8"
            ]
        ]
    },
    {
        "id": "4b768188.85ab9",
        "type": "link in",
        "z": "b799064cb3f975fb",
        "name": "log moneyOut",
        "links": [
            "0b9c521f3eb12705",
            "1725c6765e22f0e6",
            "29789a67705b32c2",
            "4bc97a39b25d3c46",
            "978e3473827caeee",
            "b7fa68b1cf9e5f46",
            "d5ad5d5a.eb971",
            "eb21b76533c5570d",
            "fbf11159682ef1eb",
            "140b4e12d5d26fcd",
            "6e3c402ec7505f59",
            "b8bb46f3aa611678",
            "3820d8f881f4611d",
            "63842ab2d8774540",
            "b558ce1e53f01f64",
            "f9fbef24bb38c8f0",
            "1b579b03435de3a4",
            "0b2d3f231ce0db2c",
            "439579c684fe21e9",
            "f66b36acb65389e7",
            "af1395fa84ce18db",
            "28613ae36fe79247",
            "d4dc75af76e83c87",
            "3231c25c463c4dcb",
            "82218e7cee0aef8f",
            "ef131b1e301d8659",
            "0ceb385c1369e3e1",
            "cd8d18ff6c7a4f28",
            "35d70fd825143e25"
        ],
        "x": 220,
        "y": 220,
        "wires": [
            [
                "979390b2.b1563",
                "9922fb31.2dc4d8"
            ]
        ],
        "icon": "node-red/file-out.svg",
        "l": true
    },
    {
        "id": "979390b2.b1563",
        "type": "debug",
        "z": "b799064cb3f975fb",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 510,
        "y": 220,
        "wires": []
    },
    {
        "id": "488b08b6.6a9c38",
        "type": "change",
        "z": "b799064cb3f975fb",
        "name": "Add id",
        "rules": [
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            },
            {
                "t": "set",
                "p": "payload.Add",
                "pt": "msg",
                "to": "{\t    \"id\":$now(),\t   \"level\": level,\t    \"message\":message,\t    \"context\":context\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 340,
        "wires": [
            [
                "eee17a4.ded2588"
            ]
        ]
    },
    {
        "id": "eee17a4.ded2588",
        "type": "subflow:9e9a77f.2571f88",
        "z": "b799064cb3f975fb",
        "name": "_LOGS",
        "env": [
            {
                "name": "GLOB_NAME",
                "value": "_LOGS",
                "type": "str"
            },
            {
                "name": "ID_KEY",
                "value": "id",
                "type": "str"
            }
        ],
        "x": 320,
        "y": 380,
        "wires": [
            [
                "62de88af.0dc4d8"
            ],
            [
                "924963e99f2dd977"
            ]
        ]
    },
    {
        "id": "72520883.8cefc8",
        "type": "inject",
        "z": "b799064cb3f975fb",
        "name": "Read",
        "props": [
            {
                "p": "payload.Read",
                "v": "{}",
                "vt": "json"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 90,
        "y": 380,
        "wires": [
            [
                "eee17a4.ded2588"
            ]
        ]
    },
    {
        "id": "224771b4.acdefe",
        "type": "inject",
        "z": "b799064cb3f975fb",
        "name": "Delete",
        "props": [
            {
                "p": "payload.Delete",
                "v": "{}",
                "vt": "json"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 90,
        "y": 420,
        "wires": [
            [
                "eee17a4.ded2588"
            ]
        ]
    },
    {
        "id": "62de88af.0dc4d8",
        "type": "debug",
        "z": "b799064cb3f975fb",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 530,
        "y": 360,
        "wires": []
    },
    {
        "id": "10fd27ab.b09fa8",
        "type": "elastic-logger",
        "z": "b799064cb3f975fb",
        "name": "",
        "config": "2e26026f.b353be",
        "level": "debug",
        "messageField": "msg|message",
        "contextField": "msg|context",
        "x": 460,
        "y": 300,
        "wires": []
    },
    {
        "id": "8e51671f.d8cc58",
        "type": "catch",
        "z": "b799064cb3f975fb",
        "name": "catch",
        "scope": null,
        "uncaught": true,
        "x": 210,
        "y": 60,
        "wires": [
            [
                "f69ca424.912438"
            ]
        ]
    },
    {
        "id": "f69ca424.912438",
        "type": "change",
        "z": "b799064cb3f975fb",
        "name": "set error ",
        "rules": [
            {
                "t": "set",
                "p": "log.message",
                "pt": "msg",
                "to": "$substringAfter(\t   error.message,\t   \"Invalid JSONata expression: \"\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "log.level",
                "pt": "msg",
                "to": "alert",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "log.context.source",
                "pt": "msg",
                "to": "error.source",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "log.context.flow",
                "pt": "msg",
                "to": "src",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 100,
        "wires": [
            [
                "d5ad5d5a.eb971",
                "d04eb0cb.602ae"
            ]
        ]
    },
    {
        "id": "d5ad5d5a.eb971",
        "type": "link out",
        "z": "b799064cb3f975fb",
        "name": "",
        "mode": "link",
        "links": [
            "4b768188.85ab9"
        ],
        "x": 460,
        "y": 120,
        "wires": [],
        "icon": "node-red/file-in.svg",
        "l": true
    },
    {
        "id": "d04eb0cb.602ae",
        "type": "debug",
        "z": "b799064cb3f975fb",
        "name": "log",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 510,
        "y": 80,
        "wires": []
    },
    {
        "id": "924963e99f2dd977",
        "type": "debug",
        "z": "b799064cb3f975fb",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 530,
        "y": 400,
        "wires": []
    },
    {
        "id": "f4966aaf447be932",
        "type": "inject",
        "z": "b799064cb3f975fb",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\t  \"payload\": {},\t  \"messages\": [\t    {\t      \"level\": \"debug, error, alert, critical\",\t      \"text\": \"test\"\t    }\t  ],\t  \"crm\": {\t    \"output\": {\t      \"lifecycleToken\": \"UO3F6YHD13OWX6TLEAPSMQ07BNK431\",\t      \"entity\": {\t        \"row\": {\t          \"Id\": \"11111\",\t          \"Name\": null,\t          \"IsDraft\": \"0\",\t          \"IsPaid\": \"0\",\t          \"MpName\": \"Amazon Shoptimistic\",\t          \"MpClientId\": null,\t          \"MpOrderNumber\": \"111111111111\",\t          \"MpShipTemplate\": \"WPZI3-RM_pUp_FC_KY_UT\",\t          \"MpOrderNote\": \"test\",\t          \"Problem\": null,\t          \"TracknumbersInMp\": null,\t          \"HowToBuy3\": null,\t          \"HowToBuy3Result\": null,\t          \"HowToBuy3BestShipping\": null,\t          \"HowToBuy4\": \"testData\",\t          \"HowToBuy4Result\": null,\t          \"HowToBuy4BestShipping\": \"test_data\",\t          \"DateCrPayed\": \"2023-02-22 00:00:00\",\t          \"DateShipBy\": \"2023-02-04 00:00:00\",\t          \"DateDeliverBy\": \"2023-02-10 00:00:00\",\t          \"ProblemDescription\": \"test\",\t          \"TimeCreated\": \"2023-02-07 00:00:00\",\t          \"TimeUpdated\": \"2023-02-23 00:00:00\",\t          \"Contractor\": \"111111\",\t          \"MpShipMethod\": \"Standard\",\t          \"Owner\": \"111111\",\t          \"FinalPrice\": null,\t          \"Cogs\": null,\t          \"Profit\": null,\t          \"GUID\": null,\t          \"MpUaId\": null,\t          \"Status\": \"12\",\t          \"Tracknumber\": null,\t          \"ArchiveScenario\": null,\t          \"Description\": null,\t          \"Manager\": null,\t          \"StatusName\": \"Order creation\",\t          \"ProgramId\": \"5\",\t          \"ProgramName\": \"Order\"\t        },\t        \"changedFields\": {\t          \"fieldThatWasChanged\": null,\t          \"TimeUpdated\": \"2023-02-23 00:00:00\"\t        },\t        \"type\": \"deal\",\t        \"name\": \"orders\"\t      },\t      \"action\": {\t        \"startedAt\": \"2023-02-23T00:00:00+00:00\",\t        \"type\": \"update\",\t        \"context\": {\t          \"ProblemDescription\": \"test\",\t          \"TimeUpdated\": \"2023-02-23 00:00:00\"\t        }\t      }\t    }\t  }\t}",
        "payloadType": "jsonata",
        "x": 810,
        "y": 140,
        "wires": [
            [
                "1fec42c15eb1ac86"
            ]
        ]
    },
    {
        "id": "1fec42c15eb1ac86",
        "type": "debug",
        "z": "b799064cb3f975fb",
        "name": "debug 24",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 140,
        "wires": []
    },
    {
        "id": "061e87156205c12d",
        "type": "comment",
        "z": "b799064cb3f975fb",
        "name": "",
        "info": "додати в приклад даних інфо про те, що потрібен\nокремий об'єкт в \"crm\", що міститиме \nмасив з екшенами або меседжами",
        "x": 820,
        "y": 100,
        "wires": []
    },
    {
        "id": "dd6c1f2372da85bf",
        "type": "change",
        "z": "b799064cb3f975fb",
        "name": "autohowtobuy 2",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               ProblemDescription=\"-\" \t   and \t   StatusName=\"Parcels preparation\" \t           )\t       ) ?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"3\"                                       \t                       },\t                       \"delay\":0                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }:{    \"messages\": [],    \"data\":[]    } \t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 220,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "3e7ce3647f24f027",
        "type": "change",
        "z": "b799064cb3f975fb",
        "name": "linked deal autocreation",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               ProblemDescription=\"-\" \t                and \t                StatusName=\"Parcels preparation\" \t                and\t                TracknumbersInMp=null\t                and \t                (MpShipMethod=\"Standard\"\t                or\t                MpShipMethod=\"FreeEconomy\")\t                and \t                HowToBuy4BestShipping!=null\t           )\t       ) ?{\t           \"messages\": [],\t           \"data\":[\t               {\t                   \"action\":{\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scenario_id\": \"4\"                                       \t                       },\t                       \"delay\":0                            \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id                            \t                   }                    \t               }            \t           ],\t           \"code\":\"200\"     \t       }:{    \"messages\": [],    \"data\":[]    } \t   }|\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 250,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "d6daf7a83ac7092f",
        "type": "change",
        "z": "b799064cb3f975fb",
        "name": "authorization notification",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               StatusName=\"Waiting_for_sending\"\t               and \t               ProblemDescription=\"-\"\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\":\"13\", \t                           \"scenario_id\": \"30\"                                       \t                       },\t                       \"delay\": 60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 560,
        "wires": [
            [
                "140b2d569612e273"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "140b2d569612e273",
        "type": "debug",
        "z": "b799064cb3f975fb",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1030,
        "y": 560,
        "wires": []
    },
    {
        "id": "3c3c2a45653badad",
        "type": "change",
        "z": "b799064cb3f975fb",
        "name": "authorization notification",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   $~>|$|{\t       \"payload\":(\t           crm.output.entity.row.(\t               StatusName=\"Waiting_for_sending\"\t               and \t               ProblemDescription=\"-\"\t           )\t       \t       )\t?{\t           \"messages\": [],\t           \"data\": [\t               {\t                   \"action\": {\t                       \"type\":\"scenario_request\",\t                       \"context\":{\t                           \"scheme_id\":\"13\", \t                           \"scenario_id\": \"30\"                                       \t                       },\t                       \"delay\": 60       \t           \t                   \t                   },\t                   \"entity\":{\t                       \"type\":crm.output.entity.type,\t                       \"name\":crm.output.entity.name,\t                       \"rowId\":crm.output.entity.row.Id          \t               \t                   \t                   }   \t       \t               \t               }   \t   \t           \t           ],\t           \"code\": \"200\" \t\t       \t       }:null\t\t   }|\t\t).payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "crm.response.data",
                "pt": "msg",
                "to": "payload=null ? crm.response.data : crm.response.data ~>$append(payload.data)",
                "tot": "jsonata"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 620,
        "wires": [
            [
                "c17106742ad3fd24"
            ]
        ],
        "info": "спочатку визначати, чи потрібно щось робити - \r\nв змінну \"умова\"\r\nпотім визначати, що саме робити"
    },
    {
        "id": "c17106742ad3fd24",
        "type": "debug",
        "z": "b799064cb3f975fb",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1030,
        "y": 620,
        "wires": []
    }
]